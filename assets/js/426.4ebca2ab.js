/*! For license information please see 426.4ebca2ab.js.LICENSE.txt */
(self.webpackChunk_pixi_react_pixi_docs=self.webpackChunk_pixi_react_pixi_docs||[]).push([[426],{9461:(t,e,i)=>{"use strict";i.d(e,{He:()=>h,Ld:()=>b,eC:()=>u,f3:()=>o,iG:()=>c,rS:()=>p,sb:()=>g,ys:()=>a});var r=i(6062),s=i(2784);const n=Symbol.for("Animated:node"),a=t=>t&&t[n],o=(t,e)=>(0,r.dE)(t,n,e),h=t=>t&&t[n]&&t[n].getPayload();class l{constructor(){this.payload=void 0,o(this,this)}getPayload(){return this.payload||[]}}class c extends l{constructor(t){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=t,r.is.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new c(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return r.is.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value!==t&&(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,r.is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}}class u extends c{constructor(t){super(0),this._string=null,this._toString=void 0,this._toString=(0,r.mD)({output:[t,t]})}static create(t){return new u(t)}getValue(){let t=this._string;return null==t?this._string=this._toString(this._value):t}setValue(t){if(r.is.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else{if(!super.setValue(t))return!1;this._string=null}return!0}reset(t){t&&(this._toString=(0,r.mD)({output:[this.getValue(),t]})),this._value=0,super.reset()}}const d={dependencies:null};class p extends l{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return(0,r.rU)(this.source,((i,s)=>{var a;(a=i)&&a[n]===a?e[s]=i.getValue(t):(0,r.j$)(i)?e[s]=(0,r.je)(i):t||(e[s]=i)})),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&(0,r.S6)(this.payload,(t=>t.reset()))}_makePayload(t){if(t){const e=new Set;return(0,r.rU)(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){d.dependencies&&(0,r.j$)(t)&&d.dependencies.add(t);const e=h(t);e&&(0,r.S6)(e,(t=>this.add(t)))}}class f extends p{constructor(t){super(t)}static create(t){return new f(t)}getValue(){return this.source.map((t=>t.getValue()))}setValue(t){const e=this.getPayload();return t.length==e.length?e.map(((e,i)=>e.setValue(t[i]))).some(Boolean):(super.setValue(t.map(m)),!0)}}function m(t){return((0,r.Df)(t)?u:c).create(t)}function g(t){const e=a(t);return e?e.constructor:r.is.arr(t)?f:(0,r.Df)(t)?u:c}function y(){return y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},y.apply(this,arguments)}const v=(t,e)=>{const i=!r.is.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,s.forwardRef)(((n,a)=>{const o=(0,s.useRef)(null),h=i&&(0,s.useCallback)((t=>{o.current=function(t,e){t&&(r.is.fun(t)?t(e):t.current=e);return e}(a,t)}),[a]),[l,c]=function(t,e){const i=new Set;d.dependencies=i,t.style&&(t=y({},t,{style:e.createAnimatedStyle(t.style)}));return t=new p(t),d.dependencies=null,[t,i]}(n,e),u=(0,r.NW)(),f=()=>{const t=o.current;if(i&&!t)return;!1===(!!t&&e.applyAnimatedValues(t,l.getValue(!0)))&&u()},m=new _(f,c),g=(0,s.useRef)();(0,r.LI)((()=>(g.current=m,(0,r.S6)(c,(t=>(0,r.UI)(t,m))),()=>{g.current&&((0,r.S6)(g.current.deps,(t=>(0,r.iL)(t,g.current))),r.Wn.cancel(g.current.update))}))),(0,s.useEffect)(f,[]),(0,r.tf)((()=>()=>{const t=g.current;(0,r.S6)(t.deps,(e=>(0,r.iL)(e,t)))}));const v=e.getComponentProps(l.getValue());return s.createElement(t,y({},v,{ref:h}))}))};class _{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){"change"==t.type&&r.Wn.write(this.update)}}const x=Symbol.for("AnimatedComponent"),b=(t,{applyAnimatedValues:e=(()=>!1),createAnimatedStyle:i=(t=>new p(t)),getComponentProps:s=(t=>t)}={})=>{const n={applyAnimatedValues:e,createAnimatedStyle:i,getComponentProps:s},a=t=>{const e=E(t)||"Anonymous";return(t=r.is.str(t)?a[t]||(a[t]=v(t,n)):t[x]||(t[x]=v(t,n))).displayName=`Animated(${e})`,t};return(0,r.rU)(t,((e,i)=>{r.is.arr(t)&&(i=E(e)),a[i]=a(e)})),{animated:a}},E=t=>r.is.str(t)?t:t&&r.is.str(t.displayName)?t.displayName:r.is.fun(t)&&t.name||null},9557:(t,e,i)=>{"use strict";i.d(e,{Globals:()=>r.OH,Spring:()=>xt});var r=i(6062),s=i(2784),n=i(9461);function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},a.apply(this,arguments)}function o(t,...e){return r.is.fun(t)?t(...e):t}const h=(t,e)=>!0===t||!!(e&&t&&(r.is.fun(t)?t(e):(0,r.qo)(t).includes(e))),l=(t,e)=>r.is.obj(t)?e&&t[e]:t,c=(t,e)=>!0===t.default?t[e]:t.default?t.default[e]:void 0,u=t=>t,d=(t,e=u)=>{let i=p;t.default&&!0!==t.default&&(t=t.default,i=Object.keys(t));const s={};for(const n of i){const i=e(t[n],n);r.is.und(i)||(s[n]=i)}return s},p=["config","onProps","onStart","onChange","onPause","onResume","onRest"],f={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function m(t){const e=function(t){const e={};let i=0;if((0,r.rU)(t,((t,r)=>{f[r]||(e[r]=t,i++)})),i)return e}(t);if(e){const i={to:e};return(0,r.rU)(t,((t,r)=>r in e||(i[r]=t))),i}return a({},t)}function g(t){return t=(0,r.je)(t),r.is.arr(t)?t.map(g):(0,r.Df)(t)?r.OH.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function y(t){for(const e in t)return!0;return!1}function v(t){return r.is.fun(t)||r.is.arr(t)&&r.is.obj(t[0])}function _(t,e){var i;null==(i=t.ref)||i.delete(t),null==e||e.delete(t)}function x(t,e){var i;e&&t.ref!==e&&(null==(i=t.ref)||i.delete(t),e.add(t),t.ref=e)}const b=a({},{tension:170,friction:26},{mass:1,damping:1,easing:r.Z5.linear,clamp:!1});class E{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,b)}}function T(t,e){if(r.is.und(e.decay)){const i=!r.is.und(e.tension)||!r.is.und(e.friction);!i&&r.is.und(e.frequency)&&r.is.und(e.damping)&&r.is.und(e.mass)||(t.duration=void 0,t.decay=void 0),i&&(t.frequency=void 0)}else t.duration=void 0}const w=[];class S{constructor(){this.changed=!1,this.values=w,this.toValues=null,this.fromValues=w,this.to=void 0,this.from=void 0,this.config=new E,this.immediate=!1}}function A(t,{key:e,props:i,defaultProps:s,state:n,actions:l}){return new Promise(((c,u)=>{var d;let p,f,m=h(null!=(d=i.cancel)?d:null==s?void 0:s.cancel,e);if(m)v();else{r.is.und(i.pause)||(n.paused=h(i.pause,e));let t=null==s?void 0:s.pause;!0!==t&&(t=n.paused||h(t,e)),p=o(i.delay||0,e),t?(n.resumeQueue.add(y),l.pause()):(l.resume(),y())}function g(){n.resumeQueue.add(y),n.timeouts.delete(f),f.cancel(),p=f.time-r.Wn.now()}function y(){p>0&&!r.OH.skipAnimation?(n.delayed=!0,f=r.Wn.setTimeout(v,p),n.pauseQueue.add(g),n.timeouts.add(f)):v()}function v(){n.delayed&&(n.delayed=!1),n.pauseQueue.delete(g),n.timeouts.delete(f),t<=(n.cancelId||0)&&(m=!0);try{l.start(a({},i,{callId:t,cancel:m}),c)}catch(e){u(e)}}}))}const C=(t,e)=>1==e.length?e[0]:e.some((t=>t.cancelled))?P(t.get()):e.every((t=>t.noop))?I(t.get()):R(t.get(),e.every((t=>t.finished))),I=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),R=(t,e,i=!1)=>({value:t,finished:e,cancelled:i}),P=t=>({value:t,cancelled:!0,finished:!1});function k(t,e,i,s){const{callId:n,parentId:o,onRest:h}=e,{asyncTo:l,promise:c}=i;return o||t!==l||e.reset?i.promise=(async()=>{i.asyncId=n,i.asyncTo=t;const u=d(e,((t,e)=>"onRest"===e?void 0:t));let p,f;const m=new Promise(((t,e)=>(p=t,f=e))),g=t=>{const e=n<=(i.cancelId||0)&&P(s)||n!==i.asyncId&&R(s,!1);if(e)throw t.result=e,f(t),t},y=(t,e)=>{const o=new N,h=new O;return(async()=>{if(r.OH.skipAnimation)throw M(i),h.result=R(s,!1),f(h),h;g(o);const l=r.is.obj(t)?a({},t):a({},e,{to:t});l.parentId=n,(0,r.rU)(u,((t,e)=>{r.is.und(l[e])&&(l[e]=t)}));const c=await s.start(l);return g(o),i.paused&&await new Promise((t=>{i.resumeQueue.add(t)})),c})()};let v;if(r.OH.skipAnimation)return M(i),R(s,!1);try{let e;e=r.is.arr(t)?(async t=>{for(const e of t)await y(e)})(t):Promise.resolve(t(y,s.stop.bind(s))),await Promise.all([e.then(p),m]),v=R(s.get(),!0,!1)}catch(_){if(_ instanceof N)v=_.result;else{if(!(_ instanceof O))throw _;v=_.result}}finally{n==i.asyncId&&(i.asyncId=o,i.asyncTo=o?l:void 0,i.promise=o?c:void 0)}return r.is.fun(h)&&r.Wn.batchedUpdates((()=>{h(v,s,s.item)})),v})():c}function M(t,e){(0,r.yl)(t.timeouts,(t=>t.cancel())),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}class N extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class O extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const D=t=>t instanceof B;let L=1;class B extends r.B0{constructor(...t){super(...t),this.id=L++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=(0,n.ys)(this);return t&&t.getValue()}to(...t){return r.OH.to(this,t)}interpolate(...t){return(0,r.LW)(),r.OH.to(this,t)}toJSON(){return this.get()}observerAdded(t){1==t&&this._attach()}observerRemoved(t){0==t&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){(0,r.k0)(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||r.fT.sort(this),(0,r.k0)(this,{type:"priority",parent:this,priority:t})}}const F=Symbol.for("SpringPhase"),U=t=>(1&t[F])>0,j=t=>(2&t[F])>0,G=t=>(4&t[F])>0,V=(t,e)=>e?t[F]|=3:t[F]&=-3,H=(t,e)=>e?t[F]|=4:t[F]&=-5;class z extends B{constructor(t,e){if(super(),this.key=void 0,this.animation=new S,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!r.is.und(t)||!r.is.und(e)){const i=r.is.obj(t)?a({},t):a({},e,{from:t});r.is.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(j(this)||this._state.asyncTo)||G(this)}get goal(){return(0,r.je)(this.animation.to)}get velocity(){const t=(0,n.ys)(this);return t instanceof n.iG?t.lastVelocity||0:t.getPayload().map((t=>t.lastVelocity||0))}get hasAnimated(){return U(this)}get isAnimating(){return j(this)}get isPaused(){return G(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,i=!1;const s=this.animation;let{config:a,toValues:o}=s;const h=(0,n.He)(s.to);!h&&(0,r.j$)(s.to)&&(o=(0,r.qo)((0,r.je)(s.to))),s.values.forEach(((l,c)=>{if(l.done)return;const u=l.constructor==n.eC?1:h?h[c].lastPosition:o[c];let d=s.immediate,p=u;if(!d){if(p=l.lastPosition,a.tension<=0)return void(l.done=!0);let e=l.elapsedTime+=t;const i=s.fromValues[c],n=null!=l.v0?l.v0:l.v0=r.is.arr(a.velocity)?a.velocity[c]:a.velocity;let o;const h=a.precision||(i==u?.005:Math.min(1,.001*Math.abs(u-i)));if(r.is.und(a.duration))if(a.decay){const t=!0===a.decay?.998:a.decay,r=Math.exp(-(1-t)*e);p=i+n/(1-t)*(1-r),d=Math.abs(l.lastPosition-p)<=h,o=n*r}else{o=null==l.lastVelocity?n:l.lastVelocity;const e=a.restVelocity||h/10,s=a.clamp?0:a.bounce,c=!r.is.und(s),f=i==u?l.v0>0:i<u;let m,g=!1;const y=1,v=Math.ceil(t/y);for(let t=0;t<v&&(m=Math.abs(o)>e,m||(d=Math.abs(u-p)<=h,!d));++t){c&&(g=p==u||p>u==f,g&&(o=-o*s,p=u));o+=(1e-6*-a.tension*(p-u)+.001*-a.friction*o)/a.mass*y,p+=o*y}}else{let r=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,l.durationProgress>0&&(l.elapsedTime=a.duration*l.durationProgress,e=l.elapsedTime+=t)),r=(a.progress||0)+e/this._memoizedDuration,r=r>1?1:r<0?0:r,l.durationProgress=r),p=i+a.easing(r)*(u-i),o=(p-l.lastPosition)/t,d=1==r}l.lastVelocity=o,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),d=!0)}h&&!h[c].done&&(d=!1),d?l.done=!0:e=!1,l.setValue(p,a.round)&&(i=!0)}));const l=(0,n.ys)(this),c=l.getValue();if(e){const t=(0,r.je)(s.to);c===t&&!i||a.decay?i&&a.decay&&this._onChange(c):(l.setValue(t),this._onChange(t)),this._stop()}else i&&this._onChange(c)}set(t){return r.Wn.batchedUpdates((()=>{this._stop(),this._focus(t),this._set(t)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(j(this)){const{to:t,config:e}=this.animation;r.Wn.batchedUpdates((()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()}))}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let i;return r.is.und(t)?(i=this.queue||[],this.queue=[]):i=[r.is.obj(t)?t:a({},e,{to:t})],Promise.all(i.map((t=>this._update(t)))).then((t=>C(this,t)))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),M(this._state,t&&this._lastCallId),r.Wn.batchedUpdates((()=>this._stop(e,t))),this}reset(){this._update({reset:!0})}eventObserved(t){"change"==t.type?this._start():"priority"==t.type&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:i,from:s}=t;i=r.is.obj(i)?i[e]:i,(null==i||v(i))&&(i=void 0),s=r.is.obj(s)?s[e]:s,null==s&&(s=void 0);const a={to:i,from:s};return U(this)||(t.reverse&&([i,s]=[s,i]),s=(0,r.je)(s),r.is.und(s)?(0,n.ys)(this)||this._set(i):this._set(s)),a}_update(t,e){let i=a({},t);const{key:s,defaultProps:n}=this;i.default&&Object.assign(n,d(i,((t,e)=>/^on/.test(e)?l(t,s):t))),K(this,i,"onProps"),Q(this,"onProps",i,this);const o=this._prepareNode(i);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const h=this._state;return A(++this._lastCallId,{key:s,props:i,defaultProps:n,state:h,actions:{pause:()=>{G(this)||(H(this,!0),(0,r.bl)(h.pauseQueue),Q(this,"onPause",R(this,X(this,this.animation.to)),this))},resume:()=>{G(this)&&(H(this,!1),j(this)&&this._resume(),(0,r.bl)(h.resumeQueue),Q(this,"onResume",R(this,X(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then((t=>{if(i.loop&&t.finished&&(!e||!t.noop)){const t=W(i);if(t)return this._update(t,!0)}return t}))}_merge(t,e,i){if(e.cancel)return this.stop(!0),i(P(this));const s=!r.is.und(t.to),l=!r.is.und(t.from);if(s||l){if(!(e.callId>this._lastToId))return i(P(this));this._lastToId=e.callId}const{key:c,defaultProps:u,animation:d}=this,{to:p,from:f}=d;let{to:m=p,from:y=f}=t;!l||s||e.default&&!r.is.und(m)||(m=y),e.reverse&&([m,y]=[y,m]);const _=!(0,r.Xy)(y,f);_&&(d.from=y),y=(0,r.je)(y);const x=!(0,r.Xy)(m,p);x&&this._focus(m);const E=v(e.to),{config:w}=d,{decay:S,velocity:A}=w;(s||l)&&(w.velocity=0),e.config&&!E&&function(t,e,i){i&&(T(i=a({},i),e),e=a({},i,e)),T(t,e),Object.assign(t,e);for(const r in b)null==t[r]&&(t[r]=b[r]);let{mass:s,frequency:n,damping:o}=t;r.is.und(n)||(n<.01&&(n=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/n,2)*s,t.friction=4*Math.PI*o*s/n)}(w,o(e.config,c),e.config!==u.config?o(u.config,c):void 0);let C=(0,n.ys)(this);if(!C||r.is.und(m))return i(R(this,!0));const M=r.is.und(e.reset)?l&&!e.default:!r.is.und(y)&&h(e.reset,c),N=M?y:this.get(),O=g(m),D=r.is.num(O)||r.is.arr(O)||(0,r.Df)(O),L=!E&&(!D||h(u.immediate||e.immediate,c));if(x){const t=(0,n.sb)(m);if(t!==C.constructor){if(!L)throw Error(`Cannot animate between ${C.constructor.name} and ${t.name}, as the "to" prop suggests`);C=this._set(O)}}const B=C.constructor;let F=(0,r.j$)(m),G=!1;if(!F){const t=M||!U(this)&&_;(x||t)&&(G=(0,r.Xy)(g(N),O),F=!G),((0,r.Xy)(d.immediate,L)||L)&&(0,r.Xy)(w.decay,S)&&(0,r.Xy)(w.velocity,A)||(F=!0)}if(G&&j(this)&&(d.changed&&!M?F=!0:F||this._stop(p)),!E&&((F||(0,r.j$)(p))&&(d.values=C.getPayload(),d.toValues=(0,r.j$)(m)?null:B==n.eC?[1]:(0,r.qo)(O)),d.immediate!=L&&(d.immediate=L,L||M||this._set(p)),F)){const{onRest:t}=d;(0,r.S6)(Z,(t=>K(this,e,t)));const s=R(this,X(this,p));(0,r.bl)(this._pendingCalls,s),this._pendingCalls.add(i),d.changed&&r.Wn.batchedUpdates((()=>{d.changed=!M,null==t||t(s,this),M?o(u.onRest,s):null==d.onStart||d.onStart(s,this)}))}M&&this._set(N),E?i(k(e.to,e,this._state,this)):F?this._start():j(this)&&!x?this._pendingCalls.add(i):i(I(N))}_focus(t){const e=this.animation;t!==e.to&&((0,r.Ll)(this)&&this._detach(),e.to=t,(0,r.Ll)(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;(0,r.j$)(e)&&((0,r.UI)(e,this),D(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;(0,r.j$)(t)&&(0,r.iL)(t,this)}_set(t,e=!0){const i=(0,r.je)(t);if(!r.is.und(i)){const t=(0,n.ys)(this);if(!t||!(0,r.Xy)(i,t.getValue())){const s=(0,n.sb)(i);t&&t.constructor==s?t.setValue(i):(0,n.f3)(this,s.create(i)),t&&r.Wn.batchedUpdates((()=>{this._onChange(i,e)}))}}return(0,n.ys)(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Q(this,"onStart",R(this,X(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),o(this.animation.onChange,t,this)),o(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;(0,n.ys)(this).reset((0,r.je)(t.to)),t.immediate||(t.fromValues=t.values.map((t=>t.lastPosition))),j(this)||(V(this,!0),G(this)||this._resume())}_resume(){r.OH.skipAnimation?this.finish():r.fT.start(this)}_stop(t,e){if(j(this)){V(this,!1);const i=this.animation;(0,r.S6)(i.values,(t=>{t.done=!0})),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),(0,r.k0)(this,{type:"idle",parent:this});const s=e?P(this.get()):R(this.get(),X(this,null!=t?t:i.to));(0,r.bl)(this._pendingCalls,s),i.changed&&(i.changed=!1,Q(this,"onRest",s,this))}}}function X(t,e){const i=g(e),s=g(t.get());return(0,r.Xy)(s,i)}function W(t,e=t.loop,i=t.to){let r=o(e);if(r){const s=!0!==r&&m(r),n=(s||t).reverse,o=!s||s.reset;return $(a({},t,{loop:e,default:!1,pause:void 0,to:!n||v(i)?i:void 0,from:o?t.from:void 0,reset:o},s))}}function $(t){const{to:e,from:i}=t=m(t),s=new Set;return r.is.obj(e)&&q(e,s),r.is.obj(i)&&q(i,s),t.keys=s.size?Array.from(s):null,t}function Y(t){const e=$(t);return r.is.und(e.default)&&(e.default=d(e)),e}function q(t,e){(0,r.rU)(t,((t,i)=>null!=t&&e.add(i)))}const Z=["onStart","onRest","onChange","onPause","onResume"];function K(t,e,i){t.animation[i]=e[i]!==c(e,i)?l(e[i],t.key):void 0}function Q(t,e,...i){var r,s,n,a;null==(r=(s=t.animation)[e])||r.call(s,...i),null==(n=(a=t.defaultProps)[e])||n.call(a,...i)}const J=["onStart","onChange","onRest"];let tt=1;class et{constructor(t,e){this.id=tt++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start(a({default:!0},t))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((t=>t.idle&&!t.isDelayed&&!t.isPaused))}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each(((e,i)=>t[i]=e.get())),t}set(t){for(const e in t){const i=t[e];r.is.und(i)||this.springs[e].set(i)}}update(t){return t&&this.queue.push($(t)),this}start(t){let{queue:e}=this;return t?e=(0,r.qo)(t).map($):this.queue=[],this._flush?this._flush(this,e):(ht(this,e),it(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const i=this.springs;(0,r.S6)((0,r.qo)(e),(e=>i[e].stop(!!t)))}else M(this._state,this._lastAsyncId),this.each((e=>e.stop(!!t)));return this}pause(t){if(r.is.und(t))this.start({pause:!0});else{const e=this.springs;(0,r.S6)((0,r.qo)(t),(t=>e[t].pause()))}return this}resume(t){if(r.is.und(t))this.start({pause:!1});else{const e=this.springs;(0,r.S6)((0,r.qo)(t),(t=>e[t].resume()))}return this}each(t){(0,r.rU)(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:i}=this._events,s=this._active.size>0,n=this._changed.size>0;(s&&!this._started||n&&!this._started)&&(this._started=!0,(0,r.yl)(t,(([t,e])=>{e.value=this.get(),t(e,this,this._item)})));const a=!s&&this._started,o=n||a&&i.size?this.get():null;n&&e.size&&(0,r.yl)(e,(([t,e])=>{e.value=o,t(e,this,this._item)})),a&&(this._started=!1,(0,r.yl)(i,(([t,e])=>{e.value=o,t(e,this,this._item)})))}eventObserved(t){if("change"==t.type)this._changed.add(t.parent),t.idle||this._active.add(t.parent);else{if("idle"!=t.type)return;this._active.delete(t.parent)}r.Wn.onFrame(this._onFrame)}}function it(t,e){return Promise.all(e.map((e=>rt(t,e)))).then((e=>C(t,e)))}async function rt(t,e,i){const{keys:s,to:n,from:a,loop:o,onRest:h,onResolve:l}=e,u=r.is.obj(e.default)&&e.default;o&&(e.loop=!1),!1===n&&(e.to=null),!1===a&&(e.from=null);const d=r.is.arr(n)||r.is.fun(n)?n:void 0;d?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):(0,r.S6)(J,(i=>{const s=e[i];if(r.is.fun(s)){const r=t._events[i];e[i]=({finished:t,cancelled:e})=>{const i=r.get(s);i?(t||(i.finished=!1),e&&(i.cancelled=!0)):r.set(s,{value:null,finished:t||!1,cancelled:e||!1})},u&&(u[i]=e[i])}}));const p=t._state;e.pause===!p.paused?(p.paused=e.pause,(0,r.bl)(e.pause?p.pauseQueue:p.resumeQueue)):p.paused&&(e.pause=!0);const f=(s||Object.keys(t.springs)).map((i=>t.springs[i].start(e))),m=!0===e.cancel||!0===c(e,"cancel");(d||m&&p.asyncId)&&f.push(A(++t._lastAsyncId,{props:e,state:p,actions:{pause:r.ZT,resume:r.ZT,start(e,i){m?(M(p,t._lastAsyncId),i(P(t))):(e.onRest=h,i(k(d,e,p,t)))}}})),p.paused&&await new Promise((t=>{p.resumeQueue.add(t)}));const g=C(t,await Promise.all(f));if(o&&g.finished&&(!i||!g.noop)){const i=W(e,o,n);if(i)return ht(t,[i]),rt(t,i,!0)}return l&&r.Wn.batchedUpdates((()=>l(g,t,t.item))),g}function st(t,e){const i=a({},t.springs);return e&&(0,r.S6)((0,r.qo)(e),(t=>{r.is.und(t.keys)&&(t=$(t)),r.is.obj(t.to)||(t=a({},t,{to:void 0})),ot(i,t,(t=>at(t)))})),nt(t,i),i}function nt(t,e){(0,r.rU)(e,((e,i)=>{t.springs[i]||(t.springs[i]=e,(0,r.UI)(e,t))}))}function at(t,e){const i=new z;return i.key=t,e&&(0,r.UI)(i,e),i}function ot(t,e,i){e.keys&&(0,r.S6)(e.keys,(r=>{(t[r]||(t[r]=i(r)))._prepareNode(e)}))}function ht(t,e){(0,r.S6)(e,(e=>{ot(t.springs,e,(e=>at(e,t)))}))}function lt(t,e){if(null==t)return{};var i,r,s={},n=Object.keys(t);for(r=0;r<n.length;r++)i=n[r],e.indexOf(i)>=0||(s[i]=t[i]);return s}const ct=["children"],ut=t=>{let{children:e}=t,i=lt(t,ct);const n=(0,s.useContext)(dt),a=i.pause||!!n.pause,o=i.immediate||!!n.immediate;i=(0,r.Pr)((()=>({pause:a,immediate:o})),[a,o]);const{Provider:h}=dt;return s.createElement(h,{value:i},e)},dt=(pt=ut,ft={},Object.assign(pt,s.createContext(ft)),pt.Provider._context=pt,pt.Consumer._context=pt,pt);var pt,ft;ut.Provider=dt.Provider,ut.Consumer=dt.Consumer;const mt=()=>{const t=[],e=function(e){(0,r.ZR)();const s=[];return(0,r.S6)(t,((t,n)=>{if(r.is.und(e))s.push(t.start());else{const r=i(e,t,n);r&&s.push(t.start(r))}})),s};e.current=t,e.add=function(e){t.includes(e)||t.push(e)},e.delete=function(e){const i=t.indexOf(e);~i&&t.splice(i,1)},e.pause=function(){return(0,r.S6)(t,(t=>t.pause(...arguments))),this},e.resume=function(){return(0,r.S6)(t,(t=>t.resume(...arguments))),this},e.set=function(e){(0,r.S6)(t,(t=>t.set(e)))},e.start=function(e){const i=[];return(0,r.S6)(t,((t,s)=>{if(r.is.und(e))i.push(t.start());else{const r=this._getProps(e,t,s);r&&i.push(t.start(r))}})),i},e.stop=function(){return(0,r.S6)(t,(t=>t.stop(...arguments))),this},e.update=function(e){return(0,r.S6)(t,((t,i)=>t.update(this._getProps(e,t,i)))),this};const i=function(t,e,i){return r.is.fun(t)?t(i,e):t};return e._getProps=i,e};function gt(t,e,i){const n=r.is.fun(e)&&e;n&&!i&&(i=[]);const o=(0,s.useMemo)((()=>n||3==arguments.length?mt():void 0),[]),h=(0,s.useRef)(0),l=(0,r.NW)(),c=(0,s.useMemo)((()=>({ctrls:[],queue:[],flush(t,e){const i=st(t,e);return h.current>0&&!c.queue.length&&!Object.keys(i).some((e=>!t.springs[e]))?it(t,e):new Promise((r=>{nt(t,i),c.queue.push((()=>{r(it(t,e))})),l()}))}})),[]),u=(0,s.useRef)([...c.ctrls]),d=[],p=(0,r.zH)(t)||0;function f(t,i){for(let r=t;r<i;r++){const t=u.current[r]||(u.current[r]=new et(null,c.flush)),i=n?n(r,t):e[r];i&&(d[r]=Y(i))}}(0,s.useMemo)((()=>{(0,r.S6)(u.current.slice(t,p),(t=>{_(t,o),t.stop(!0)})),u.current.length=t,f(p,t)}),[t]),(0,s.useMemo)((()=>{f(0,Math.min(p,t))}),i);const m=u.current.map(((t,e)=>st(t,d[e]))),g=(0,s.useContext)(ut),v=(0,r.zH)(g),b=g!==v&&y(g);(0,r.LI)((()=>{h.current++,c.ctrls=u.current;const{queue:t}=c;t.length&&(c.queue=[],(0,r.S6)(t,(t=>t()))),(0,r.S6)(u.current,((t,e)=>{null==o||o.add(t),b&&t.start({default:g});const i=d[e];i&&(x(t,i.ref),t.ref?t.queue.push(i):t.start(i))}))})),(0,r.tf)((()=>()=>{(0,r.S6)(c.ctrls,(t=>t.stop(!0)))}));const E=m.map((t=>a({},t)));return o?[E,o]:E}function yt(t,e){const i=r.is.fun(t),[[s],n]=gt(1,i?t:[t],i?e||[]:e);return i||2==arguments.length?[s,n]:s}let vt;!function(t){t.MOUNT="mount",t.ENTER="enter",t.UPDATE="update",t.LEAVE="leave"}(vt||(vt={}));const _t=["children"];function xt(t){let{children:e}=t;return e(yt(lt(t,_t)))}class bt extends B{constructor(t,e){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=t,this.calc=(0,r.mD)(...e);const i=this._get(),s=(0,n.sb)(i);(0,n.f3)(this,s.create(i))}advance(t){const e=this._get(),i=this.get();(0,r.Xy)(e,i)||((0,n.ys)(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Tt(this._active)&&wt(this)}_get(){const t=r.is.arr(this.source)?this.source.map(r.je):(0,r.qo)((0,r.je)(this.source));return this.calc(...t)}_start(){this.idle&&!Tt(this._active)&&(this.idle=!1,(0,r.S6)((0,n.He)(this),(t=>{t.done=!1})),r.OH.skipAnimation?(r.Wn.batchedUpdates((()=>this.advance())),wt(this)):r.fT.start(this))}_attach(){let t=1;(0,r.S6)((0,r.qo)(this.source),(e=>{(0,r.j$)(e)&&(0,r.UI)(e,this),D(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))})),this.priority=t,this._start()}_detach(){(0,r.S6)((0,r.qo)(this.source),(t=>{(0,r.j$)(t)&&(0,r.iL)(t,this)})),this._active.clear(),wt(this)}eventObserved(t){"change"==t.type?t.idle?this.advance():(this._active.add(t.parent),this._start()):"idle"==t.type?this._active.delete(t.parent):"priority"==t.type&&(this.priority=(0,r.qo)(this.source).reduce(((t,e)=>Math.max(t,(D(e)?e.priority:0)+1)),0))}}function Et(t){return!1!==t.idle}function Tt(t){return!t.size||Array.from(t).every(Et)}function wt(t){t.idle||(t.idle=!0,(0,r.S6)((0,n.He)(t),(t=>{t.done=!0})),(0,r.k0)(t,{type:"idle",parent:t}))}r.OH.assign({createStringInterpolator:r.qS,to:(t,e)=>new bt(t,e)});r.fT.advance},6062:(t,e,i)=>{"use strict";i.d(e,{B0:()=>It,OH:()=>F,UI:()=>Pt,k0:()=>Ct,O9:()=>Y,mD:()=>pt,qS:()=>Vt,dE:()=>T,ZR:()=>Yt,LW:()=>Wt,S6:()=>A,rU:()=>C,Z5:()=>xt,yl:()=>R,bl:()=>P,fT:()=>H,Ll:()=>At,je:()=>St,j$:()=>wt,is:()=>w,Df:()=>qt,Xy:()=>S,ZT:()=>E,Wn:()=>s,iL:()=>kt,qo:()=>I,NW:()=>Kt,LI:()=>Zt,Pr:()=>Qt,tf:()=>Jt,zH:()=>ee});let r=_();const s=t=>m(t,r);let n=_();s.write=t=>m(t,n);let a=_();s.onStart=t=>m(t,a);let o=_();s.onFrame=t=>m(t,o);let h=_();s.onFinish=t=>m(t,h);let l=[];s.setTimeout=(t,e)=>{let i=s.now()+e,r=()=>{let t=l.findIndex((t=>t.cancel==r));~t&&l.splice(t,1),p-=~t?1:0},n={time:i,handler:t,cancel:r};return l.splice(c(i),0,n),p+=1,g(),n};let c=t=>~(~l.findIndex((e=>e.time>t))||~l.length);s.cancel=t=>{a.delete(t),o.delete(t),h.delete(t),r.delete(t),n.delete(t)},s.sync=t=>{f=!0,s.batchedUpdates(t),f=!1},s.throttle=t=>{let e;function i(){try{t(...e)}finally{e=null}}function r(...t){e=t,s.onStart(i)}return r.handler=t,r.cancel=()=>{a.delete(i),e=null},r};let u="undefined"!=typeof window?window.requestAnimationFrame:()=>{};s.use=t=>u=t,s.now="undefined"!=typeof performance?()=>performance.now():Date.now,s.batchedUpdates=t=>t(),s.catch=console.error,s.frameLoop="always",s.advance=()=>{"demand"!==s.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):v()};let d=-1,p=0,f=!1;function m(t,e){f?(e.delete(t),t(0)):(e.add(t),g())}function g(){d<0&&(d=0,"demand"!==s.frameLoop&&u(y))}function y(){~d&&(u(y),s.batchedUpdates(v))}function v(){let t=d;d=s.now();let e=c(d);e&&(x(l.splice(0,e),(t=>t.handler())),p-=e),p?(a.flush(),r.flush(t?Math.min(64,d-t):16.667),o.flush(),n.flush(),h.flush()):d=-1}function _(){let t=new Set,e=t;return{add(i){p+=e!=t||t.has(i)?0:1,t.add(i)},delete:i=>(p-=e==t&&t.has(i)?1:0,t.delete(i)),flush(i){e.size&&(t=new Set,p-=e.size,x(e,(e=>e(i)&&t.add(e))),p+=t.size,e=t)}}}function x(t,e){t.forEach((t=>{try{e(t)}catch(i){s.catch(i)}}))}var b=i(2784);function E(){}const T=(t,e,i)=>Object.defineProperty(t,e,{value:i,writable:!0,configurable:!0}),w={arr:Array.isArray,obj:t=>!!t&&"Object"===t.constructor.name,fun:t=>"function"==typeof t,str:t=>"string"==typeof t,num:t=>"number"==typeof t,und:t=>void 0===t};function S(t,e){if(w.arr(t)){if(!w.arr(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}return t===e}const A=(t,e)=>t.forEach(e);function C(t,e,i){if(w.arr(t))for(let r=0;r<t.length;r++)e.call(i,t[r],`${r}`);else for(const r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r)}const I=t=>w.und(t)?[]:w.arr(t)?t:[t];function R(t,e){if(t.size){const i=Array.from(t);t.clear(),A(i,e)}}const P=(t,...e)=>R(t,(t=>t(...e))),k=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let M,N,O=null,D=!1,L=E;const B=t=>{t.to&&(N=t.to),t.now&&(s.now=t.now),void 0!==t.colors&&(O=t.colors),null!=t.skipAnimation&&(D=t.skipAnimation),t.createStringInterpolator&&(M=t.createStringInterpolator),t.requestAnimationFrame&&s.use(t.requestAnimationFrame),t.batchedUpdates&&(s.batchedUpdates=t.batchedUpdates),t.willAdvance&&(L=t.willAdvance),t.frameLoop&&(s.frameLoop=t.frameLoop)};var F=Object.freeze({__proto__:null,get createStringInterpolator(){return M},get to(){return N},get colors(){return O},get skipAnimation(){return D},get willAdvance(){return L},assign:B});const U=new Set;let j=[],G=[],V=0;const H={get idle(){return!U.size&&!j.length},start(t){V>t.priority?(U.add(t),s.onStart(z)):(X(t),s($))},advance:$,sort(t){if(V)s.onFrame((()=>H.sort(t)));else{const e=j.indexOf(t);~e&&(j.splice(e,1),W(t))}},clear(){j=[],U.clear()}};function z(){U.forEach(X),U.clear(),s($)}function X(t){j.includes(t)||W(t)}function W(t){j.splice(function(t,e){const i=t.findIndex(e);return i<0?t.length:i}(j,(e=>e.priority>t.priority)),0,t)}function $(t){const e=G;for(let i=0;i<j.length;i++){const r=j[i];V=r.priority,r.idle||(L(r),r.advance(t),r.idle||e.push(r))}return V=0,G=j,G.length=0,j=e,j.length>0}const Y={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},q="[-+]?\\d*\\.?\\d+",Z=q+"%";function K(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const Q=new RegExp("rgb"+K(q,q,q)),J=new RegExp("rgba"+K(q,q,q,q)),tt=new RegExp("hsl"+K(q,Z,Z)),et=new RegExp("hsla"+K(q,Z,Z,q)),it=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,rt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,st=/^#([0-9a-fA-F]{6})$/,nt=/^#([0-9a-fA-F]{8})$/;function at(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function ot(t,e,i){const r=i<.5?i*(1+e):i+e-i*e,s=2*i-r,n=at(s,r,t+1/3),a=at(s,r,t),o=at(s,r,t-1/3);return Math.round(255*n)<<24|Math.round(255*a)<<16|Math.round(255*o)<<8}function ht(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function lt(t){return(parseFloat(t)%360+360)%360/360}function ct(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(255*e)}function ut(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function dt(t){let e=function(t){let e;return"number"==typeof t?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=st.exec(t))?parseInt(e[1]+"ff",16)>>>0:O&&void 0!==O[t]?O[t]:(e=Q.exec(t))?(ht(e[1])<<24|ht(e[2])<<16|ht(e[3])<<8|255)>>>0:(e=J.exec(t))?(ht(e[1])<<24|ht(e[2])<<16|ht(e[3])<<8|ct(e[4]))>>>0:(e=it.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=nt.exec(t))?parseInt(e[1],16)>>>0:(e=rt.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=tt.exec(t))?(255|ot(lt(e[1]),ut(e[2]),ut(e[3])))>>>0:(e=et.exec(t))?(ot(lt(e[1]),ut(e[2]),ut(e[3]))|ct(e[4]))>>>0:null}(t);return null===e?t:(e=e||0,`rgba(${(4278190080&e)>>>24}, ${(16711680&e)>>>16}, ${(65280&e)>>>8}, ${(255&e)/255})`)}const pt=(t,e,i)=>{if(w.fun(t))return t;if(w.arr(t))return pt({range:t,output:e,extrapolate:i});if(w.str(t.output[0]))return M(t);const r=t,s=r.output,n=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",o=r.extrapolateRight||r.extrapolate||"extend",h=r.easing||(t=>t);return t=>{const e=function(t,e){for(var i=1;i<e.length-1&&!(e[i]>=t);++i);return i-1}(t,n);return function(t,e,i,r,s,n,a,o,h){let l=h?h(t):t;if(l<e){if("identity"===a)return l;"clamp"===a&&(l=e)}if(l>i){if("identity"===o)return l;"clamp"===o&&(l=i)}if(r===s)return r;if(e===i)return t<=e?r:s;e===-1/0?l=-l:i===1/0?l-=e:l=(l-e)/(i-e);l=n(l),r===-1/0?l=-l:s===1/0?l+=r:l=l*(s-r)+r;return l}(t,n[e],n[e+1],s[e],s[e+1],h,a,o,r.map)}};const ft=1.70158,mt=1.525*ft,gt=ft+1,yt=2*Math.PI/3,vt=2*Math.PI/4.5,_t=t=>{const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},xt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>0===t?0:Math.pow(2,10*t-10),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>gt*t*t*t-ft*t*t,easeOutBack:t=>1+gt*Math.pow(t-1,3)+ft*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*(7.189819*t-mt)/2:(Math.pow(2*t-2,2)*((mt+1)*(2*t-2)+mt)+2)/2,easeInElastic:t=>0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*yt),easeOutElastic:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*yt)+1,easeInOutElastic:t=>0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*vt)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*vt)/2+1,easeInBounce:t=>1-_t(1-t),easeOutBounce:_t,easeInOutBounce:t=>t<.5?(1-_t(1-2*t))/2:(1+_t(2*t-1))/2,steps:(t,e="end")=>i=>{const r=(i="end"===e?Math.min(i,.999):Math.max(i,.001))*t,s="end"===e?Math.floor(r):Math.ceil(r);return n=0,a=1,o=s/t,Math.min(Math.max(o,n),a);var n,a,o}};function bt(){return bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},bt.apply(this,arguments)}const Et=Symbol.for("FluidValue.get"),Tt=Symbol.for("FluidValue.observers"),wt=t=>Boolean(t&&t[Et]),St=t=>t&&t[Et]?t[Et]():t,At=t=>t[Tt]||null;function Ct(t,e){let i=t[Tt];i&&i.forEach((t=>{!function(t,e){t.eventObserved?t.eventObserved(e):t(e)}(t,e)}))}class It{constructor(t){if(this[Et]=void 0,this[Tt]=void 0,!t&&!(t=this.get))throw Error("Unknown getter");Rt(this,t)}}const Rt=(t,e)=>Mt(t,Et,e);function Pt(t,e){if(t[Et]){let i=t[Tt];i||Mt(t,Tt,i=new Set),i.has(e)||(i.add(e),t.observerAdded&&t.observerAdded(i.size,e))}return e}function kt(t,e){let i=t[Tt];if(i&&i.has(e)){const r=i.size-1;r?i.delete(e):t[Tt]=null,t.observerRemoved&&t.observerRemoved(r,e)}}const Mt=(t,e,i)=>Object.defineProperty(t,e,{value:i,writable:!0,configurable:!0}),Nt=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ot=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Dt=new RegExp(`(${Nt.source})(%|[a-z]+)`,"i"),Lt=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Bt=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ft=t=>{const[e,i]=Ut(t);if(!e||k())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(i&&i.startsWith("--")){const e=window.getComputedStyle(document.documentElement).getPropertyValue(i);return e||t}return i&&Bt.test(i)?Ft(i):i||t},Ut=t=>{const e=Bt.exec(t);if(!e)return[,];const[,i,r]=e;return[i,r]};let jt;const Gt=(t,e,i,r,s)=>`rgba(${Math.round(e)}, ${Math.round(i)}, ${Math.round(r)}, ${s})`,Vt=t=>{jt||(jt=O?new RegExp(`(${Object.keys(O).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map((t=>St(t).replace(Bt,Ft).replace(Ot,dt).replace(jt,dt))),i=e.map((t=>t.match(Nt).map(Number))),r=i[0].map(((t,e)=>i.map((t=>{if(!(e in t))throw Error('The arity of each "output" value must be equal');return t[e]})))).map((e=>pt(bt({},t,{output:e}))));return t=>{var i;const s=!Dt.test(e[0])&&(null==(i=e.find((t=>Dt.test(t))))?void 0:i.replace(Nt,""));let n=0;return e[0].replace(Nt,(()=>`${r[n++](t)}${s||""}`)).replace(Lt,Gt)}},Ht="react-spring: ",zt=t=>{const e=t;let i=!1;if("function"!=typeof e)throw new TypeError(`${Ht}once requires a function parameter`);return(...t)=>{i||(e(...t),i=!0)}},Xt=zt(console.warn);function Wt(){Xt(`${Ht}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const $t=zt(console.warn);function Yt(){$t(`${Ht}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function qt(t){return w.str(t)&&("#"==t[0]||/\d/.test(t)||!k()&&Bt.test(t)||t in(O||{}))}new WeakMap;new Set;new WeakMap,new WeakMap,new WeakMap;const Zt=k()?b.useEffect:b.useLayoutEffect;function Kt(){const t=(0,b.useState)()[1],e=(()=>{const t=(0,b.useRef)(!1);return Zt((()=>(t.current=!0,()=>{t.current=!1})),[]),t})();return()=>{e.current&&t(Math.random())}}function Qt(t,e){const[i]=(0,b.useState)((()=>({inputs:e,result:t()}))),r=(0,b.useRef)(),s=r.current;let n=s;if(n){Boolean(e&&n.inputs&&function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(e,n.inputs))||(n={inputs:e,result:t()})}else n=i;return(0,b.useEffect)((()=>{r.current=n,s==i&&(i.inputs=i.result=void 0)}),[n]),n.result}const Jt=t=>(0,b.useEffect)(t,te),te=[];function ee(t){const e=(0,b.useRef)();return(0,b.useEffect)((()=>{e.current=t})),e.current}},5868:(t,e,i)=>{"use strict";i.d(e,{Spring:()=>r.Spring});var r=i(9557),s=i(8316),n=i(6062),a=i(9461);function o(t,e){if(null==t)return{};var i,r,s={},n=Object.keys(t);for(r=0;r<n.length;r++)i=n[r],e.indexOf(i)>=0||(s[i]=t[i]);return s}const h=["style","children","scrollTop","scrollLeft","viewBox"],l=/^--/;function c(t,e){return null==e||"boolean"==typeof e||""===e?"":"number"!=typeof e||0===e||l.test(t)||d.hasOwnProperty(t)&&d[t]?(""+e).trim():e+"px"}const u={};let d={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const p=["Webkit","Ms","Moz","O"];d=Object.keys(d).reduce(((t,e)=>(p.forEach((i=>t[((t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1))(i,e)]=t[e])),t)),d);const f=["x","y","z"],m=/^(matrix|translate|scale|rotate|skew)/,g=/^(translate)/,y=/^(rotate|skew)/,v=(t,e)=>n.is.num(t)&&0!==t?t+e:t,_=(t,e)=>n.is.arr(t)?t.every((t=>_(t,e))):n.is.num(t)?t===e:parseFloat(t)===e;class x extends a.rS{constructor(t){let{x:e,y:i,z:r}=t,s=o(t,f);const a=[],h=[];(e||i||r)&&(a.push([e||0,i||0,r||0]),h.push((t=>[`translate3d(${t.map((t=>v(t,"px"))).join(",")})`,_(t,0)]))),(0,n.rU)(s,((t,e)=>{if("transform"===e)a.push([t||""]),h.push((t=>[t,""===t]));else if(m.test(e)){if(delete s[e],n.is.und(t))return;const i=g.test(e)?"px":y.test(e)?"deg":"";a.push((0,n.qo)(t)),h.push("rotate3d"===e?([t,e,r,s])=>[`rotate3d(${t},${e},${r},${v(s,i)})`,_(s,0)]:t=>[`${e}(${t.map((t=>v(t,i))).join(",")})`,_(t,e.startsWith("scale")?1:0)])}})),a.length&&(s.transform=new b(a,h)),super(s)}}class b extends n.B0{constructor(t,e){super(),this._value=null,this.inputs=t,this.transforms=e}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return(0,n.S6)(this.inputs,((i,r)=>{const s=(0,n.je)(i[0]),[a,o]=this.transforms[r](n.is.arr(s)?s:i.map(n.je));t+=" "+a,e=e&&o})),e?"none":t}observerAdded(t){1==t&&(0,n.S6)(this.inputs,(t=>(0,n.S6)(t,(t=>(0,n.j$)(t)&&(0,n.UI)(t,this)))))}observerRemoved(t){0==t&&(0,n.S6)(this.inputs,(t=>(0,n.S6)(t,(t=>(0,n.j$)(t)&&(0,n.iL)(t,this)))))}eventObserved(t){"change"==t.type&&(this._value=null),(0,n.k0)(this,t)}}const E=["scrollTop","scrollLeft"];r.Globals.assign({batchedUpdates:s.unstable_batchedUpdates,createStringInterpolator:n.qS,colors:n.O9});(0,a.Ld)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(t,e){if(!t.nodeType||!t.setAttribute)return!1;const i="filter"===t.nodeName||t.parentNode&&"filter"===t.parentNode.nodeName,r=e,{style:s,children:n,scrollTop:a,scrollLeft:d,viewBox:p}=r,f=o(r,h),m=Object.values(f),g=Object.keys(f).map((e=>i||t.hasAttribute(e)?e:u[e]||(u[e]=e.replace(/([A-Z])/g,(t=>"-"+t.toLowerCase())))));void 0!==n&&(t.textContent=n);for(let o in s)if(s.hasOwnProperty(o)){const e=c(o,s[o]);l.test(o)?t.style.setProperty(o,e):t.style[o]=e}g.forEach(((e,i)=>{t.setAttribute(e,m[i])})),void 0!==a&&(t.scrollTop=a),void 0!==d&&(t.scrollLeft=d),void 0!==p&&t.setAttribute("viewBox",p)},createAnimatedStyle:t=>new x(t),getComponentProps:t=>o(t,E)}).animated},3352:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var r=i(7896),s=i(2784),n=i(6277),a=i(1077),o=i(7683);const h="anchorWithStickyNavbar_LWe7",l="anchorWithHideOnScrollNavbar_WYt5";function c(t){let{as:e,id:i,...c}=t;const{navbar:{hideOnScroll:u}}=(0,o.L)();return"h1"!==e&&i?s.createElement(e,(0,r.Z)({},c,{className:(0,n.Z)("anchor",u?l:h),id:i}),c.children,s.createElement("a",{className:"hash-link",href:`#${i}`,title:(0,a.I)({id:"theme.common.headingLinkTitle",message:"Direct link to heading",description:"Title for link to heading"})},"\u200b")):s.createElement(e,(0,r.Z)({},c,{id:void 0}))}},4106:(t,e,i)=>{"use strict";i.d(e,{Z:()=>_s});var r=i(2784),s=i(3905),n=i(7896),a=i(9854);var o=i(6277),h=i(9741),l=i(4883),c=i(7175);const u={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]};var d={Prism:c.Z,theme:u};function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(){return f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},f.apply(this,arguments)}var m=/\r\n|\r|\n/,g=function(t){0===t.length?t.push({types:["plain"],content:"\n",empty:!0}):1===t.length&&""===t[0].content&&(t[0].content="\n",t[0].empty=!0)},y=function(t,e){var i=t.length;return i>0&&t[i-1]===e?t:t.concat(e)},v=function(t,e){var i=t.plain,r=Object.create(null),s=t.styles.reduce((function(t,i){var r=i.languages,s=i.style;return r&&!r.includes(e)||i.types.forEach((function(e){var i=f({},t[e],s);t[e]=i})),t}),r);return s.root=i,s.plain=f({},i,{backgroundColor:null}),s};function _(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&-1===e.indexOf(r)&&(i[r]=t[r]);return i}var x=function(t){function e(){for(var e=this,i=[],r=arguments.length;r--;)i[r]=arguments[r];t.apply(this,i),p(this,"getThemeDict",(function(t){if(void 0!==e.themeDict&&t.theme===e.prevTheme&&t.language===e.prevLanguage)return e.themeDict;e.prevTheme=t.theme,e.prevLanguage=t.language;var i=t.theme?v(t.theme,t.language):void 0;return e.themeDict=i})),p(this,"getLineProps",(function(t){var i=t.key,r=t.className,s=t.style,n=f({},_(t,["key","className","style","line"]),{className:"token-line",style:void 0,key:void 0}),a=e.getThemeDict(e.props);return void 0!==a&&(n.style=a.plain),void 0!==s&&(n.style=void 0!==n.style?f({},n.style,s):s),void 0!==i&&(n.key=i),r&&(n.className+=" "+r),n})),p(this,"getStyleForToken",(function(t){var i=t.types,r=t.empty,s=i.length,n=e.getThemeDict(e.props);if(void 0!==n){if(1===s&&"plain"===i[0])return r?{display:"inline-block"}:void 0;if(1===s&&!r)return n[i[0]];var a=r?{display:"inline-block"}:{},o=i.map((function(t){return n[t]}));return Object.assign.apply(Object,[a].concat(o))}})),p(this,"getTokenProps",(function(t){var i=t.key,r=t.className,s=t.style,n=t.token,a=f({},_(t,["key","className","style","token"]),{className:"token "+n.types.join(" "),children:n.content,style:e.getStyleForToken(n),key:void 0});return void 0!==s&&(a.style=void 0!==a.style?f({},a.style,s):s),void 0!==i&&(a.key=i),r&&(a.className+=" "+r),a})),p(this,"tokenize",(function(t,e,i,r){var s={code:e,grammar:i,language:r,tokens:[]};t.hooks.run("before-tokenize",s);var n=s.tokens=t.tokenize(s.code,s.grammar,s.language);return t.hooks.run("after-tokenize",s),n}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.props,e=t.Prism,i=t.language,r=t.code,s=t.children,n=this.getThemeDict(this.props),a=e.languages[i],o=function(t){for(var e=[[]],i=[t],r=[0],s=[t.length],n=0,a=0,o=[],h=[o];a>-1;){for(;(n=r[a]++)<s[a];){var l=void 0,c=e[a],u=i[a][n];if("string"==typeof u?(c=a>0?c:["plain"],l=u):(c=y(c,u.type),u.alias&&(c=y(c,u.alias)),l=u.content),"string"==typeof l){var d=l.split(m),p=d.length;o.push({types:c,content:d[0]});for(var f=1;f<p;f++)g(o),h.push(o=[]),o.push({types:c,content:d[f]})}else a++,e.push(c),i.push(l),r.push(0),s.push(l.length)}a--,e.pop(),i.pop(),r.pop(),s.pop()}return g(o),h}(void 0!==a?this.tokenize(e,r,a,i):[r]);return s({tokens:o,className:"prism-code language-"+i,style:void 0!==n?n.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},e}(r.Component);const b=x;var E={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},T="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",w={5:T,6:T+" const class extends export import super"},S=/^in(stanceof)?$/,A="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7b9\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",C="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",I=new RegExp("["+A+"]"),R=new RegExp("["+A+C+"]");A=C=null;var P=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],k=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function M(t,e){for(var i=65536,r=0;r<e.length;r+=2){if((i+=e[r])>t)return!1;if((i+=e[r+1])>=t)return!0}}function N(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&I.test(String.fromCharCode(t)):!1!==e&&M(t,P)))}function O(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&R.test(String.fromCharCode(t)):!1!==e&&(M(t,P)||M(t,k)))))}var D=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function L(t,e){return new D(t,{beforeExpr:!0,binop:e})}var B={beforeExpr:!0},F={startsExpr:!0},U={};function j(t,e){return void 0===e&&(e={}),e.keyword=t,U[t]=new D(t,e)}var G={num:new D("num",F),regexp:new D("regexp",F),string:new D("string",F),name:new D("name",F),eof:new D("eof"),bracketL:new D("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new D("]"),braceL:new D("{",{beforeExpr:!0,startsExpr:!0}),braceR:new D("}"),parenL:new D("(",{beforeExpr:!0,startsExpr:!0}),parenR:new D(")"),comma:new D(",",B),semi:new D(";",B),colon:new D(":",B),dot:new D("."),question:new D("?",B),arrow:new D("=>",B),template:new D("template"),invalidTemplate:new D("invalidTemplate"),ellipsis:new D("...",B),backQuote:new D("`",F),dollarBraceL:new D("${",{beforeExpr:!0,startsExpr:!0}),eq:new D("=",{beforeExpr:!0,isAssign:!0}),assign:new D("_=",{beforeExpr:!0,isAssign:!0}),incDec:new D("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new D("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:L("||",1),logicalAND:L("&&",2),bitwiseOR:L("|",3),bitwiseXOR:L("^",4),bitwiseAND:L("&",5),equality:L("==/!=/===/!==",6),relational:L("</>/<=/>=",7),bitShift:L("<</>>/>>>",8),plusMin:new D("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:L("%",10),star:L("*",10),slash:L("/",10),starstar:new D("**",{beforeExpr:!0}),_break:j("break"),_case:j("case",B),_catch:j("catch"),_continue:j("continue"),_debugger:j("debugger"),_default:j("default",B),_do:j("do",{isLoop:!0,beforeExpr:!0}),_else:j("else",B),_finally:j("finally"),_for:j("for",{isLoop:!0}),_function:j("function",F),_if:j("if"),_return:j("return",B),_switch:j("switch"),_throw:j("throw",B),_try:j("try"),_var:j("var"),_const:j("const"),_while:j("while",{isLoop:!0}),_with:j("with"),_new:j("new",{beforeExpr:!0,startsExpr:!0}),_this:j("this",F),_super:j("super",F),_class:j("class",F),_extends:j("extends",B),_export:j("export"),_import:j("import"),_null:j("null",F),_true:j("true",F),_false:j("false",F),_in:j("in",{beforeExpr:!0,binop:7}),_instanceof:j("instanceof",{beforeExpr:!0,binop:7}),_typeof:j("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:j("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:j("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},V=/\r\n?|\n|\u2028|\u2029/,H=new RegExp(V.source,"g");function z(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var X=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,W=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,$=Object.prototype,Y=$.hasOwnProperty,q=$.toString;function Z(t,e){return Y.call(t,e)}var K=Array.isArray||function(t){return"[object Array]"===q.call(t)};function Q(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var J=function(t,e){this.line=t,this.column=e};J.prototype.offset=function(t){return new J(this.line,this.column+t)};var tt=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)};function et(t,e){for(var i=1,r=0;;){H.lastIndex=r;var s=H.exec(t);if(!(s&&s.index<e))return new J(i,e-r);++i,r=s.index+s[0].length}}var it={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function rt(t,e){return 2|(t?4:0)|(e?8:0)}var st=function(t,e,i){this.options=t=function(t){var e={};for(var i in it)e[i]=t&&Z(t,i)?t[i]:it[i];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),K(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return K(e.onComment)&&(e.onComment=function(t,e){return function(i,r,s,n,a,o){var h={type:i?"Block":"Line",value:r,start:s,end:n};t.locations&&(h.loc=new tt(this,a,o)),t.ranges&&(h.range=[s,n]),e.push(h)}}(e,e.onComment)),e}(t),this.sourceFile=t.sourceFile,this.keywords=Q(w[t.ecmaVersion>=6?6:5]);var r="";if(!t.allowReserved){for(var s=t.ecmaVersion;!(r=E[s]);s--);"module"===t.sourceType&&(r+=" await")}this.reservedWords=Q(r);var n=(r?r+" ":"")+E.strict;this.reservedWordsStrict=Q(n),this.reservedWordsStrictBind=Q(n+" "+E.strictBind),this.input=String(e),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(V).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=G.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},nt={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};st.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},nt.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},nt.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},nt.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},nt.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},nt.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},nt.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},st.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},st.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i=this,r=0;r<t.length;r++)i=t[r](i);return i},st.parse=function(t,e){return new this(e,t).parse()},st.parseExpressionAt=function(t,e,i){var r=new this(i,t,e);return r.nextToken(),r.parseExpression()},st.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(st.prototype,nt);var at=st.prototype,ot=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function ht(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}at.strictDirective=function(t){for(;;){W.lastIndex=t,t+=W.exec(this.input)[0].length;var e=ot.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;W.lastIndex=t+=e[0].length,t+=W.exec(this.input)[0].length,";"===this.input[t]&&t++}},at.eat=function(t){return this.type===t&&(this.next(),!0)},at.isContextual=function(t){return this.type===G.name&&this.value===t&&!this.containsEsc},at.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},at.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},at.canInsertSemicolon=function(){return this.type===G.eof||this.type===G.braceR||V.test(this.input.slice(this.lastTokEnd,this.start))},at.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},at.semicolon=function(){this.eat(G.semi)||this.insertSemicolon()||this.unexpected()},at.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},at.expect=function(t){this.eat(t)||this.unexpected()},at.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},at.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,"Parenthesized pattern")}},at.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,r=t.doubleProto;if(!e)return i>=0||r>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},at.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},at.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var lt=st.prototype;lt.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==G.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var r=0,s=Object.keys(this.undefinedExports);r<s.length;r+=1){var n=s[r];this.raiseRecoverable(this.undefinedExports[n].start,"Export '"+n+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),this.options.ecmaVersion>=6&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var ct={kind:"loop"},ut={kind:"switch"};lt.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;W.lastIndex=this.pos;var e=W.exec(this.input),i=this.pos+e[0].length,r=this.input.charCodeAt(i);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(N(r,!0)){for(var s=i+1;O(this.input.charCodeAt(s),!0);)++s;var n=this.input.slice(i,s);if(!S.test(n))return!0}return!1},lt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;W.lastIndex=this.pos;var t=W.exec(this.input),e=this.pos+t[0].length;return!(V.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&O(this.input.charAt(e+8)))},lt.parseStatement=function(t,e,i){var r,s=this.type,n=this.startNode();switch(this.isLet(t)&&(s=G._var,r="let"),s){case G._break:case G._continue:return this.parseBreakContinueStatement(n,s.keyword);case G._debugger:return this.parseDebuggerStatement(n);case G._do:return this.parseDoStatement(n);case G._for:return this.parseForStatement(n);case G._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(n,!1,!t);case G._class:return t&&this.unexpected(),this.parseClass(n,!0);case G._if:return this.parseIfStatement(n);case G._return:return this.parseReturnStatement(n);case G._switch:return this.parseSwitchStatement(n);case G._throw:return this.parseThrowStatement(n);case G._try:return this.parseTryStatement(n);case G._const:case G._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(n,r);case G._while:return this.parseWhileStatement(n);case G._with:return this.parseWithStatement(n);case G.braceL:return this.parseBlock(!0,n);case G.semi:return this.parseEmptyStatement(n);case G._export:case G._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),s===G._import?this.parseImport(n):this.parseExport(n,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!t);var a=this.value,o=this.parseExpression();return s===G.name&&"Identifier"===o.type&&this.eat(G.colon)?this.parseLabeledStatement(n,a,o,t):this.parseExpressionStatement(n,o)}},lt.parseBreakContinueStatement=function(t,e){var i="break"===e;this.next(),this.eat(G.semi)||this.insertSemicolon()?t.label=null:this.type!==G.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var s=this.labels[r];if(null==t.label||s.name===t.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(t.label&&i)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},lt.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},lt.parseDoStatement=function(t){return this.next(),this.labels.push(ct),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(G._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(G.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},lt.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ct),this.enterScope(0),this.expect(G.parenL),this.type===G.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===G._var||this.type===G._const||i){var r=this.startNode(),s=i?"let":this.value;return this.next(),this.parseVar(r,!0,s),this.finishNode(r,"VariableDeclaration"),!(this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==s&&r.declarations[0].init?(e>-1&&this.unexpected(e),this.parseFor(t,r)):(this.options.ecmaVersion>=9&&(this.type===G._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r))}var n=new ht,a=this.parseExpression(!0,n);return this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===G._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(a,!1,n),this.checkLVal(a),this.parseForIn(t,a)):(this.checkExpressionErrors(n,!0),e>-1&&this.unexpected(e),this.parseFor(t,a))},lt.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,pt|(i?0:ft),!1,e)},lt.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(G._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},lt.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(G.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},lt.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(G.braceL),this.labels.push(ut),this.enterScope(0);for(var i=!1;this.type!==G.braceR;)if(this.type===G._case||this.type===G._default){var r=this.type===G._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(G.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},lt.parseThrowStatement=function(t){return this.next(),V.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var dt=[];lt.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===G._catch){var e=this.startNode();if(this.next(),this.eat(G.parenL)){e.param=this.parseBindingAtom();var i="Identifier"===e.param.type;this.enterScope(i?32:0),this.checkLVal(e.param,i?4:2),this.expect(G.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(G._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},lt.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},lt.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(ct),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},lt.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},lt.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},lt.parseLabeledStatement=function(t,e,i,r){for(var s=0,n=this.labels;s<n.length;s+=1)n[s].name===e&&this.raise(i.start,"Label '"+e+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===G._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var h=this.labels[o];if(h.statementStart!==t.start)break;h.statementStart=this.start,h.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},lt.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},lt.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(G.braceL),t&&this.enterScope(0);!this.eat(G.braceR);){var i=this.parseStatement(null);e.body.push(i)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},lt.parseFor=function(t,e){return t.init=e,this.expect(G.semi),t.test=this.type===G.semi?null:this.parseExpression(),this.expect(G.semi),t.update=this.type===G.parenR?null:this.parseExpression(),this.expect(G.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},lt.parseForIn=function(t,e){var i=this.type===G._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===i&&("AssignmentPattern"===e.type||"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(this.strict||"Identifier"!==e.declarations[0].id.type))&&this.raise(e.start,"Invalid assignment in for-in loop head"),t.left=e,t.right="ForInStatement"===i?this.parseExpression():this.parseMaybeAssign(),this.expect(G.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i)},lt.parseVar=function(t,e,i){for(t.declarations=[],t.kind=i;;){var r=this.startNode();if(this.parseVarId(r,i),this.eat(G.eq)?r.init=this.parseMaybeAssign(e):"const"!==i||this.type===G._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===G._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(G.comma))break}return t},lt.parseVarId=function(t,e){"const"!==e&&"let"!==e||!this.isContextual("let")||this.raiseRecoverable(this.start,"let is disallowed as a lexically bound name"),t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var pt=1,ft=2;lt.parseFunction=function(t,e,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===G.star&&e&ft&&this.unexpected(),t.generator=this.eat(G.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&pt&&(t.id=4&e&&this.type!==G.name?null:this.parseIdent(),!t.id||e&ft||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var s=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(rt(t.async,t.generator)),e&pt||(t.id=this.type===G.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1),this.yieldPos=s,this.awaitPos=n,this.awaitIdentPos=a,this.finishNode(t,e&pt?"FunctionDeclaration":"FunctionExpression")},lt.parseFunctionParams=function(t){this.expect(G.parenL),t.params=this.parseBindingList(G.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},lt.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),s=!1;for(r.body=[],this.expect(G.braceL);!this.eat(G.braceR);){var n=this.parseClassElement(null!==t.superClass);n&&(r.body.push(n),"MethodDefinition"===n.type&&"constructor"===n.kind&&(s&&this.raise(n.start,"Duplicate constructor in the same class"),s=!0))}return t.body=this.finishNode(r,"ClassBody"),this.strict=i,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},lt.parseClassElement=function(t){var e=this;if(this.eat(G.semi))return null;var i=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var s=e.start,n=e.startLoc;return!(!e.eatContextual(t)||(e.type===G.parenL||r&&e.canInsertSemicolon())&&(i.key&&e.unexpected(),i.computed=!1,i.key=e.startNodeAt(s,n),i.key.name=t,e.finishNode(i.key,"Identifier"),1))};i.kind="method",i.static=r("static");var s=this.eat(G.star),n=!1;s||(this.options.ecmaVersion>=8&&r("async",!0)?(n=!0,s=this.options.ecmaVersion>=9&&this.eat(G.star)):r("get")?i.kind="get":r("set")&&(i.kind="set")),i.key||this.parsePropertyName(i);var a=i.key,o=!1;return i.computed||i.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?i.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==i.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),s&&this.raise(a.start,"Constructor can't be a generator"),n&&this.raise(a.start,"Constructor can't be an async method"),i.kind="constructor",o=t),this.parseClassMethod(i,s,n,o),"get"===i.kind&&0!==i.value.params.length&&this.raiseRecoverable(i.value.start,"getter should have no params"),"set"===i.kind&&1!==i.value.params.length&&this.raiseRecoverable(i.value.start,"setter should have exactly one param"),"set"===i.kind&&"RestElement"===i.value.params[0].type&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params"),i},lt.parseClassMethod=function(t,e,i,r){return t.value=this.parseMethod(e,i,r),this.finishNode(t,"MethodDefinition")},lt.parseClassId=function(t,e){this.type===G.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},lt.parseClassSuper=function(t){t.superClass=this.eat(G._extends)?this.parseExprSubscripts():null},lt.parseExport=function(t,e){if(this.next(),this.eat(G.star))return this.expectContextual("from"),this.type!==G.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(G._default)){var i;if(this.checkExport(e,"default",this.lastTokStart),this.type===G._function||(i=this.isAsyncFunction())){var r=this.startNode();this.next(),i&&this.next(),t.declaration=this.parseFunction(r,4|pt,!1,i)}else if(this.type===G._class){var s=this.startNode();t.declaration=this.parseClass(s,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==G.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var n=0,a=t.specifiers;n<a.length;n+=1){var o=a[n];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},lt.checkExport=function(t,e,i){t&&(Z(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},lt.checkPatternExport=function(t,e){var i=e.type;if("Identifier"===i)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===i)for(var r=0,s=e.properties;r<s.length;r+=1)this.checkPatternExport(t,s[r]);else if("ArrayPattern"===i)for(var n=0,a=e.elements;n<a.length;n+=1){var o=a[n];o&&this.checkPatternExport(t,o)}else"Property"===i?this.checkPatternExport(t,e.value):"AssignmentPattern"===i?this.checkPatternExport(t,e.left):"RestElement"===i?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===i&&this.checkPatternExport(t,e.expression)},lt.checkVariableExport=function(t,e){if(t)for(var i=0,r=e;i<r.length;i+=1)this.checkPatternExport(t,r[i].id)},lt.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},lt.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(G.braceL);!this.eat(G.braceR);){if(i)i=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},lt.parseImport=function(t){return this.next(),this.type===G.string?(t.specifiers=dt,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===G.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},lt.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===G.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(G.comma))return t}if(this.type===G.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(G.braceL);!this.eat(G.braceR);){if(e)e=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;var s=this.startNode();s.imported=this.parseIdent(!0),this.eatContextual("as")?s.local=this.parseIdent():(this.checkUnreserved(s.imported),s.local=s.imported),this.checkLVal(s.local,2),t.push(this.finishNode(s,"ImportSpecifier"))}return t},lt.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},lt.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var mt=st.prototype;mt.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var r=0,s=t.properties;r<s.length;r+=1){var n=s[r];this.toAssignable(n,e),"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},mt.toAssignableList=function(t,e){for(var i=t.length,r=0;r<i;r++){var s=t[r];s&&this.toAssignable(s,e)}if(i){var n=t[i-1];6===this.options.ecmaVersion&&e&&n&&"RestElement"===n.type&&"Identifier"!==n.argument.type&&this.unexpected(n.argument.start)}return t},mt.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},mt.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==G.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},mt.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case G.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(G.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case G.braceL:return this.parseObj(!0)}return this.parseIdent()},mt.parseBindingList=function(t,e,i){for(var r=[],s=!0;!this.eat(t);)if(s?s=!1:this.expect(G.comma),e&&this.type===G.comma)r.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===G.ellipsis){var n=this.parseRestBinding();this.parseBindingListItem(n),r.push(n),this.type===G.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},mt.parseBindingListItem=function(t){return t},mt.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(G.eq))return i;var r=this.startNodeAt(t,e);return r.left=i,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},mt.checkLVal=function(t,e,i){switch(void 0===e&&(e=0),t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(Z(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,s=t.properties;r<s.length;r+=1)this.checkLVal(s[r],e,i);break;case"Property":this.checkLVal(t.value,e,i);break;case"ArrayPattern":for(var n=0,a=t.elements;n<a.length;n+=1){var o=a[n];o&&this.checkLVal(o,e,i)}break;case"AssignmentPattern":this.checkLVal(t.left,e,i);break;case"RestElement":this.checkLVal(t.argument,e,i);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,i);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var gt=st.prototype;gt.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,s=t.key;switch(s.type){case"Identifier":r=s.name;break;case"Literal":r=String(s.value);break;default:return}var n=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===n&&(e.proto&&(i&&i.doubleProto<0?i.doubleProto=s.start:this.raiseRecoverable(s.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[r="$"+r];a?("init"===n?this.strict&&a.init||a.get||a.set:a.init||a[n])&&this.raiseRecoverable(s.start,"Redefinition of property"):a=e[r]={init:!1,get:!1,set:!1},a[n]=!0}}},gt.parseExpression=function(t,e){var i=this.start,r=this.startLoc,s=this.parseMaybeAssign(t,e);if(this.type===G.comma){var n=this.startNodeAt(i,r);for(n.expressions=[s];this.eat(G.comma);)n.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(n,"SequenceExpression")}return s},gt.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,s=-1,n=-1,a=-1;e?(s=e.parenthesizedAssign,n=e.trailingComma,a=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new ht,r=!0);var o=this.start,h=this.startLoc;this.type!==G.parenL&&this.type!==G.name||(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(t,e);if(i&&(l=i.call(this,l,o,h)),this.type.isAssign){var c=this.startNodeAt(o,h);return c.operator=this.value,c.left=this.type===G.eq?this.toAssignable(l,!1,e):l,r||ht.call(e),e.shorthandAssign=-1,this.checkLVal(l),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),s>-1&&(e.parenthesizedAssign=s),n>-1&&(e.trailingComma=n),a>-1&&(e.shorthandAssign=a),l},gt.parseMaybeConditional=function(t,e){var i=this.start,r=this.startLoc,s=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return s;if(this.eat(G.question)){var n=this.startNodeAt(i,r);return n.test=s,n.consequent=this.parseMaybeAssign(),this.expect(G.colon),n.alternate=this.parseMaybeAssign(t),this.finishNode(n,"ConditionalExpression")}return s},gt.parseExprOps=function(t,e){var i=this.start,r=this.startLoc,s=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||s.start===i&&"ArrowFunctionExpression"===s.type?s:this.parseExprOp(s,i,r,-1,t)},gt.parseExprOp=function(t,e,i,r,s){var n=this.type.binop;if(null!=n&&(!s||this.type!==G._in)&&n>r){var a=this.type===G.logicalOR||this.type===G.logicalAND,o=this.value;this.next();var h=this.start,l=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),h,l,n,s),u=this.buildBinary(e,i,t,c,o,a);return this.parseExprOp(u,e,i,r,s)}return t},gt.buildBinary=function(t,e,i,r,s,n){var a=this.startNodeAt(t,e);return a.left=i,a.operator=s,a.right=r,this.finishNode(a,n?"LogicalExpression":"BinaryExpression")},gt.parseMaybeUnary=function(t,e){var i,r=this.start,s=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))i=this.parseAwait(),e=!0;else if(this.type.prefix){var n=this.startNode(),a=this.type===G.incDec;n.operator=this.value,n.prefix=!0,this.next(),n.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLVal(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):e=!0,i=this.finishNode(n,a?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,s);o.operator=this.value,o.prefix=!1,o.argument=i,this.checkLVal(i),this.next(),i=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(G.starstar)?this.buildBinary(r,s,i,this.parseMaybeUnary(null,!1),"**",!1):i},gt.parseExprSubscripts=function(t){var e=this.start,i=this.startLoc,r=this.parseExprAtom(t),s="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||s)return r;var n=this.parseSubscripts(r,e,i);return t&&"MemberExpression"===n.type&&(t.parenthesizedAssign>=n.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=n.start&&(t.parenthesizedBind=-1)),n},gt.parseSubscripts=function(t,e,i,r){for(var s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var n=this.parseSubscript(t,e,i,r,s);if(n===t||"ArrowFunctionExpression"===n.type)return n;t=n}},gt.parseSubscript=function(t,e,i,r,s){var n=this.eat(G.bracketL);if(n||this.eat(G.dot)){var a=this.startNodeAt(e,i);a.object=t,a.property=n?this.parseExpression():this.parseIdent(!0),a.computed=!!n,n&&this.expect(G.bracketR),t=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(G.parenL)){var o=new ht,h=this.yieldPos,l=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var u=this.parseExprList(G.parenR,this.options.ecmaVersion>=8,!1,o);if(s&&!this.canInsertSemicolon()&&this.eat(G.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=h,this.awaitPos=l,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,i),u,!0);this.checkExpressionErrors(o,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var d=this.startNodeAt(e,i);d.callee=t,d.arguments=u,t=this.finishNode(d,"CallExpression")}else if(this.type===G.backQuote){var p=this.startNodeAt(e,i);p.tag=t,p.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(p,"TaggedTemplateExpression")}return t},gt.parseExprAtom=function(t){this.type===G.slash&&this.readRegexp();var e,i=this.potentialArrowAt===this.start;switch(this.type){case G._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==G.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==G.dot&&this.type!==G.bracketL&&this.type!==G.parenL&&this.unexpected(),this.finishNode(e,"Super");case G._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case G.name:var r=this.start,s=this.startLoc,n=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!n&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(G._function))return this.parseFunction(this.startNodeAt(r,s),0,!1,!0);if(i&&!this.canInsertSemicolon()){if(this.eat(G.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===G.name&&!n)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(G.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[a],!0)}return a;case G.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case G.num:case G.string:return this.parseLiteral(this.value);case G._null:case G._true:case G._false:return(e=this.startNode()).value=this.type===G._null?null:this.type===G._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case G.parenL:var h=this.start,l=this.parseParenAndDistinguishExpression(i);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(t.parenthesizedAssign=h),t.parenthesizedBind<0&&(t.parenthesizedBind=h)),l;case G.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(G.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case G.braceL:return this.parseObj(!1,t);case G._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case G._class:return this.parseClass(this.startNode(),!1);case G._new:return this.parseNew();case G.backQuote:return this.parseTemplate();default:this.unexpected()}},gt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},gt.parseParenExpression=function(){this.expect(G.parenL);var t=this.parseExpression();return this.expect(G.parenR),t},gt.parseParenAndDistinguishExpression=function(t){var e,i=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var n,a=this.start,o=this.startLoc,h=[],l=!0,c=!1,u=new ht,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==G.parenR;){if(l?l=!1:this.expect(G.comma),s&&this.afterTrailingComma(G.parenR,!0)){c=!0;break}if(this.type===G.ellipsis){n=this.start,h.push(this.parseParenItem(this.parseRestBinding())),this.type===G.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}h.push(this.parseMaybeAssign(!1,u,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(G.parenR),t&&!this.canInsertSemicolon()&&this.eat(G.arrow))return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(i,r,h);h.length&&!c||this.unexpected(this.lastTokStart),n&&this.unexpected(n),this.checkExpressionErrors(u,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,h.length>1?((e=this.startNodeAt(a,o)).expressions=h,this.finishNodeAt(e,"SequenceExpression",f,m)):e=h[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(i,r);return g.expression=e,this.finishNode(g,"ParenthesizedExpression")}return e},gt.parseParenItem=function(t){return t},gt.parseParenArrowList=function(t,e,i){return this.parseArrowExpression(this.startNodeAt(t,e),i)};var yt=[];gt.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(G.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||i)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,s=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,s,!0),t.arguments=this.eat(G.parenL)?this.parseExprList(G.parenR,this.options.ecmaVersion>=8,!1):yt,this.finishNode(t,"NewExpression")},gt.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===G.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===G.backQuote,this.finishNode(i,"TemplateElement")},gt.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(i.quasis=[r];!r.tail;)this.type===G.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(G.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(G.braceR),i.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")},gt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===G.name||this.type===G.num||this.type===G.string||this.type===G.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===G.star)&&!V.test(this.input.slice(this.lastTokEnd,this.start))},gt.parseObj=function(t,e){var i=this.startNode(),r=!0,s={};for(i.properties=[],this.next();!this.eat(G.braceR);){if(r)r=!1;else if(this.expect(G.comma),this.afterTrailingComma(G.braceR))break;var n=this.parseProperty(t,e);t||this.checkPropClash(n,s,e),i.properties.push(n)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},gt.parseProperty=function(t,e){var i,r,s,n,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(G.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===G.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===G.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,e),this.type===G.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(s=this.start,n=this.startLoc),t||(i=this.eat(G.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(a)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(G.star),this.parsePropertyName(a,e)):r=!1,this.parsePropertyValue(a,t,i,r,s,n,e,o),this.finishNode(a,"Property")},gt.parsePropertyValue=function(t,e,i,r,s,n,a,o){(i||r)&&this.type===G.colon&&this.unexpected(),this.eat(G.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):this.options.ecmaVersion>=6&&this.type===G.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,r)):e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===G.comma||this.type===G.braceR?this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((i||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=s),t.kind="init",e?t.value=this.parseMaybeDefault(s,n,t.key):this.type===G.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(s,n,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected():((i||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1),t.value.params.length!==("get"===t.kind?0:1)?this.raiseRecoverable(t.value.start,"get"===t.kind?"getter should have no params":"setter should have exactly one param"):"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params"))},gt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(G.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(G.bracketR),t.key;t.computed=!1}return t.key=this.type===G.num||this.type===G.string?this.parseExprAtom():this.parseIdent(!0)},gt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},gt.parseMethod=function(t,e,i){var r=this.startNode(),s=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|rt(e,r.generator)|(i?128:0)),this.expect(G.parenL),r.params=this.parseBindingList(G.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=s,this.awaitPos=n,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},gt.parseArrowExpression=function(t,e,i){var r=this.yieldPos,s=this.awaitPos,n=this.awaitIdentPos;return this.enterScope(16|rt(i,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=n,this.finishNode(t,"ArrowFunctionExpression")},gt.parseFunctionBody=function(t,e,i){var r=this.strict,s=!1;if(e&&this.type!==G.braceL)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var n=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);r&&!n||(s=this.strictDirective(this.end))&&n&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(t,!r&&!s&&!e&&!i&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=a}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=r},gt.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1)if("Identifier"!==i[e].type)return!1;return!0},gt.checkParams=function(t,e){for(var i={},r=0,s=t.params;r<s.length;r+=1)this.checkLVal(s[r],1,e?null:i)},gt.parseExprList=function(t,e,i,r){for(var s=[],n=!0;!this.eat(t);){if(n)n=!1;else if(this.expect(G.comma),e&&this.afterTrailingComma(t))break;var a=void 0;i&&this.type===G.comma?a=null:this.type===G.ellipsis?(a=this.parseSpread(r),r&&this.type===G.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),s.push(a)}return s},gt.checkUnreserved=function(t){var e=t.start,i=t.end,r=t.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,i).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},gt.parseIdent=function(t,e){var i=this.startNode();return t&&"never"===this.options.allowReserved&&(t=!1),this.type===G.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,"class"!==i.name&&"function"!==i.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(i,"Identifier"),t||(this.checkUnreserved(i),"await"!==i.name||this.awaitIdentPos||(this.awaitIdentPos=i.start)),i},gt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===G.semi||this.canInsertSemicolon()||this.type!==G.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(G.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},gt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var vt=st.prototype;vt.raise=function(t,e){var i=et(this.input,t),r=new SyntaxError(e+=" ("+i.line+":"+i.column+")");throw r.pos=t,r.loc=i,r.raisedAt=this.pos,r},vt.raiseRecoverable=vt.raise,vt.curPosition=function(){if(this.options.locations)return new J(this.curLine,this.pos-this.lineStart)};var _t=st.prototype,xt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};_t.enterScope=function(t){this.scopeStack.push(new xt(t))},_t.exitScope=function(){this.scopeStack.pop()},_t.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},_t.declareName=function(t,e,i){var r=!1;if(2===e){var s=this.currentScope();r=s.lexical.indexOf(t)>-1||s.functions.indexOf(t)>-1||s.var.indexOf(t)>-1,s.lexical.push(t),this.inModule&&1&s.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var n=this.currentScope();r=this.treatFunctionsAsVar?n.lexical.indexOf(t)>-1:n.lexical.indexOf(t)>-1||n.var.indexOf(t)>-1,n.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){r=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],3&o.flags)break}r&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")},_t.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},_t.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},_t.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},_t.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var bt=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new tt(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},Et=st.prototype;function Tt(t,e,i,r){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=i),t}Et.startNode=function(){return new bt(this,this.start,this.startLoc)},Et.startNodeAt=function(t,e){return new bt(this,t,e)},Et.finishNode=function(t,e){return Tt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},Et.finishNodeAt=function(t,e,i,r){return Tt.call(this,t,e,i,r)};var wt=function(t,e,i,r,s){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=r,this.generator=!!s},St={b_stat:new wt("{",!1),b_expr:new wt("{",!0),b_tmpl:new wt("${",!1),p_stat:new wt("(",!1),p_expr:new wt("(",!0),q_tmpl:new wt("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new wt("function",!1),f_expr:new wt("function",!0),f_expr_gen:new wt("function",!0,!1,null,!0),f_gen:new wt("function",!1,!1,null,!0)},At=st.prototype;At.initialContext=function(){return[St.b_stat]},At.braceIsBlock=function(t){var e=this.curContext();return e===St.f_expr||e===St.f_stat||(t!==G.colon||e!==St.b_stat&&e!==St.b_expr?t===G._return||t===G.name&&this.exprAllowed?V.test(this.input.slice(this.lastTokEnd,this.start)):t===G._else||t===G.semi||t===G.eof||t===G.parenR||t===G.arrow||(t===G.braceL?e===St.b_stat:t!==G._var&&t!==G._const&&t!==G.name&&!this.exprAllowed):!e.isExpr)},At.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},At.updateContext=function(t){var e,i=this.type;i.keyword&&t===G.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},G.parenR.updateContext=G.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===St.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},G.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?St.b_stat:St.b_expr),this.exprAllowed=!0},G.dollarBraceL.updateContext=function(){this.context.push(St.b_tmpl),this.exprAllowed=!0},G.parenL.updateContext=function(t){this.context.push(t===G._if||t===G._for||t===G._with||t===G._while?St.p_stat:St.p_expr),this.exprAllowed=!0},G.incDec.updateContext=function(){},G._function.updateContext=G._class.updateContext=function(t){!t.beforeExpr||t===G.semi||t===G._else||t===G._return&&V.test(this.input.slice(this.lastTokEnd,this.start))||(t===G.colon||t===G.braceL)&&this.curContext()===St.b_stat?this.context.push(St.f_stat):this.context.push(St.f_expr),this.exprAllowed=!1},G.backQuote.updateContext=function(){this.curContext()===St.q_tmpl?this.context.pop():this.context.push(St.q_tmpl),this.exprAllowed=!1},G.star.updateContext=function(t){if(t===G._function){var e=this.context.length-1;this.context[e]=this.context[e]===St.f_expr?St.f_expr_gen:St.f_gen}this.exprAllowed=!0},G.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==G.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Ct="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",It={9:Ct,10:Ct+" Extended_Pictographic"},Rt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Pt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",kt={9:Pt,10:Pt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd"},Mt={};function Nt(t){var e=Mt[t]={binary:Q(It[t]+" "+Rt),nonBinary:{General_Category:Q(Rt),Script:Q(kt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}Nt(9),Nt(10);var Ot=st.prototype,Dt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Mt[t.options.ecmaVersion>=10?10:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Lt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Bt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Ft(t){return t>=65&&t<=90||t>=97&&t<=122}function Ut(t){return Ft(t)||95===t}function jt(t){return Ut(t)||Gt(t)}function Gt(t){return t>=48&&t<=57}function Vt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Ht(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function zt(t){return t>=48&&t<=55}Dt.prototype.reset=function(t,e,i){var r=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},Dt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Dt.prototype.at=function(t){var e=this.source,i=e.length;if(t>=i)return-1;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=i?r:(r<<10)+e.charCodeAt(t+1)-56613888},Dt.prototype.nextIndex=function(t){var e=this.source,i=e.length;if(t>=i)return i;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=i?t+1:t+2},Dt.prototype.current=function(){return this.at(this.pos)},Dt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Dt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Dt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},Ot.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,r=0;r<i.length;r++){var s=i.charAt(r);-1===e.indexOf(s)&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(s,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Ot.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Ot.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1)-1===t.groupNames.indexOf(i[e])&&t.raise("Invalid named capture referenced")},Ot.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Ot.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Ot.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Ot.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},Ot.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Ot.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Ot.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var r=0,s=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(s=t.lastIntValue),t.eat(125)))return-1!==s&&s<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},Ot.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Ot.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Ot.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Ot.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Ot.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Ot.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Ot.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Bt(e)&&(t.lastIntValue=e,t.advance(),!0)},Ot.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;-1!==(i=t.current())&&!Bt(i);)t.advance();return t.pos!==e},Ot.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},Ot.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Ot.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Ot.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Lt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Lt(t.lastIntValue);return!0}return!1},Ot.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),function(t){return N(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Ot.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),function(t){return O(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Ot.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Ot.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},Ot.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Ot.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Ot.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Ot.regexp_eatZero=function(t){return 48===t.current()&&!Gt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Ot.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Ot.regexp_eatControlLetter=function(t){var e=t.current();return!!Ft(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Ot.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,i=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(t.switchU&&r>=55296&&r<=56319){var s=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var n=t.lastIntValue;if(n>=56320&&n<=57343)return t.lastIntValue=1024*(r-55296)+(n-56320)+65536,!0}t.pos=s,t.lastIntValue=r}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&(e=t.lastIntValue)>=0&&e<=1114111)return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=i}return!1},Ot.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},Ot.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Ot.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Ot.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t))return this.regexp_validateUnicodePropertyNameAndValue(t,i,t.lastStringValue),!0}return t.pos=e,!!this.regexp_eatLoneUnicodePropertyNameOrValue(t)&&(this.regexp_validateUnicodePropertyNameOrValue(t,t.lastStringValue),!0)},Ot.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){Z(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")},Ot.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Ot.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Ut(e=t.current());)t.lastStringValue+=Lt(e),t.advance();return""!==t.lastStringValue},Ot.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";jt(e=t.current());)t.lastStringValue+=Lt(e),t.advance();return""!==t.lastStringValue},Ot.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Ot.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Ot.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==e&&-1!==i||t.raise("Invalid character class"),-1!==e&&-1!==i&&e>i&&t.raise("Range out of order in character class")}}},Ot.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||zt(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},Ot.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Ot.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Gt(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},Ot.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Ot.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;Gt(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},Ot.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;Vt(i=t.current());)t.lastIntValue=16*t.lastIntValue+Ht(i),t.advance();return t.pos!==e},Ot.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;t.lastIntValue=e<=3&&this.regexp_eatOctalDigit(t)?64*e+8*i+t.lastIntValue:8*e+i}else t.lastIntValue=e;return!0}return!1},Ot.regexp_eatOctalDigit=function(t){var e=t.current();return zt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Ot.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var s=t.current();if(!Vt(s))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+Ht(s),t.advance()}return!0};var Xt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new tt(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Wt=st.prototype;function $t(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Wt.next=function(){this.options.onToken&&this.options.onToken(new Xt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Wt.getToken=function(){return this.next(),new Xt(this)},"undefined"!=typeof Symbol&&(Wt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===G.eof,value:e}}}}),Wt.curContext=function(){return this.context[this.context.length-1]},Wt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(G.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Wt.readToken=function(t){return N(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Wt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Wt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),i=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(H.lastIndex=i;(t=H.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(i+2,r),i,this.pos,e,this.curPosition())},Wt.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!z(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())},Wt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&X.test(String.fromCharCode(t))))break t;++this.pos}}},Wt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},Wt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(G.ellipsis)):(++this.pos,this.finishToken(G.dot))},Wt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(G.assign,2):this.finishOp(G.slash,1)},Wt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,r=42===t?G.star:G.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++i,r=G.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(G.assign,i+1):this.finishOp(r,i)},Wt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?G.logicalOR:G.logicalAND,2):61===e?this.finishOp(G.assign,2):this.finishOp(124===t?G.bitwiseOR:G.bitwiseAND,1)},Wt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(G.assign,2):this.finishOp(G.bitwiseXOR,1)},Wt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!V.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(G.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(G.assign,2):this.finishOp(G.plusMin,1)},Wt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(G.assign,i+1):this.finishOp(G.bitShift,i)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(G.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Wt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(G.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(G.arrow)):this.finishOp(61===t?G.eq:G.prefix,1)},Wt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(G.parenL);case 41:return++this.pos,this.finishToken(G.parenR);case 59:return++this.pos,this.finishToken(G.semi);case 44:return++this.pos,this.finishToken(G.comma);case 91:return++this.pos,this.finishToken(G.bracketL);case 93:return++this.pos,this.finishToken(G.bracketR);case 123:return++this.pos,this.finishToken(G.braceL);case 125:return++this.pos,this.finishToken(G.braceR);case 58:return++this.pos,this.finishToken(G.colon);case 63:return++this.pos,this.finishToken(G.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(G.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(G.prefix,1)}this.raise(this.pos,"Unexpected character '"+$t(t)+"'")},Wt.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},Wt.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(V.test(r)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var s=this.input.slice(i,this.pos);++this.pos;var n=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(n);var o=this.regexpState||(this.regexpState=new Dt(this));o.reset(i,s,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var h=null;try{h=new RegExp(s,a)}catch(t){}return this.finishToken(G.regexp,{pattern:s,flags:a,value:h})},Wt.readInt=function(t,e){for(var i=this.pos,r=0,s=0,n=null==e?1/0:e;s<n;++s){var a,o=this.input.charCodeAt(this.pos);if((a=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++this.pos,r=r*t+a}return this.pos===i||null!=e&&this.pos-i!==e?null:r},Wt.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),N(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(G.num,e)},Wt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var i=this.pos-e>=2&&48===this.input.charCodeAt(e);i&&this.strict&&this.raise(e,"Invalid number"),i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1);var r=this.input.charCodeAt(this.pos);46!==r||i||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||i||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),N(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=this.input.slice(e,this.pos),n=i?parseInt(s,8):parseFloat(s);return this.finishToken(G.num,n)},Wt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Wt.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):(z(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(G.string,e)};var Yt={};Wt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(E){if(E!==Yt)throw E;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Wt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Yt;this.raise(t,e)},Wt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==G.template&&this.type!==G.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(G.template,t)):36===i?(this.pos+=2,this.finishToken(G.dollarBraceL)):(++this.pos,this.finishToken(G.backQuote));if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(z(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Wt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(G.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Wt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return $t(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return z(e)?"":String.fromCharCode(e)}},Wt.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},Wt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(O(s,r))this.pos+=s<=65535?1:2;else{if(92!==s)break;this.containsEsc=!0,t+=this.input.slice(i,this.pos);var n=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?N:O)(a,r)||this.invalidStringToken(n,"Invalid Unicode escape"),t+=$t(a),i=this.pos}e=!1}return t+this.input.slice(i,this.pos)},Wt.readWord=function(){var t=this.readWord1(),e=G.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=U[t]),this.finishToken(e,t)};var qt={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",frasl:"\u2044",euro:"\u20ac",image:"\u2111",weierp:"\u2118",real:"\u211c",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lArr:"\u21d0",uArr:"\u21d1",rArr:"\u21d2",dArr:"\u21d3",hArr:"\u21d4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",lang:"\u2329",rang:"\u232a",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"},Zt={version:"6.1.1",parse:function(t,e){return st.parse(t,e)},parseExpressionAt:function(t,e,i){return st.parseExpressionAt(t,e,i)},tokenizer:function(t,e){return st.tokenizer(t,e)},Parser:st,defaultOptions:it,Position:J,SourceLocation:tt,getLineInfo:et,Node:bt,TokenType:D,tokTypes:G,keywordTypes:U,TokContext:wt,tokContexts:St,isIdentifierChar:O,isIdentifierStart:N,Token:Xt,isNewLine:z,lineBreak:V,lineBreakG:H,nonASCIIwhitespace:X};const Kt=/^[\da-fA-F]+$/,Qt=/^\d+$/,Jt=Zt.tokTypes,te=Zt.TokContext,ee=Zt.tokContexts,ie=Zt.TokenType,re=Zt.isNewLine,se=Zt.isIdentifierStart,ne=Zt.isIdentifierChar,ae=new te("<tag",!1),oe=new te("</tag",!1),he=new te("<tag>...</tag>",!0,!0),le={jsxName:new ie("jsxName"),jsxText:new ie("jsxText",{beforeExpr:!0}),jsxTagStart:new ie("jsxTagStart"),jsxTagEnd:new ie("jsxTagEnd")};function ce(t){return t?"JSXIdentifier"===t.type?t.name:"JSXNamespacedName"===t.type?t.namespace.name+":"+t.name.name:"JSXMemberExpression"===t.type?ce(t.object)+"."+ce(t.property):void 0:t}le.jsxTagStart.updateContext=function(){this.context.push(he),this.context.push(ae),this.exprAllowed=!1},le.jsxTagEnd.updateContext=function(t){let e=this.context.pop();e===ae&&t===Jt.slash||e===oe?(this.context.pop(),this.exprAllowed=this.curContext()===he):this.exprAllowed=!0};var ue=function(t){return t=t||{},function(e){return function(t,e){return class extends e{jsx_readToken(){let t="",e=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");let i=this.input.charCodeAt(this.pos);switch(i){case 60:case 123:return this.pos===this.start?60===i&&this.exprAllowed?(++this.pos,this.finishToken(le.jsxTagStart)):this.getTokenFromCode(i):(t+=this.input.slice(e,this.pos),this.finishToken(le.jsxText,t));case 38:t+=this.input.slice(e,this.pos),t+=this.jsx_readEntity(),e=this.pos;break;default:re(i)?(t+=this.input.slice(e,this.pos),t+=this.jsx_readNewLine(!0),e=this.pos):++this.pos}}}jsx_readNewLine(t){let e,i=this.input.charCodeAt(this.pos);return++this.pos,13===i&&10===this.input.charCodeAt(this.pos)?(++this.pos,e=t?"\n":"\r\n"):e=String.fromCharCode(i),this.options.locations&&(++this.curLine,this.lineStart=this.pos),e}jsx_readString(t){let e="",i=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let r=this.input.charCodeAt(this.pos);if(r===t)break;38===r?(e+=this.input.slice(i,this.pos),e+=this.jsx_readEntity(),i=this.pos):re(r)?(e+=this.input.slice(i,this.pos),e+=this.jsx_readNewLine(!1),i=this.pos):++this.pos}return e+=this.input.slice(i,this.pos++),this.finishToken(Jt.string,e)}jsx_readEntity(){let t,e="",i=0,r=this.input[this.pos];"&"!==r&&this.raise(this.pos,"Entity must start with an ampersand");let s=++this.pos;for(;this.pos<this.input.length&&i++<10;){if(";"===(r=this.input[this.pos++])){"#"===e[0]?"x"===e[1]?(e=e.substr(2),Kt.test(e)&&(t=String.fromCharCode(parseInt(e,16)))):(e=e.substr(1),Qt.test(e)&&(t=String.fromCharCode(parseInt(e,10)))):t=qt[e];break}e+=r}return t||(this.pos=s,"&")}jsx_readWord(){let t,e=this.pos;do{t=this.input.charCodeAt(++this.pos)}while(ne(t)||45===t);return this.finishToken(le.jsxName,this.input.slice(e,this.pos))}jsx_parseIdentifier(){let t=this.startNode();return this.type===le.jsxName?t.name=this.value:this.type.keyword?t.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(t,"JSXIdentifier")}jsx_parseNamespacedName(){let e=this.start,i=this.startLoc,r=this.jsx_parseIdentifier();if(!t.allowNamespaces||!this.eat(Jt.colon))return r;var s=this.startNodeAt(e,i);return s.namespace=r,s.name=this.jsx_parseIdentifier(),this.finishNode(s,"JSXNamespacedName")}jsx_parseElementName(){if(this.type===le.jsxTagEnd)return"";let e=this.start,i=this.startLoc,r=this.jsx_parseNamespacedName();for(this.type!==Jt.dot||"JSXNamespacedName"!==r.type||t.allowNamespacedObjects||this.unexpected();this.eat(Jt.dot);){let t=this.startNodeAt(e,i);t.object=r,t.property=this.jsx_parseIdentifier(),r=this.finishNode(t,"JSXMemberExpression")}return r}jsx_parseAttributeValue(){switch(this.type){case Jt.braceL:let t=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===t.expression.type&&this.raise(t.start,"JSX attributes must only be assigned a non-empty expression"),t;case le.jsxTagStart:case Jt.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){let t=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(t,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){let t=this.startNode();return this.next(),t.expression=this.type===Jt.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(Jt.braceR),this.finishNode(t,"JSXExpressionContainer")}jsx_parseAttribute(){let t=this.startNode();return this.eat(Jt.braceL)?(this.expect(Jt.ellipsis),t.argument=this.parseMaybeAssign(),this.expect(Jt.braceR),this.finishNode(t,"JSXSpreadAttribute")):(t.name=this.jsx_parseNamespacedName(),t.value=this.eat(Jt.eq)?this.jsx_parseAttributeValue():null,this.finishNode(t,"JSXAttribute"))}jsx_parseOpeningElementAt(t,e){let i=this.startNodeAt(t,e);i.attributes=[];let r=this.jsx_parseElementName();for(r&&(i.name=r);this.type!==Jt.slash&&this.type!==le.jsxTagEnd;)i.attributes.push(this.jsx_parseAttribute());return i.selfClosing=this.eat(Jt.slash),this.expect(le.jsxTagEnd),this.finishNode(i,r?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(t,e){let i=this.startNodeAt(t,e),r=this.jsx_parseElementName();return r&&(i.name=r),this.expect(le.jsxTagEnd),this.finishNode(i,r?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(t,e){let i=this.startNodeAt(t,e),r=[],s=this.jsx_parseOpeningElementAt(t,e),n=null;if(!s.selfClosing){t:for(;;)switch(this.type){case le.jsxTagStart:if(t=this.start,e=this.startLoc,this.next(),this.eat(Jt.slash)){n=this.jsx_parseClosingElementAt(t,e);break t}r.push(this.jsx_parseElementAt(t,e));break;case le.jsxText:r.push(this.parseExprAtom());break;case Jt.braceL:r.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}ce(n.name)!==ce(s.name)&&this.raise(n.start,"Expected corresponding JSX closing tag for <"+ce(s.name)+">")}let a=s.name?"Element":"Fragment";return i["opening"+a]=s,i["closing"+a]=n,i.children=r,this.type===Jt.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(i,"JSX"+a)}jsx_parseText(t){let e=this.parseLiteral(t);return e.type="JSXText",e}jsx_parseElement(){let t=this.start,e=this.startLoc;return this.next(),this.jsx_parseElementAt(t,e)}parseExprAtom(t){return this.type===le.jsxText?this.jsx_parseText(this.value):this.type===le.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(t)}readToken(t){let e=this.curContext();if(e===he)return this.jsx_readToken();if(e===ae||e===oe){if(se(t))return this.jsx_readWord();if(62==t)return++this.pos,this.finishToken(le.jsxTagEnd);if((34===t||39===t)&&e==ae)return this.jsx_readString(t)}return 60===t&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(le.jsxTagStart)):super.readToken(t)}updateContext(t){if(this.type==Jt.braceL){var e=this.curContext();e==ae?this.context.push(ee.b_expr):e==he?this.context.push(ee.b_tmpl):super.updateContext(t),this.exprAllowed=!0}else{if(this.type!==Jt.slash||t!==le.jsxTagStart)return super.updateContext(t);this.context.length-=2,this.context.push(oe),this.exprAllowed=!1}}}}({allowNamespaces:!1!==t.allowNamespaces,allowNamespacedObjects:!!t.allowNamespacedObjects},e)}};ue.tokTypes=le;var de,pe,fe=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicImportKey=void 0;var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),r=function t(e,i,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,i,r)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(r):void 0};e.default=function(t){return function(e){function n(){return function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,t),i(n,[{key:"parseStatement",value:function(t,e,i){return this.type===Zt.tokTypes._import&&function(){return/^(\s|\/\/.*|\/\*[^]*?\*\/)*\(/.test(this.input.slice(this.pos))}.call(this)?this.parseExpressionStatement(this.startNode(),this.parseExpression()):r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"parseStatement",this).call(this,t,e,i)}},{key:"parseExprAtom",value:function(t){return this.type===Zt.tokTypes._import?function(){var t=this.startNode();return this.next(),this.type!==Zt.tokTypes.parenL&&this.unexpected(),this.finishNode(t,s)}.call(this):r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"parseExprAtom",this).call(this,t)}}]),n}()};var s=e.DynamicImportKey="Import";Zt.tokTypes._import.startsExpr=!0}(de={exports:{}},de.exports),(pe=de.exports)&&pe.__esModule&&Object.prototype.hasOwnProperty.call(pe,"default")?pe.default:pe);const me=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ge=Zt.tokTypes;function ye(t){if(this.eat(ge.eq)){const e=this._inFieldValue;this._inFieldValue=!0,t.value=this.parseExpression(),this._inFieldValue=e}else t.value=null}function ve(){const t=this.startNode();return t.name=this.value,this.next(),this.finishNode(t,"PrivateName"),"never"==this.options.allowReserved&&this.checkUnreserved(t),t}const _e=new(0,Zt.TokenType)("privateName");function xe(t){var e="";t=t<0?-t<<1|1:t<<1;do{var i=31&t;(t>>=5)>0&&(i|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[i]}while(t>0);return e}var be=function(t,e,i){this.start=t,this.end=e,this.original=i,this.intro="",this.outro="",this.content=i,this.storeName=!1,this.edited=!1,Object.defineProperties(this,{previous:{writable:!0,value:null},next:{writable:!0,value:null}})};be.prototype.appendLeft=function(t){this.outro+=t},be.prototype.appendRight=function(t){this.intro=this.intro+t},be.prototype.clone=function(){var t=new be(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t},be.prototype.contains=function(t){return this.start<t&&t<this.end},be.prototype.eachNext=function(t){for(var e=this;e;)t(e),e=e.next},be.prototype.eachPrevious=function(t){for(var e=this;e;)t(e),e=e.previous},be.prototype.edit=function(t,e,i){return this.content=t,i||(this.intro="",this.outro=""),this.storeName=e,this.edited=!0,this},be.prototype.prependLeft=function(t){this.outro=t+this.outro},be.prototype.prependRight=function(t){this.intro=t+this.intro},be.prototype.split=function(t){var e=t-this.start,i=this.original.slice(0,e),r=this.original.slice(e);this.original=i;var s=new be(t,this.end,r);return s.outro=this.outro,this.outro="",this.end=t,this.edited?(s.edit("",!1),this.content=""):this.content=i,s.next=this.next,s.next&&(s.next.previous=s),s.previous=this,this.next=s,s},be.prototype.toString=function(){return this.intro+this.content+this.outro},be.prototype.trimEnd=function(t){if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;var e=this.content.replace(t,"");return e.length?(e!==this.content&&this.split(this.start+e.length).edit("",void 0,!0),!0):(this.edit("",void 0,!0),this.intro=this.intro.replace(t,""),!!this.intro.length||void 0)},be.prototype.trimStart=function(t){if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;var e=this.content.replace(t,"");return e.length?(e!==this.content&&(this.split(this.end-e.length),this.edit("",void 0,!0)),!0):(this.edit("",void 0,!0),this.outro=this.outro.replace(t,""),!!this.outro.length||void 0)};var Ee=function(){throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};"undefined"!=typeof window&&"function"==typeof window.btoa?Ee=function(t){return window.btoa(unescape(encodeURIComponent(t)))}:"function"==typeof Buffer&&(Ee=function(t){return Buffer.from(t,"utf-8").toString("base64")});var Te=function(t){this.version=3,this.file=t.file,this.sources=t.sources,this.sourcesContent=t.sourcesContent,this.names=t.names,this.mappings=function(t){for(var e=0,i=0,r=0,s=0,n="",a=0;a<t.length;a++){var o=t[a];if(a>0&&(n+=";"),0!==o.length){for(var h=0,l=[],c=0,u=o;c<u.length;c++){var d=u[c],p=xe(d[0]-h);h=d[0],d.length>1&&(p+=xe(d[1]-e)+xe(d[2]-i)+xe(d[3]-r),e=d[1],i=d[2],r=d[3]),5===d.length&&(p+=xe(d[4]-s),s=d[4]),l.push(p)}n+=l.join(",")}}return n}(t.mappings)};function we(t){var e=t.split("\n"),i=e.filter((function(t){return/^\t+/.test(t)})),r=e.filter((function(t){return/^ {2,}/.test(t)}));if(0===i.length&&0===r.length)return null;if(i.length>=r.length)return"\t";var s=r.reduce((function(t,e){var i=/^ +/.exec(e)[0].length;return Math.min(i,t)}),1/0);return new Array(s+1).join(" ")}function Se(t,e){var i=t.split(/[\/\\]/),r=e.split(/[\/\\]/);for(i.pop();i[0]===r[0];)i.shift(),r.shift();if(i.length)for(var s=i.length;s--;)i[s]="..";return i.concat(r).join("/")}Te.prototype.toString=function(){return JSON.stringify(this)},Te.prototype.toUrl=function(){return"data:application/json;charset=utf-8;base64,"+Ee(this.toString())};var Ae=Object.prototype.toString;function Ce(t){for(var e=t.split("\n"),i=[],r=0,s=0;r<e.length;r++)i.push(s),s+=e[r].length+1;return function(t){for(var e=0,r=i.length;e<r;){var s=e+r>>1;t<i[s]?r=s:e=s+1}var n=e-1;return{line:n,column:t-i[n]}}}var Ie=function(t){this.hires=t,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null};Ie.prototype.addEdit=function(t,e,i,r){if(e.length){var s=[this.generatedCodeColumn,t,i.line,i.column];r>=0&&s.push(r),this.rawSegments.push(s)}else this.pending&&this.rawSegments.push(this.pending);this.advance(e),this.pending=null},Ie.prototype.addUneditedChunk=function(t,e,i,r,s){for(var n=e.start,a=!0;n<e.end;)(this.hires||a||s[n])&&this.rawSegments.push([this.generatedCodeColumn,t,r.line,r.column]),"\n"===i[n]?(r.line+=1,r.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0):(r.column+=1,this.generatedCodeColumn+=1),n+=1,a=!1;this.pending=[this.generatedCodeColumn,t,r.line,r.column]},Ie.prototype.advance=function(t){if(t){var e=t.split("\n");if(e.length>1){for(var i=0;i<e.length-1;i++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=e[e.length-1].length}};var Re="\n",Pe={insertLeft:!1,insertRight:!1,storeName:!1},ke=function(t,e){void 0===e&&(e={});var i=new be(0,t.length,t);Object.defineProperties(this,{original:{writable:!0,value:t},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:i},lastChunk:{writable:!0,value:i},lastSearchedChunk:{writable:!0,value:i},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:e.filename},indentExclusionRanges:{writable:!0,value:e.indentExclusionRanges},sourcemapLocations:{writable:!0,value:{}},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:we(t)}}),this.byStart[0]=i,this.byEnd[t.length]=i};function Me(t){var e={};return Object.keys(t).forEach((function(i){"parent"!==i&&"program"!==i&&"keys"!==i&&"__wrapped"!==i&&(e[i]=Array.isArray(t[i])?t[i].map(Me):t[i]&&t[i].toJSON?t[i].toJSON():t[i])})),e}ke.prototype.addSourcemapLocation=function(t){this.sourcemapLocations[t]=!0},ke.prototype.append=function(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.outro+=t,this},ke.prototype.appendLeft=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var i=this.byEnd[t];return i?i.appendLeft(e):this.intro+=e,this},ke.prototype.appendRight=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var i=this.byStart[t];return i?i.appendRight(e):this.outro+=e,this},ke.prototype.clone=function(){for(var t=new ke(this.original,{filename:this.filename}),e=this.firstChunk,i=t.firstChunk=t.lastSearchedChunk=e.clone();e;){t.byStart[i.start]=i,t.byEnd[i.end]=i;var r=e.next,s=r&&r.clone();s&&(i.next=s,s.previous=i,i=s),e=r}return t.lastChunk=i,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),Object.keys(this.sourcemapLocations).forEach((function(e){t.sourcemapLocations[e]=!0})),t},ke.prototype.generateDecodedMap=function(t){var e=this;t=t||{};var i=Object.keys(this.storedNames),r=new Ie(t.hires),s=Ce(this.original);return this.intro&&r.advance(this.intro),this.firstChunk.eachNext((function(t){var n=s(t.start);t.intro.length&&r.advance(t.intro),t.edited?r.addEdit(0,t.content,n,t.storeName?i.indexOf(t.original):-1):r.addUneditedChunk(0,t,e.original,n,e.sourcemapLocations),t.outro.length&&r.advance(t.outro)})),{file:t.file?t.file.split(/[\/\\]/).pop():null,sources:[t.source?Se(t.file||"",t.source):null],sourcesContent:t.includeContent?[this.original]:[null],names:i,mappings:r.raw}},ke.prototype.generateMap=function(t){return new Te(this.generateDecodedMap(t))},ke.prototype.getIndentString=function(){return null===this.indentStr?"\t":this.indentStr},ke.prototype.indent=function(t,e){var i=/^[^\r\n]/gm;if("[object Object]"===Ae.call(t)&&(e=t,t=void 0),""===(t=void 0!==t?t:this.indentStr||"\t"))return this;var r={};(e=e||{}).exclude&&("number"==typeof e.exclude[0]?[e.exclude]:e.exclude).forEach((function(t){for(var e=t[0];e<t[1];e+=1)r[e]=!0}));var s=!1!==e.indentStart,n=function(e){return s?""+t+e:(s=!0,e)};this.intro=this.intro.replace(i,n);for(var a=0,o=this.firstChunk;o;){var h=o.end;if(o.edited)r[a]||(o.content=o.content.replace(i,n),o.content.length&&(s="\n"===o.content[o.content.length-1]));else for(a=o.start;a<h;){if(!r[a]){var l=this.original[a];"\n"===l?s=!0:"\r"!==l&&s&&(s=!1,a===o.start?o.prependRight(t):(this._splitChunk(o,a),(o=o.next).prependRight(t)))}a+=1}a=o.end,o=o.next}return this.outro=this.outro.replace(i,n),this},ke.prototype.insert=function(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")},ke.prototype.insertLeft=function(t,e){return Pe.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),Pe.insertLeft=!0),this.appendLeft(t,e)},ke.prototype.insertRight=function(t,e){return Pe.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),Pe.insertRight=!0),this.prependRight(t,e)},ke.prototype.move=function(t,e,i){if(i>=t&&i<=e)throw new Error("Cannot move a selection inside itself");this._split(t),this._split(e),this._split(i);var r=this.byStart[t],s=this.byEnd[e],n=r.previous,a=s.next,o=this.byStart[i];if(!o&&s===this.lastChunk)return this;var h=o?o.previous:this.lastChunk;return n&&(n.next=a),a&&(a.previous=n),h&&(h.next=r),o&&(o.previous=s),r.previous||(this.firstChunk=s.next),s.next||(this.lastChunk=r.previous,this.lastChunk.next=null),r.previous=h,s.next=o||null,h||(this.firstChunk=r),o||(this.lastChunk=s),this},ke.prototype.overwrite=function(t,e,i,r){if("string"!=typeof i)throw new TypeError("replacement content must be a string");for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(e>this.original.length)throw new Error("end is out of bounds");if(t===e)throw new Error("Cannot overwrite a zero-length range \u2013 use appendLeft or prependRight instead");this._split(t),this._split(e),!0===r&&(Pe.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),Pe.storeName=!0),r={storeName:!0});var s=void 0!==r&&r.storeName,n=void 0!==r&&r.contentOnly;if(s){var a=this.original.slice(t,e);this.storedNames[a]=!0}var o=this.byStart[t],h=this.byEnd[e];if(o){if(e>o.end&&o.next!==this.byStart[o.end])throw new Error("Cannot overwrite across a split point");if(o.edit(i,s,n),o!==h){for(var l=o.next;l!==h;)l.edit("",!1),l=l.next;l.edit("",!1)}}else{var c=new be(t,e,"").edit(i,s);h.next=c,c.previous=h}return this},ke.prototype.prepend=function(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.intro=t+this.intro,this},ke.prototype.prependLeft=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var i=this.byEnd[t];return i?i.prependLeft(e):this.intro=e+this.intro,this},ke.prototype.prependRight=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var i=this.byStart[t];return i?i.prependRight(e):this.outro=e+this.outro,this},ke.prototype.remove=function(t,e){for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(t===e)return this;if(t<0||e>this.original.length)throw new Error("Character is out of bounds");if(t>e)throw new Error("end must be greater than start");this._split(t),this._split(e);for(var i=this.byStart[t];i;)i.intro="",i.outro="",i.edit(""),i=e>i.end?this.byStart[i.end]:null;return this},ke.prototype.lastChar=function(){if(this.outro.length)return this.outro[this.outro.length-1];var t=this.lastChunk;do{if(t.outro.length)return t.outro[t.outro.length-1];if(t.content.length)return t.content[t.content.length-1];if(t.intro.length)return t.intro[t.intro.length-1]}while(t=t.previous);return this.intro.length?this.intro[this.intro.length-1]:""},ke.prototype.lastLine=function(){var t=this.outro.lastIndexOf(Re);if(-1!==t)return this.outro.substr(t+1);var e=this.outro,i=this.lastChunk;do{if(i.outro.length>0){if(-1!==(t=i.outro.lastIndexOf(Re)))return i.outro.substr(t+1)+e;e=i.outro+e}if(i.content.length>0){if(-1!==(t=i.content.lastIndexOf(Re)))return i.content.substr(t+1)+e;e=i.content+e}if(i.intro.length>0){if(-1!==(t=i.intro.lastIndexOf(Re)))return i.intro.substr(t+1)+e;e=i.intro+e}}while(i=i.previous);return-1!==(t=this.intro.lastIndexOf(Re))?this.intro.substr(t+1)+e:this.intro+e},ke.prototype.slice=function(t,e){for(void 0===t&&(t=0),void 0===e&&(e=this.original.length);t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;for(var i="",r=this.firstChunk;r&&(r.start>t||r.end<=t);){if(r.start<e&&r.end>=e)return i;r=r.next}if(r&&r.edited&&r.start!==t)throw new Error("Cannot use replaced character "+t+" as slice start anchor.");for(var s=r;r;){!r.intro||s===r&&r.start!==t||(i+=r.intro);var n=r.start<e&&r.end>=e;if(n&&r.edited&&r.end!==e)throw new Error("Cannot use replaced character "+e+" as slice end anchor.");if(i+=r.content.slice(s===r?t-r.start:0,n?r.content.length+e-r.end:r.content.length),!r.outro||n&&r.end!==e||(i+=r.outro),n)break;r=r.next}return i},ke.prototype.snip=function(t,e){var i=this.clone();return i.remove(0,t),i.remove(e,i.original.length),i},ke.prototype._split=function(t){if(!this.byStart[t]&&!this.byEnd[t])for(var e=this.lastSearchedChunk,i=t>e.end;e;){if(e.contains(t))return this._splitChunk(e,t);e=i?this.byStart[e.end]:this.byEnd[e.start]}},ke.prototype._splitChunk=function(t,e){if(t.edited&&t.content.length){var i=Ce(this.original)(e);throw new Error("Cannot split a chunk that has already been edited ("+i.line+":"+i.column+' \u2013 "'+t.original+'")')}var r=t.split(e);return this.byEnd[e]=t,this.byStart[e]=r,this.byEnd[r.end]=r,t===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=t,!0},ke.prototype.toString=function(){for(var t=this.intro,e=this.firstChunk;e;)t+=e.toString(),e=e.next;return t+this.outro},ke.prototype.isEmpty=function(){var t=this.firstChunk;do{if(t.intro.length&&t.intro.trim()||t.content.length&&t.content.trim()||t.outro.length&&t.outro.trim())return!1}while(t=t.next);return!0},ke.prototype.length=function(){var t=this.firstChunk,e=0;do{e+=t.intro.length+t.content.length+t.outro.length}while(t=t.next);return e},ke.prototype.trimLines=function(){return this.trim("[\\r\\n]")},ke.prototype.trim=function(t){return this.trimStart(t).trimEnd(t)},ke.prototype.trimEndAborted=function(t){var e=new RegExp((t||"\\s")+"+$");if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;var i=this.lastChunk;do{var r=i.end,s=i.trimEnd(e);if(i.end!==r&&(this.lastChunk===i&&(this.lastChunk=i.next),this.byEnd[i.end]=i,this.byStart[i.next.start]=i.next,this.byEnd[i.next.end]=i.next),s)return!0;i=i.previous}while(i);return!1},ke.prototype.trimEnd=function(t){return this.trimEndAborted(t),this},ke.prototype.trimStartAborted=function(t){var e=new RegExp("^"+(t||"\\s")+"+");if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;var i=this.firstChunk;do{var r=i.end,s=i.trimStart(e);if(i.end!==r&&(i===this.lastChunk&&(this.lastChunk=i.next),this.byEnd[i.end]=i,this.byStart[i.next.start]=i.next,this.byEnd[i.next.end]=i.next),s)return!0;i=i.next}while(i);return!1},ke.prototype.trimStart=function(t){return this.trimStartAborted(t),this};var Ne=function(){};function Oe(t){var e=[];return De[t.type](e,t),e}Ne.prototype.ancestor=function(t){for(var e=this;t--;)if(!(e=e.parent))return null;return e},Ne.prototype.contains=function(t){for(;t;){if(t===this)return!0;t=t.parent}return!1},Ne.prototype.findLexicalBoundary=function(){return this.parent.findLexicalBoundary()},Ne.prototype.findNearest=function(t){return"string"==typeof t&&(t=new RegExp("^"+t+"$")),t.test(this.type)?this:this.parent.findNearest(t)},Ne.prototype.unparenthesizedParent=function(){for(var t=this.parent;t&&"ParenthesizedExpression"===t.type;)t=t.parent;return t},Ne.prototype.unparenthesize=function(){for(var t=this;"ParenthesizedExpression"===t.type;)t=t.expression;return t},Ne.prototype.findScope=function(t){return this.parent.findScope(t)},Ne.prototype.getIndentation=function(){return this.parent.getIndentation()},Ne.prototype.initialise=function(t){for(var e=0,i=this.keys;e<i.length;e+=1){var r=this[i[e]];Array.isArray(r)?r.forEach((function(e){return e&&e.initialise(t)})):r&&"object"==typeof r&&r.initialise(t)}},Ne.prototype.toJSON=function(){return Me(this)},Ne.prototype.toString=function(){return this.program.magicString.original.slice(this.start,this.end)},Ne.prototype.transpile=function(t,e){for(var i=0,r=this.keys;i<r.length;i+=1){var s=this[r[i]];Array.isArray(s)?s.forEach((function(i){return i&&i.transpile(t,e)})):s&&"object"==typeof s&&s.transpile(t,e)}};var De={Identifier:function(t,e){t.push(e)},ObjectPattern:function(t,e){for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];De[s.type](t,s)}},Property:function(t,e){De[e.value.type](t,e.value)},ArrayPattern:function(t,e){for(var i=0,r=e.elements;i<r.length;i+=1){var s=r[i];s&&De[s.type](t,s)}},RestElement:function(t,e){De[e.argument.type](t,e.argument)},AssignmentPattern:function(t,e){De[e.left.type](t,e.left)}},Le=Object.create(null);function Be(t){this.parent=(t=t||{}).parent,this.isBlockScope=!!t.block,this.createDeclarationCallback=t.declare;for(var e=this;e.isBlockScope;)e=e.parent;this.functionScope=e,this.identifiers=[],this.declarations=Object.create(null),this.references=Object.create(null),this.blockScopedDeclarations=this.isBlockScope?null:Object.create(null),this.aliases=Object.create(null)}function Fe(t,e){for(var i="";e--;)i+=t;return i}function Ue(t,e,i){void 0===i&&(i=1);var r=Math.max(e.line-5,0),s=e.line,n=String(s).length,a=t.split("\n").slice(r,s),o=a[a.length-1].slice(0,e.column).replace(/\t/g,"  ").length;return a.map((function(t,e){return i=n,(s=String(e+r+1))+Fe(" ",i-s.length)+" : "+t.replace(/\t/g,"  ");var i,s})).join("\n")+"\n"+Fe(" ",n+3+o)+Fe("^",i)}"do if in for let new try var case else enum eval null this true void with await break catch class const false super throw while yield delete export import public return static switch typeof default extends finally package private continue debugger function arguments interface protected implements instanceof".split(" ").forEach((function(t){return Le[t]=!0})),Be.prototype={addDeclaration:function(t,e){for(var i=0,r=Oe(t);i<r.length;i+=1){var s=r[i],n=s.name,a={name:n,node:s,kind:e,instances:[]};this.declarations[n]=a,this.isBlockScope&&(this.functionScope.blockScopedDeclarations[n]||(this.functionScope.blockScopedDeclarations[n]=[]),this.functionScope.blockScopedDeclarations[n].push(a))}},addReference:function(t){this.consolidated?this.consolidateReference(t):this.identifiers.push(t)},consolidate:function(){for(var t=0;t<this.identifiers.length;t+=1)this.consolidateReference(this.identifiers[t]);this.consolidated=!0},consolidateReference:function(t){var e=this.declarations[t.name];e?e.instances.push(t):(this.references[t.name]=!0,this.parent&&this.parent.addReference(t))},contains:function(t){return this.declarations[t]||!!this.parent&&this.parent.contains(t)},createIdentifier:function(t){"number"==typeof t&&(t=t.toString());for(var e=t=t.replace(/\s/g,"").replace(/\[([^\]]+)\]/g,"_$1").replace(/[^a-zA-Z0-9_$]/g,"_").replace(/_{2,}/,"_"),i=1;this.declarations[e]||this.references[e]||this.aliases[e]||e in Le;)e=t+"$"+i++;return this.aliases[e]=!0,e},createDeclaration:function(t){var e=this.createIdentifier(t);return this.createDeclarationCallback(e),e},findDeclaration:function(t){return this.declarations[t]||this.parent&&this.parent.findDeclaration(t)},resolveName:function(t){var e=this.findDeclaration(t);return e?e.name:t}};var je=function(t){function e(e,i){if(t.call(this,e),this.name="CompileError",i){var r=i.program.magicString.original,s=function(t,e){var i,r=t.split("\n"),s=r.length,n=0;for(i=0;i<s;i+=1){var a=n+r[i].length+1;if(a>e)return{line:i+1,column:e-n,char:i};n=a}throw new Error("Could not determine location of character")}(r,i.start);this.message=e+" ("+s.line+":"+s.column+")",this.stack=(new t).stack.replace(new RegExp(".+new "+this.name+".+\\n","m"),""),this.loc=s,this.snippet=Ue(r,s,i.end-i.start)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+"\n"+this.snippet},e.missingTransform=function(t,i,r,s){throw void 0===s&&(s=null),new e("Transforming "+t+" is not "+(s?"fully supported":"implemented")+". Use `transforms: { "+i+": false }` to skip transformation and disable this error"+(s?", or `transforms: { "+s+": true }` if you know what you're doing":"")+".",r)},e}(Error);function Ge(t,e){for(var i=0;i<t.length;i+=1)if(e(t[i],i))return i;return-1}var Ve={Identifier:ze,AssignmentPattern:function(t,e,i,r,s,n,a){var o="Identifier"===r.left.type,h=o?r.left.name:s;n||a.push((function(e,i,s){t.prependRight(r.left.end,i+"if ( "+h+" === void 0 ) "+h),t.move(r.left.end,r.right.end,e),t.appendLeft(r.right.end,s)})),o||He(t,e,i,r.left,s,n,a)},ArrayPattern:function(t,e,i,r,s,n,a){var o=r.start;r.elements.forEach((function(r,h){r&&("RestElement"===r.type?We(t,e,i,o,r.argument,s+".slice("+h+")",n,a):We(t,e,i,o,r,s+"["+h+"]",n,a),o=r.end)})),t.remove(o,r.end)},ObjectPattern:Xe};function He(t,e,i,r,s,n,a){Ve[r.type](t,e,i,r,s,n,a)}function ze(t,e,i,r,s,n,a){a.push((function(e,a,o){t.overwrite(r.start,r.end,(n?a:a+"var ")+i(r)+" = "+s+o),t.move(r.start,r.end,e)}))}function Xe(t,e,i,r,s,n,a){var o=this,h=r.start,l=[];r.properties.forEach((function(r){var c,u;if("Property"===r.type)if(u=r.value,r.computed||"Identifier"!==r.key.type)if(r.computed||"Literal"!==r.key.type){var d=t.slice(r.key.start,r.key.end);c=s+"["+d+"]",l.push("String("+d+")")}else c=s+"["+r.key.raw+"]",l.push(JSON.stringify(String(r.key.value)));else c=s+"."+r.key.name,l.push('"'+r.key.name+'"');else{if("RestElement"!==r.type)throw new je(o,"Unexpected node of type "+r.type+" in object pattern");u=r.argument,c=e("rest"),a.push((function(e,i,a){var o=r.program.getObjectWithoutPropertiesHelper(t);t.overwrite(r.start,h=r.argument.start,(n?i:i+"var ")+c+" = "+o+"( "+s+", ["+l.join(", ")+"] )"+a),t.move(r.start,h,e)}))}We(t,e,i,h,u,c,n,a),h=r.end})),t.remove(h,r.end)}function We(t,e,i,r,s,n,a,o){switch(s.type){case"Identifier":t.remove(r,s.start),ze(t,0,i,s,n,a,o);break;case"MemberExpression":t.remove(r,s.start),function(t,e,i,r,s,n,a){a.push((function(e,i,n){t.prependRight(r.start,i),t.appendLeft(r.end," = "+s+n),t.move(r.start,r.end,e)}))}(t,0,0,s,n,0,o);break;case"AssignmentPattern":var h,l="Identifier"===s.left.type;h=l?i(s.left):e(n),o.push((function(e,i,r){a?(t.prependRight(s.right.start,h+" = "+n+", "+h+" = "+h+" === void 0 ? "),t.appendLeft(s.right.end," : "+h+r)):(t.prependRight(s.right.start,i+"var "+h+" = "+n+"; if ( "+h+" === void 0 ) "+h+" = "),t.appendLeft(s.right.end,r)),t.move(s.right.start,s.right.end,e)})),l?t.remove(r,s.right.start):(t.remove(r,s.left.start),t.remove(s.left.end,s.right.start),We(t,e,i,r,s.left,h,a,o));break;case"ObjectPattern":t.remove(r,r=s.start);var c=n;s.properties.length>1&&(c=e(n),o.push((function(e,i,o){t.prependRight(s.start,(a?"":i+"var ")+c+" = "),t.overwrite(s.start,r=s.start+1,n),t.appendLeft(r,o),t.overwrite(s.start,r=s.start+1,(a?"":i+"var ")+c+" = "+n+o),t.move(s.start,r,e)}))),Xe(t,e,i,s,c,a,o);break;case"ArrayPattern":if(t.remove(r,r=s.start),s.elements.filter(Boolean).length>1){var u=e(n);o.push((function(e,i,o){t.prependRight(s.start,(a?"":i+"var ")+u+" = "),t.overwrite(s.start,r=s.start+1,n,{contentOnly:!0}),t.appendLeft(r,o),t.move(s.start,r,e)})),s.elements.forEach((function(s,n){s&&("RestElement"===s.type?We(t,e,i,r,s.argument,u+".slice("+n+")",a,o):We(t,e,i,r,s,u+"["+n+"]",a,o),r=s.end)}))}else{var d=Ge(s.elements,Boolean),p=s.elements[d];"RestElement"===p.type?We(t,e,i,r,p.argument,n+".slice("+d+")",a,o):We(t,e,i,r,p,n+"["+d+"]",a,o),r=p.end}t.remove(r,s.end);break;default:throw new Error("Unexpected node type in destructuring ("+s.type+")")}}var $e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createScope=function(){var t=this;this.parentIsFunction=/Function/.test(this.parent.type),this.isFunctionBlock=this.parentIsFunction||"Root"===this.parent.type,this.scope=new Be({block:!this.isFunctionBlock,parent:this.parent.findScope(!1),declare:function(e){return t.createdDeclarations.push(e)}}),this.parentIsFunction&&this.parent.params.forEach((function(e){t.scope.addDeclaration(e,"param")}))},e.prototype.initialise=function(t){this.thisAlias=null,this.argumentsAlias=null,this.defaultParameters=[],this.createdDeclarations=[],this.scope||this.createScope(),this.body.forEach((function(e){return e.initialise(t)})),this.scope.consolidate()},e.prototype.findLexicalBoundary=function(){return"Program"===this.type||/^Function/.test(this.parent.type)?this:this.parent.findLexicalBoundary()},e.prototype.findScope=function(t){return t&&!this.isFunctionBlock?this.parent.findScope(t):this.scope},e.prototype.getArgumentsAlias=function(){return this.argumentsAlias||(this.argumentsAlias=this.scope.createIdentifier("arguments")),this.argumentsAlias},e.prototype.getArgumentsArrayAlias=function(){return this.argumentsArrayAlias||(this.argumentsArrayAlias=this.scope.createIdentifier("argsArray")),this.argumentsArrayAlias},e.prototype.getThisAlias=function(){return this.thisAlias||(this.thisAlias=this.scope.createIdentifier("this")),this.thisAlias},e.prototype.getIndentation=function(){if(void 0===this.indentation){for(var t=this.program.magicString.original,e=this.synthetic||!this.body.length,i=e?this.start:this.body[0].start;i&&"\n"!==t[i];)i-=1;for(this.indentation="";;){var r=t[i+=1];if(" "!==r&&"\t"!==r)break;this.indentation+=r}for(var s=this.program.magicString.getIndentString(),n=this.parent;n;)"constructor"!==n.kind||n.parent.parent.superClass||(this.indentation=this.indentation.replace(s,"")),n=n.parent;e&&(this.indentation+=s)}return this.indentation},e.prototype.transpile=function(e,i){var r,s,n=this,a=this.getIndentation(),o=[];if(this.argumentsAlias&&o.push((function(t,i,r){e.appendLeft(t,i+"var "+n.argumentsAlias+" = arguments"+r)})),this.thisAlias&&o.push((function(t,i,r){e.appendLeft(t,i+"var "+n.thisAlias+" = this"+r)})),this.argumentsArrayAlias&&o.push((function(t,i,r){var s=n.scope.createIdentifier("i");e.appendLeft(t,i+"var "+s+" = arguments.length, "+n.argumentsArrayAlias+" = Array("+s+");\n"+a+"while ( "+s+"-- ) "+n.argumentsArrayAlias+"["+s+"] = arguments["+s+"]"+r)})),/Function/.test(this.parent.type)?this.transpileParameters(this.parent.params,e,i,a,o):"CatchClause"===this.parent.type&&this.transpileParameters([this.parent.param],e,i,a,o),i.letConst&&this.isFunctionBlock&&this.transpileBlockScopedIdentifiers(e),t.prototype.transpile.call(this,e,i),this.createdDeclarations.length&&o.push((function(t,i,r){var s=i+"var "+n.createdDeclarations.join(", ")+r;e.appendLeft(t,s)})),this.synthetic)if("ArrowFunctionExpression"===this.parent.type){var h=this.body[0];o.length?(e.appendLeft(this.start,"{").prependRight(this.end,this.parent.getIndentation()+"}"),e.prependRight(h.start,"\n"+a+"return "),e.appendLeft(h.end,";\n")):i.arrow&&(e.prependRight(h.start,"{ return "),e.appendLeft(h.end,"; }"))}else o.length&&e.prependRight(this.start,"{").appendLeft(this.end,"}");r=(s=this.body[0])&&"ExpressionStatement"===s.type&&"Literal"===s.expression.type&&"use strict"===s.expression.value?this.body[0].end:this.synthetic||"Root"===this.parent.type?this.start:this.start+1;var l="\n"+a,c=";";o.forEach((function(t,e){e===o.length-1&&(c=";\n"),t(r,l,c)}))},e.prototype.transpileParameters=function(t,e,i,r,s){var n=this;t.forEach((function(a){if("AssignmentPattern"===a.type&&"Identifier"===a.left.type)i.defaultParameter&&s.push((function(t,i,r){e.prependRight(a.left.end,i+"if ( "+a.left.name+" === void 0 ) "+a.left.name).move(a.left.end,a.right.end,t).appendLeft(a.right.end,r)}));else if("RestElement"===a.type)i.spreadRest&&s.push((function(i,s,o){var h=t[t.length-2];if(h)e.remove(h?h.end:a.start,a.end);else{for(var l=a.start,c=a.end;/\s/.test(e.original[l-1]);)l-=1;for(;/\s/.test(e.original[c]);)c+=1;e.remove(l,c)}var u=a.argument.name,d=n.scope.createIdentifier("len"),p=t.length-1;e.prependRight(i,p?s+"var "+u+" = [], "+d+" = arguments.length - "+p+";\n"+r+"while ( "+d+"-- > 0 ) "+u+"[ "+d+" ] = arguments[ "+d+" + "+p+" ]"+o:s+"var "+u+" = [], "+d+" = arguments.length;\n"+r+"while ( "+d+"-- ) "+u+"[ "+d+" ] = arguments[ "+d+" ]"+o)}));else if("Identifier"!==a.type&&i.parameterDestructuring){var o=n.scope.createIdentifier("ref");He(e,(function(t){return n.scope.createIdentifier(t)}),(function(t){return n.scope.resolveName(t.name)}),a,o,!1,s),e.prependRight(a.start,o)}}))},e.prototype.transpileBlockScopedIdentifiers=function(t){var e=this;Object.keys(this.scope.blockScopedDeclarations).forEach((function(i){for(var r=0,s=e.scope.blockScopedDeclarations[i];r<s.length;r+=1){var n=s[r],a=!1;if("for.let"===n.kind){var o=n.node.findNearest("ForStatement");if(o.shouldRewriteAsFunction){var h=e.scope.createIdentifier(i),l=o.reassigned[i]?e.scope.createIdentifier(i):i;n.name=h,t.overwrite(n.node.start,n.node.end,h,{storeName:!0}),o.aliases[i]={outer:h,inner:l};for(var c=0,u=n.instances;c<u.length;c+=1){var d=u[c],p=o.body.contains(d)?l:h;i!==p&&t.overwrite(d.start,d.end,p,{storeName:!0})}a=!0}}if(!a){var f=e.scope.createIdentifier(i);if(i!==f){n.name=f,t.overwrite(n.node.start,n.node.end,f,{storeName:!0});for(var m=0,g=n.instances;m<g.length;m+=1){var y=g[m];y.rewritten=!0,t.overwrite(y.start,y.end,f,{storeName:!0})}}}}}))},e}(Ne);function Ye(t){return"Identifier"===t.type&&"arguments"===t.name}function qe(t,e,i){for(var r=i.length;r--;){var s=i[r];if(s&&"SpreadElement"===s.type){var n=s.argument;if("ArrayExpression"===n.type){var a=n.elements;if(!a.some((function(t){return null===t}))){var o=r===i.length-1;0===a.length?t.remove(o&&0!==r?i[r-1].end:s.start,o?e.end-1:i[r+1].start):(t.remove(s.start,a[0].start),t.remove(a[a.length-1].end,o?e.end-1:s.end)),i.splice.apply(i,[r,1].concat(a)),r+=a.length}}}}}function Ze(t){switch(t.type){case"ArrayExpression":case"CallExpression":case"Identifier":case"ParenthesizedExpression":case"ThisExpression":return!1;default:return!0}}function Ke(t,e,i,r,s){for(var n=e.length,a=-1;n--;){var o=e[n];o&&"SpreadElement"===o.type&&(Ye(o.argument)&&t.overwrite(o.argument.start,o.argument.end,r),a=n)}if(-1===a)return!1;if(s){for(n=0;n<e.length;n+=1){var h=e[n];"SpreadElement"===h.type?t.remove(h.start,h.argument.start):(t.prependRight(h.start,"["),t.prependRight(h.end,"]"))}return!0}var l=e[a],c=e[a-1];if(c)t.overwrite(c.end,l.start," ].concat( ");else{var u;if(i!==l.start)(u=Ze(l.argument))?t.overwrite(i,l.start,"( "):t.remove(i,l.start);else{if("CallExpression"!==l.parent.type)throw new je("Unsupported spread construct, please raise an issue at https://github.com/bublejs/buble/issues",l);u=Ze(l.argument)}t.overwrite(l.end,e[1].start,u?" ).concat( ":".concat( ")}for(n=a;n<e.length;n+=1)(l=e[n])&&("SpreadElement"===l.type?t.remove(l.start,l.argument.start):(t.appendLeft(l.start,"["),t.appendLeft(l.end,"]")));return!0}var Qe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.elements.length)for(var i=this.findLexicalBoundary(),r=this.elements.length;r--;){var s=this.elements[r];s&&"SpreadElement"===s.type&&Ye(s.argument)&&(this.argumentsArrayAlias=i.getArgumentsArrayAlias())}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.spreadRest){if(qe(e,this,this.elements),this.elements.length){var r=this.elements[this.elements.length-1];r&&/\s*,/.test(e.original.slice(r.end,this.end))&&e.overwrite(r.end,this.end-1," ")}if(1===this.elements.length){var s=this.elements[0];s&&"SpreadElement"===s.type&&(Ye(s.argument)?e.overwrite(this.start,this.end,"[].concat( "+this.argumentsArrayAlias+" )"):(e.overwrite(this.start,s.argument.start,"[].concat( "),e.overwrite(s.end,this.end," )")))}else Ke(e,this.elements,this.start,this.argumentsArrayAlias)&&e.overwrite(this.end-1,this.end,")")}},e}(Ne);function Je(t,e){for(;")"!==t.original[e];){if(","===t.original[e])return void t.remove(e,e+1);"/"===t.original[e]&&(e="/"===t.original[e+1]?t.original.indexOf("\n",e):t.original.indexOf("*/",e)+1),e+=1}}var ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.async&&e.asyncAwait&&je.missingTransform("async arrow functions","asyncAwait",this),this.body.createScope(),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){for(var r=this.start,s=(this.body||this.params[0]).start-1;"("!==e.original[r]&&r<s;)++r;"("!==e.original[r]&&(r=-1);var n=-1===r;if(i.arrow||this.needsArguments(i)){for(var a=this.body.start;"="!==e.original[a];)a-=1;e.remove(a,this.body.start),t.prototype.transpile.call(this,e,i),n&&(e.prependRight(this.params[0].start,"("),e.appendLeft(this.params[0].end,")"));var o,h=this.parent&&"ExpressionStatement"===this.parent.type,l=h?"!":"";this.async&&(l+="async "),l+="function",h||(l+=" "),(o=n?this.params[0].start:r)>this.start?e.overwrite(this.start,o,l):e.prependRight(this.start,l)}else t.prototype.transpile.call(this,e,i);i.trailingFunctionCommas&&this.params.length&&!n&&Je(e,this.params[this.params.length-1].end)},e.prototype.needsArguments=function(t){return t.spreadRest&&this.params.filter((function(t){return"RestElement"===t.type})).length>0},e}(Ne);function ei(t,e){var i=e.findDeclaration(t.name);if(i&&"const"===i.kind)throw new je(t.name+" is read-only",t)}var ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if("Identifier"===this.left.type){var i=this.findScope(!1).findDeclaration(this.left.name),r=i&&i.node.ancestor(3);r&&"ForStatement"===r.type&&r.body.contains(this)&&(r.reassigned[this.left.name]=!0)}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){"Identifier"===this.left.type&&ei(this.left,this.findScope(!1)),"**="===this.operator&&i.exponentiation?this.transpileExponentiation(e,i):/Pattern/.test(this.left.type)&&i.destructuring&&this.transpileDestructuring(e),t.prototype.transpile.call(this,e,i)},e.prototype.transpileDestructuring=function(t){var e=this,i=this.findScope(!0),r=this.findScope(!1),s=i.createDeclaration("assign");t.appendRight(this.left.end,"("+s),t.appendLeft(this.right.end,", ");var n=[];He(t,(function(t){return i.createDeclaration(t)}),(function(t){var e=r.resolveName(t.name);return ei(t,r),e}),this.left,s,!0,n);var a=", ";n.forEach((function(t,i){i===n.length-1&&(a=""),t(e.end,"",a)})),"ExpressionStatement"===this.unparenthesizedParent().type?t.prependRight(this.end,")"):t.appendRight(this.end,", "+s+")")},e.prototype.transpileExponentiation=function(t){for(var e,i=this.findScope(!1),r=this.left.end;"*"!==t.original[r];)r+=1;t.remove(r,r+2);var s=this.left.unparenthesize();if("Identifier"===s.type)e=i.resolveName(s.name);else if("MemberExpression"===s.type){var n,a,o=!1,h=!1,l=this.findNearest(/(?:Statement|Declaration)$/),c=l.getIndentation();"Identifier"===s.property.type?a=s.computed?i.resolveName(s.property.name):s.property.name:(a=i.createDeclaration("property"),h=!0),"Identifier"===s.object.type?n=i.resolveName(s.object.name):(n=i.createDeclaration("object"),o=!0),s.start===l.start?o&&h?(t.prependRight(l.start,n+" = "),t.overwrite(s.object.end,s.property.start,";\n"+c+a+" = "),t.overwrite(s.property.end,s.end,";\n"+c+n+"["+a+"]")):o?(t.prependRight(l.start,n+" = "),t.appendLeft(s.object.end,";\n"+c),t.appendLeft(s.object.end,n)):h&&(t.prependRight(s.property.start,a+" = "),t.appendLeft(s.property.end,";\n"+c),t.move(s.property.start,s.property.end,this.start),t.appendLeft(s.object.end,"["+a+"]"),t.remove(s.object.end,s.property.start),t.remove(s.property.end,s.end)):(o&&h?(t.prependRight(s.start,"( "+n+" = "),t.overwrite(s.object.end,s.property.start,", "+a+" = "),t.overwrite(s.property.end,s.end,", "+n+"["+a+"]")):o?(t.prependRight(s.start,"( "+n+" = "),t.appendLeft(s.object.end,", "+n)):h&&(t.prependRight(s.property.start,"( "+a+" = "),t.appendLeft(s.property.end,", "),t.move(s.property.start,s.property.end,s.start),t.overwrite(s.object.end,s.property.start,"["+a+"]"),t.remove(s.property.end,s.end)),h&&t.appendLeft(this.end," )")),e=n+(s.computed||h?"["+a+"]":"."+a)}t.prependRight(this.right.start,"Math.pow( "+e+", "),t.appendLeft(this.right.end," )")},e}(Ne),ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.asyncAwait&&je.missingTransform("await","asyncAwait",this),t.prototype.initialise.call(this,e)},e}(Ne),si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){"**"===this.operator&&i.exponentiation&&(e.prependRight(this.start,"Math.pow( "),e.overwrite(this.left.end,this.right.start,", "),e.appendLeft(this.end," )")),t.prototype.transpile.call(this,e,i)},e}(Ne),ni=/(?:For(?:In|Of)?|While)Statement/,ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(){var t=this.findNearest(ni),e=this.findNearest("SwitchCase");t&&(!e||t.depth>e.depth)&&(t.canBreak=!0,this.loop=t)},e.prototype.transpile=function(t){if(this.loop&&this.loop.shouldRewriteAsFunction){if(this.label)throw new je("Labels are not currently supported in a loop with locally-scoped variables",this);t.overwrite(this.start,this.start+5,"return 'break'")}},e}(Ne),oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.arguments.length>1)for(var i=this.findLexicalBoundary(),r=this.arguments.length;r--;){var s=this.arguments[r];"SpreadElement"===s.type&&Ye(s.argument)&&(this.argumentsArrayAlias=i.getArgumentsArrayAlias())}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(i.spreadRest&&this.arguments.length&&qe(e,this,this.arguments),i.spreadRest&&this.arguments.length){var r,s=!1,n=this.arguments[0];if(1===this.arguments.length?"SpreadElement"===n.type&&(e.remove(n.start,n.argument.start),s=!0):s=Ke(e,this.arguments,n.start,this.argumentsArrayAlias),s){var a=null;if("Super"===this.callee.type?a=this.callee:"MemberExpression"===this.callee.type&&"Super"===this.callee.object.type&&(a=this.callee.object),a||"MemberExpression"!==this.callee.type)r="void 0";else if("Identifier"===this.callee.object.type)r=this.callee.object.name;else{r=this.findScope(!0).createDeclaration("ref");var o=this.callee.object;e.prependRight(o.start,"("+r+" = "),e.appendLeft(o.end,")")}e.appendLeft(this.callee.end,".apply"),a?(a.noCall=!0,this.arguments.length>1&&("SpreadElement"===n.type?Ze(n.argument)&&e.prependRight(n.start,"( "):e.prependRight(n.start,"[ "),e.appendLeft(this.arguments[this.arguments.length-1].end," )"))):1===this.arguments.length?e.prependRight(n.start,r+", "):("SpreadElement"===n.type?Ze(n.argument)?e.appendLeft(n.start,r+", ( "):e.appendLeft(n.start,r+", "):e.appendLeft(n.start,r+", [ "),e.appendLeft(this.arguments[this.arguments.length-1].end," )"))}}i.trailingFunctionCommas&&this.arguments.length&&Je(e,this.arguments[this.arguments.length-1].end),t.prototype.transpile.call(this,e,i)},e}(Ne),hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i,r,s){var n=this;if(i.classes){var a=this.parent.name,o=e.getIndentString(),h=this.getIndentation()+(r?o:""),l=h+o,c=Ge(this.body,(function(t){return"constructor"===t.kind})),u=this.body[c],d="",p="";if(this.body.length?(e.remove(this.start,this.body[0].start),e.remove(this.body[this.body.length-1].end,this.end)):e.remove(this.start,this.end),u){u.value.body.isConstructorBody=!0;var f=this.body[c+1];c>0&&(e.remove(this.body[c-1].end,u.start),e.move(u.start,f?f.start:this.end-1,this.body[0].start)),r||e.appendLeft(u.end,";")}var m=[];this.body.forEach((function(t){if("FieldDefinition"===t.type&&(m.push(t.computed?"this"+e.slice(t.start,t.end)+";":"this."+e.slice(t.start,t.end)+";"),e.remove(t.start,t.end),""!==e.byStart[t.end].content)){for(var i=0;i<e.byStart[t.end].content.length&&-1===e.byStart[t.end].content.slice(0,i).indexOf(";");i++);i>0&&e.remove(t.end,t.end+i)}}));var g=!1!==this.program.options.namedFunctionExpressions,y=g||this.parent.superClass||"ClassDeclaration"!==this.parent.type;if(this.parent.superClass){var v="if ( "+s+" ) "+a+".__proto__ = "+s+";\n"+h+a+".prototype = Object.create( "+s+" && "+s+".prototype );\n"+h+a+".prototype.constructor = "+a+";";d+=u?"\n\n"+h+v:(v="function "+a+" () {"+(m.length?"\n"+l+m.join("\n"+l)+"\n"+l:"")+(s?"\n"+l+s+".apply(this, arguments);\n"+h+"}":"}")+(r?"":";")+(this.body.length?"\n\n"+h:"")+v)+"\n\n"+h}else if(!u){var _="function "+(y?a+" ":"")+"() {"+(m.length?"\n"+l+m.join("\n"+l)+"\n"+h:"")+"}";"ClassDeclaration"===this.parent.type&&(_+=";"),this.body.length&&(_+="\n\n"+h),d+=_}u&&m.length&&e.appendLeft(u.value.body.start+1,"\n"+l+m.join("\n"+l));var x,b,E=this.findScope(!1),T=[],w=[];if(this.body.forEach((function(t,r){if("get"!==t.kind&&"set"!==t.kind||!i.getterSetter||je.missingTransform("getters and setters","getterSetter",t),"FieldDefinition"!==t.type)if("constructor"!==t.kind){t.static&&e.remove(t.start,t.start+(" "==e.original[t.start+6]?7:6));var s,o="method"!==t.kind,l=t.key.name;(Le[l]||t.value.body.scope.references[l])&&(l=E.createIdentifier(l));var u=!1;if(t.computed||"Literal"!==t.key.type||(u=!0,t.computed=!0),o){if(t.computed)throw new Error("Computed accessor properties are not currently supported");e.remove(t.start,t.key.start),t.static?(~w.indexOf(t.key.name)||w.push(t.key.name),b||(b=E.createIdentifier("staticAccessors")),s=""+b):(~T.indexOf(t.key.name)||T.push(t.key.name),x||(x=E.createIdentifier("prototypeAccessors")),s=""+x)}else s=t.static?""+a:a+".prototype";t.computed||(s+="."),(c>0&&r===c+1||0===r&&c===n.body.length-1)&&(s="\n\n"+h+s);var d=t.key.end;if(t.computed)if(u)e.prependRight(t.key.start,"["),e.appendLeft(t.key.end,"]");else{for(;"]"!==e.original[d];)d+=1;d+=1}var p=(o?"."+t.kind:"")+" = "+(t.value.async?"async ":"")+"function"+(t.value.generator?"* ":" ")+(t.computed||o||!g?"":l+" ");e.remove(d,t.value.start),e.prependRight(t.value.start,p),e.appendLeft(t.end,";"),t.value.generator&&e.remove(t.start,t.key.start);var f=t.key.start;if(t.computed&&!u)for(;"["!=e.original[f];)--f;t.start<f?e.overwrite(t.start,f,s):e.prependRight(t.start,s)}else e.overwrite(t.key.start,t.key.end,"function"+(y?" "+a:""))})),T.length||w.length){var S=[],A=[];T.length&&(S.push("var "+x+" = { "+T.map((function(t){return t+": { configurable: true }"})).join(",")+" };"),A.push("Object.defineProperties( "+a+".prototype, "+x+" );")),w.length&&(S.push("var "+b+" = { "+w.map((function(t){return t+": { configurable: true }"})).join(",")+" };"),A.push("Object.defineProperties( "+a+", "+b+" );")),u&&(d+="\n\n"+h),d+=S.join("\n"+h),u||(d+="\n\n"+h),p+="\n\n"+h+A.join("\n"+h)}u?e.appendLeft(u.end,d):e.prependRight(this.start,d),e.appendLeft(this.end,p)}t.prototype.transpile.call(this,e,i)},e}(Ne),li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.id?(this.name=this.id.name,this.findScope(!0).addDeclaration(this.id,"class")):this.name=this.findScope(!0).createIdentifier("defaultExport"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(e.classes){this.superClass||function(t,e){var i=t.start,r=t.end,s=e.getIndentString(),n=s.length,a=i-n;t.program.indentExclusions[a]||e.original.slice(a,i)!==s||e.remove(a,i);for(var o,h=new RegExp(s+"\\S","g"),l=e.original.slice(i,r);o=h.exec(l);){var c=i+o.index;t.program.indentExclusions[c]||e.remove(c,c+n)}}(this.body,t);var i=this.superClass&&(this.superClass.name||"superclass"),r=this.getIndentation(),s=r+t.getIndentString(),n="ExportDefaultDeclaration"===this.parent.type;n&&t.remove(this.parent.start,this.start);var a=this.start;this.id?(t.overwrite(a,this.id.start,"var "),a=this.id.end):t.prependLeft(a,"var "+this.name),this.superClass?this.superClass.end===this.body.start?(t.remove(a,this.superClass.start),t.appendLeft(a," = /*@__PURE__*/(function ("+i+") {\n"+s)):(t.overwrite(a,this.superClass.start," = "),t.overwrite(this.superClass.end,this.body.start,"/*@__PURE__*/(function ("+i+") {\n"+s)):a===this.body.start?t.appendLeft(a," = "):t.overwrite(a,this.body.start," = "),this.body.transpile(t,e,!!this.superClass,i);var o=n?"\n\n"+r+"export default "+this.name+";":"";this.superClass?(t.appendLeft(this.end,"\n\n"+s+"return "+this.name+";\n"+r+"}("),t.move(this.superClass.start,this.superClass.end,this.end),t.prependRight(this.end,"));"+o)):o&&t.prependRight(this.end,o)}else this.body.transpile(t,e,!1,null)},e}(Ne),ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.name=(this.id?this.id.name:"VariableDeclarator"===this.parent.type?this.parent.id.name:"AssignmentExpression"!==this.parent.type?null:"Identifier"===this.parent.left.type?this.parent.left.name:"MemberExpression"===this.parent.left.type?this.parent.left.property.name:null)||this.findScope(!0).createIdentifier("anonymous"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(e.classes){var i=this.superClass&&(this.superClass.name||"superclass"),r=this.getIndentation(),s=r+t.getIndentString();this.superClass?(t.remove(this.start,this.superClass.start),t.remove(this.superClass.end,this.body.start),t.appendRight(this.start,"/*@__PURE__*/(function ("+i+") {\n"+s)):t.overwrite(this.start,this.body.start,"/*@__PURE__*/(function () {\n"+s),this.body.transpile(t,e,!0,i);var n="";this.superClass&&(n=t.slice(this.superClass.start,this.superClass.end),t.remove(this.superClass.start,this.superClass.end)),t.appendLeft(this.end,"\n\n"+s+"return "+this.name+";\n"+r+"}("+n+"))")}else this.body.transpile(t,e,!1)},e}(Ne),ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){if(this.findNearest(ni).shouldRewriteAsFunction){if(this.label)throw new je("Labels are not currently supported in a loop with locally-scoped variables",this);t.overwrite(this.start,this.start+8,"return")}},e}(Ne),di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleExport&&je.missingTransform("export","moduleExport",this),t.prototype.initialise.call(this,e)},e}(Ne),pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleExport&&je.missingTransform("export","moduleExport",this),t.prototype.initialise.call(this,e)},e}(Ne),fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.initialise=function(e){if(this.body.createScope(),this.createdScope=!0,this.reassigned=Object.create(null),this.aliases=Object.create(null),this.thisRefs=[],t.prototype.initialise.call(this,e),e.letConst)for(var i=Object.keys(this.body.scope.declarations),r=i.length;r--;){for(var s=this.body.scope.declarations[i[r]],n=s.instances.length;n--;){var a=s.instances[n].findNearest(/Function/);if(a&&a.depth>this.depth){this.shouldRewriteAsFunction=!0;for(var o=0,h=this.thisRefs;o<h.length;o+=1){var l=h[o];l.alias=l.alias||l.findLexicalBoundary().getThisAlias()}break}}if(this.shouldRewriteAsFunction)break}},e.prototype.transpile=function(e,i){var r="ForOfStatement"!=this.type&&("BlockStatement"!==this.body.type||"BlockStatement"===this.body.type&&this.body.synthetic);if(this.shouldRewriteAsFunction){var s=this.getIndentation(),n=s+e.getIndentString(),a=this.args?" "+this.args.join(", ")+" ":"",o=this.params?" "+this.params.join(", ")+" ":"",h=this.findScope(!0),l=h.createIdentifier("loop"),c="var "+l+" = function ("+o+") "+(this.body.synthetic?"{\n"+s+e.getIndentString():""),u=(this.body.synthetic?"\n"+s+"}":"")+";\n\n"+s;if(e.prependRight(this.body.start,c),e.appendLeft(this.body.end,u),e.move(this.start,this.body.start,this.body.end),this.canBreak||this.canReturn){var d=h.createIdentifier("returned"),p="{\n"+n+"var "+d+" = "+l+"("+a+");\n";this.canBreak&&(p+="\n"+n+"if ( "+d+" === 'break' ) break;"),this.canReturn&&(p+="\n"+n+"if ( "+d+" ) return "+d+".v;"),e.prependRight(this.body.end,p+="\n"+s+"}")}else{var f=l+"("+a+");";"DoWhileStatement"===this.type?e.overwrite(this.start,this.body.start,"do {\n"+n+f+"\n"+s+"}"):e.prependRight(this.body.end,f)}}else r&&(e.appendLeft(this.body.start,"{ "),e.prependRight(this.body.end," }"));t.prototype.transpile.call(this,e,i)},e}(Ne),mi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.transpile=function(e,i){var r=this,s=this.getIndentation()+e.getIndentString();if(this.shouldRewriteAsFunction){var n="VariableDeclaration"===this.init.type?this.init.declarations.map((function(t){return Oe(t.id)})):[],a=this.aliases;this.args=n.map((function(t){return t in r.aliases?r.aliases[t].outer:t})),this.params=n.map((function(t){return t in r.aliases?r.aliases[t].inner:t}));var o=Object.keys(this.reassigned).map((function(t){return a[t].outer+" = "+a[t].inner+";"}));o.length&&(this.body.synthetic?e.appendLeft(this.body.body[0].end,"; "+o.join(" ")):e.appendLeft(this.body.body[this.body.body.length-1].end,"\n\n"+s+o.join("\n"+s)))}t.prototype.transpile.call(this,e,i)},e}(fi),gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.transpile=function(e,i){var r=this,s="VariableDeclaration"===this.left.type;if(this.shouldRewriteAsFunction){var n=s?this.left.declarations.map((function(t){return Oe(t.id)})):[];this.args=n.map((function(t){return t in r.aliases?r.aliases[t].outer:t})),this.params=n.map((function(t){return t in r.aliases?r.aliases[t].inner:t}))}t.prototype.transpile.call(this,e,i);var a=s?this.left.declarations[0].id:this.left;"Identifier"!==a.type&&this.destructurePattern(e,a,s)},e.prototype.destructurePattern=function(t,e,i){var r=this.findScope(!0),s=this.getIndentation()+t.getIndentString(),n=r.createIdentifier("ref"),a=this.body.body.length?this.body.body[0].start:this.body.start+1;t.move(e.start,e.end,a),t.prependRight(e.end,i?n:"var "+n);var o=[];He(t,(function(t){return r.createIdentifier(t)}),(function(t){return r.resolveName(t.name)}),e,n,!1,o);var h=";\n"+s;o.forEach((function(t,e){e===o.length-1&&(h=";\n\n"+s),t(a,"",h)}))},e}(fi),yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.forOf&&!e.dangerousForOf&&je.missingTransform("for-of statements","forOf",this,"dangerousForOf"),this.await&&e.asyncAwait&&je.missingTransform("for-await-of statements","asyncAwait",this),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.dangerousForOf)if(this.body.body[0]){var r=this.findScope(!0),s=this.getIndentation(),n=s+e.getIndentString(),a=r.createIdentifier("i"),o=r.createIdentifier("list");this.body.synthetic&&(e.prependRight(this.left.start,"{\n"+n),e.appendLeft(this.body.body[0].end,"\n"+s+"}"));var h=this.body.body[0].start;e.remove(this.left.end,this.right.start),e.move(this.left.start,this.left.end,h),e.prependRight(this.right.start,"var "+a+" = 0, "+o+" = "),e.appendLeft(this.right.end,"; "+a+" < "+o+".length; "+a+" += 1");var l="VariableDeclaration"===this.left.type,c=l?this.left.declarations[0].id:this.left;if("Identifier"!==c.type){var u=[],d=r.createIdentifier("ref");He(e,(function(t){return r.createIdentifier(t)}),(function(t){return r.resolveName(t.name)}),c,d,!l,u);var p=";\n"+n;u.forEach((function(t,e){e===u.length-1&&(p=";\n\n"+n),t(h,"",p)})),l?(e.appendLeft(this.left.start+this.left.kind.length+1,d),e.appendLeft(this.left.end," = "+o+"["+a+"];\n"+n)):e.appendLeft(this.left.end,"var "+d+" = "+o+"["+a+"];\n"+n)}else e.appendLeft(this.left.end," = "+o+"["+a+"];\n\n"+n)}else"VariableDeclaration"===this.left.type&&"var"===this.left.kind?(e.remove(this.start,this.left.start),e.appendLeft(this.left.end,";"),e.remove(this.left.end,this.end)):e.remove(this.start,this.end)},e}(fi),vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.generator&&e.generator&&je.missingTransform("generators","generator",this),this.async&&e.asyncAwait&&je.missingTransform("async functions","asyncAwait",this),this.body.createScope(),this.id&&this.findScope(!0).addDeclaration(this.id,"function"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){t.prototype.transpile.call(this,e,i),i.trailingFunctionCommas&&this.params.length&&Je(e,this.params[this.params.length-1].end)},e}(Ne),_i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.generator&&e.generator&&je.missingTransform("generators","generator",this),this.async&&e.asyncAwait&&je.missingTransform("async functions","asyncAwait",this),this.body.createScope(),this.id&&this.body.scope.addDeclaration(this.id,"function"),t.prototype.initialise.call(this,e);var i,r=this.parent;if(e.conciseMethodProperty&&"Property"===r.type&&"init"===r.kind&&r.method&&"Identifier"===r.key.type||e.classes&&"MethodDefinition"===r.type&&"method"===r.kind&&"Identifier"===r.key.type?i=r.key.name:this.id&&"Identifier"===this.id.type&&(i=this.id.alias||this.id.name),i)for(var s=0,n=this.params;s<n.length;s+=1){var a=n[s];if("Identifier"===a.type&&i===a.name){var o=this.body.scope,h=o.declarations[i],l=o.createIdentifier(i);a.alias=l;for(var c=0,u=h.instances;c<u.length;c+=1)u[c].alias=l;break}}},e.prototype.transpile=function(e,i){t.prototype.transpile.call(this,e,i),i.trailingFunctionCommas&&this.params.length&&Je(e,this.params[this.params.length-1].end)},e}(Ne),xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return this.parent.params&&~this.parent.params.indexOf(this)||"FunctionExpression"===this.parent.type&&this===this.parent.id?this.parent.body.scope:this.parent.findScope(t)},e.prototype.initialise=function(t){if(function t(e,i){return"MemberExpression"===e.type?!e.computed&&t(e.object,e):"Identifier"===e.type?!i||!/(Function|Class)Expression/.test(i.type)&&("VariableDeclarator"===i.type?e===i.init:"MemberExpression"===i.type||"MethodDefinition"===i.type?i.computed||e===i.object:"ArrayPattern"!==i.type&&("Property"===i.type?"ObjectPattern"!==i.parent.type&&(i.computed||e===i.value):"MethodDefinition"!==i.type&&("ExportSpecifier"!==i.type||e===i.local))):void 0}(this,this.parent)){if(t.arrow&&"arguments"===this.name&&!this.findScope(!1).contains(this.name)){var e=this.findLexicalBoundary(),i=this.findNearest("ArrowFunctionExpression"),r=this.findNearest(ni);i&&i.depth>e.depth&&(this.alias=e.getArgumentsAlias()),r&&r.body.contains(this)&&r.depth>e.depth&&(this.alias=e.getArgumentsAlias())}this.findScope(!1).addReference(this)}},e.prototype.transpile=function(t){this.alias&&t.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},e}(Ne),bi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){("BlockStatement"!==this.consequent.type||"BlockStatement"===this.consequent.type&&this.consequent.synthetic)&&(e.appendLeft(this.consequent.start,"{ "),e.prependRight(this.consequent.end," }")),this.alternate&&"IfStatement"!==this.alternate.type&&("BlockStatement"!==this.alternate.type||"BlockStatement"===this.alternate.type&&this.alternate.synthetic)&&(e.appendLeft(this.alternate.start,"{ "),e.prependRight(this.alternate.end," }")),t.prototype.transpile.call(this,e,i)},e}(Ne),Ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleImport&&je.missingTransform("dynamic import expressions","moduleImport",this),t.prototype.initialise.call(this,e)},e}(Ne),Ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleImport&&je.missingTransform("import","moduleImport",this),t.prototype.initialise.call(this,e)},e}(Ne),wi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.findScope(!0).addDeclaration(this.local,"import"),t.prototype.initialise.call(this,e)},e}(Ne),Si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.findScope(!0).addDeclaration(this.local,"import"),t.prototype.initialise.call(this,e)},e}(Ne),Ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){var r,s=this.name;e.overwrite(s.start,this.value?this.value.start:this.name.end,(/-/.test(r=s.name)?"'"+r+"'":r)+": "+(this.value?"":"true")),t.prototype.transpile.call(this,e,i)},e}(Ne),Ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){var e,i=!0,r=this.parent.children[this.parent.children.length-1];(r&&"JSXText"===(e=r).type&&!/\S/.test(e.value)&&/\n/.test(e.value)||this.parent.openingElement.attributes.length)&&(i=!1),t.overwrite(this.start,this.end,i?" )":")")},e}(Ne),Ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){var e,i=!0,r=this.parent.children[this.parent.children.length-1];r&&"JSXText"===(e=r).type&&!/\S/.test(e.value)&&/\n/.test(e.value)&&(i=!1),t.overwrite(this.start,this.end,i?" )":")")},e}(Ne);function Ri(t,e){return t=t.replace(/\u00a0/g,"&nbsp;"),e&&/\n/.test(t)&&(t=t.replace(/\s+$/,"")),t=t.replace(/^\n\r?\s+/,"").replace(/\s*\n\r?\s*/gm," "),JSON.stringify(t)}var Pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){t.prototype.transpile.call(this,e,i);var r=this.children.filter((function(t){return"JSXText"!==t.type||/\S/.test(t.raw)||!/\n/.test(t.raw)}));if(r.length){var s,n=(this.openingElement||this.openingFragment).end;for(s=0;s<r.length;s+=1){var a=r[s];if("JSXExpressionContainer"===a.type&&"JSXEmptyExpression"===a.expression.type||e.appendLeft(n,","+("\n"===e.original[n]&&"JSXText"!==a.type?"":" ")),"JSXText"===a.type){var o=Ri(a.value,s===r.length-1);e.overwrite(a.start,a.end,o)}n=a.end}}},e}(Ne),ki=/[\u2028-\u2029]/g,Mi={ArrayExpression:Qe,ArrowFunctionExpression:ti,AssignmentExpression:ii,AwaitExpression:ri,BinaryExpression:si,BreakStatement:ai,CallExpression:oi,ClassBody:hi,ClassDeclaration:li,ClassExpression:ci,ContinueStatement:ui,DoWhileStatement:fi,ExportNamedDeclaration:pi,ExportDefaultDeclaration:di,ForStatement:mi,ForInStatement:gi,ForOfStatement:yi,FunctionDeclaration:vi,FunctionExpression:_i,Identifier:xi,IfStatement:bi,Import:Ei,ImportDeclaration:Ti,ImportDefaultSpecifier:wi,ImportSpecifier:Si,JSXAttribute:Ai,JSXClosingElement:Ci,JSXClosingFragment:Ii,JSXElement:Pi,JSXExpressionContainer:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){e.remove(this.start,this.expression.start),e.remove(this.expression.end,this.end),t.prototype.transpile.call(this,e,i)},e}(Ne),JSXFragment:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Pi),JSXOpeningElement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){t.prototype.transpile.call(this,e,i),e.overwrite(this.start,this.name.start,this.program.jsx+"( ");var r="JSXIdentifier"===this.name.type&&this.name.name[0]===this.name.name[0].toLowerCase();r&&e.prependRight(this.name.start,"'");var s=this.attributes.length,n=this.name.end;if(s){var a,o,h,l=!1;for(a=0;a<s;a+=1)if("JSXSpreadAttribute"===this.attributes[a].type){l=!0;break}for(n=this.attributes[0].end,a=0;a<s;a+=1){var c=this.attributes[a];if(a>0&&(c.start===n?e.prependRight(n,", "):e.overwrite(n,c.start,", ")),l&&"JSXSpreadAttribute"!==c.type){var u=this.attributes[a-1],d=this.attributes[a+1];u&&"JSXSpreadAttribute"!==u.type||e.prependRight(c.start,"{ "),d&&"JSXSpreadAttribute"!==d.type||e.appendLeft(c.end," }")}n=c.end}if(l)if(1===s)h=r?"',":",";else{if(!this.program.options.objectAssign)throw new je("Mixed JSX attributes ending in spread requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);h=r?"', "+this.program.options.objectAssign+"({},":", "+this.program.options.objectAssign+"({},",o=")"}else h=r?"', {":", {",o=" }";e.prependRight(this.name.end,h),o&&e.appendLeft(this.attributes[s-1].end,o)}else e.appendLeft(this.name.end,r?"', null":", null"),n=this.name.end;this.selfClosing?e.overwrite(n,this.end,this.attributes.length?")":" )"):e.remove(n,this.end)},e}(Ne),JSXOpeningFragment:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){t.overwrite(this.start,this.end,this.program.jsx+"( React.Fragment, null")},e}(Ne),JSXSpreadAttribute:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){e.remove(this.start,this.argument.start),e.remove(this.argument.end,this.end),t.prototype.transpile.call(this,e,i)},e}(Ne),Literal:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(){"string"==typeof this.value&&this.program.indentExclusionElements.push(this)},e.prototype.transpile=function(t,e){e.numericLiteral&&this.raw.match(/^0[bo]/i)&&t.overwrite(this.start,this.end,String(this.value),{storeName:!0,contentOnly:!0}),"string"==typeof this.value&&this.value.match(ki)&&t.overwrite(this.start,this.end,this.raw.replace(ki,(function(t){return"\u2028"==t?"\\u2028":"\\u2029"})),{contentOnly:!0})},e}(Ne),MemberExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){i.reservedProperties&&Le[this.property.name]&&(e.overwrite(this.object.end,this.property.start,"['"),e.appendLeft(this.property.end,"']")),t.prototype.transpile.call(this,e,i)},e}(Ne),NewExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.arguments.length)for(var i=this.findLexicalBoundary(),r=this.arguments.length;r--;){var s=this.arguments[r];if("SpreadElement"===s.type&&Ye(s.argument)){this.argumentsArrayAlias=i.getArgumentsArrayAlias();break}}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.spreadRest&&this.arguments.length&&qe(e,this,this.arguments),i.spreadRest&&this.arguments.length){var r=this.arguments[0];Ke(e,this.arguments,r.start,this.argumentsArrayAlias,!0)&&(e.prependRight(this.start+"new".length," (Function.prototype.bind.apply("),e.overwrite(this.callee.end,r.start,", [ null ].concat( "),e.appendLeft(this.end," ))"))}this.arguments.length&&Je(e,this.arguments[this.arguments.length-1].end)},e}(Ne),ObjectExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){var r;t.prototype.transpile.call(this,e,i);for(var s=this.start+1,n=0,a=0,o=null,h=null,l=0;l<this.properties.length;++l){var c=this.properties[l];if("SpreadElement"===c.type){var u=c.argument;"ObjectExpression"===u.type||"Literal"===u.type&&"string"!=typeof u.value?"ObjectExpression"===u.type&&u.properties.length>0?(e.remove(c.start,u.properties[0].start),e.remove(u.properties[u.properties.length-1].end,c.end),(r=this.properties).splice.apply(r,[l,1].concat(u.properties)),l--):(e.remove(c.start,l===this.properties.length-1?c.end:this.properties[l+1].start),this.properties.splice(l,1),l--):(n+=1,null===o&&(o=l))}else c.computed&&i.computedProperty&&(a+=1,null===h&&(h=l))}if(!n||i.objectRestSpread||a&&i.computedProperty){if(n){if(!this.program.options.objectAssign)throw new je("Object spread operator requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);for(var d=this.properties.length;d--;){var p=this.properties[d];if("Property"===p.type&&!a){var f=this.properties[d-1],m=this.properties[d+1];f&&"Property"===f.type||e.prependRight(p.start,"{"),m&&"Property"===m.type||e.appendLeft(p.end,"}")}"SpreadElement"===p.type&&(e.remove(p.start,p.argument.start),e.remove(p.argument.end,p.end))}s=this.properties[0].start,a?"SpreadElement"===this.properties[0].type?(e.overwrite(this.start,s,this.program.options.objectAssign+"({}, "),e.remove(this.end-1,this.end),e.appendRight(this.end,")")):(e.prependLeft(this.start,this.program.options.objectAssign+"("),e.appendRight(this.end,")")):(e.overwrite(this.start,s,this.program.options.objectAssign+"({}, "),e.overwrite(this.properties[this.properties.length-1].end,this.end,")"))}}else n=0,o=null;if(a&&i.computedProperty){var g,y,v=this.getIndentation();"VariableDeclarator"===this.parent.type&&1===this.parent.parent.declarations.length&&"Identifier"===this.parent.id.type?(g=!0,y=this.parent.id.alias||this.parent.id.name):("AssignmentExpression"===this.parent.type&&"ExpressionStatement"===this.parent.parent.type&&"Identifier"===this.parent.left.type||"AssignmentPattern"===this.parent.type&&"Identifier"===this.parent.left.type)&&(g=!0,y=this.parent.left.alias||this.parent.left.name),n&&(g=!1),y=this.findScope(!1).resolveName(y);var _=s,x=this.end;g||(null===o||h<o?(y=this.findScope(!0).createDeclaration("obj"),e.prependRight(this.start,"( "+y+" = ")):y=null);for(var b,E=this.properties.length,T=!1,w=!0,S=0;S<E;S+=1){var A=this.properties[S],C=S>0?this.properties[S-1].end:_;if("Property"===A.type&&(A.computed||b&&!n)){if(0===S&&(C=this.start+1),b=A,y){var I=(g?";\n"+v+y:", "+y)+("Literal"===A.key.type||A.computed?"":".");C<A.start?e.overwrite(C,A.start,I):e.prependRight(A.start,I)}else y=this.findScope(!0).createDeclaration("obj"),e.appendRight(A.start,"( "+y+" = {}, "+y+(A.computed?"":"."));var R=A.key.end;if(A.computed){for(;"]"!==e.original[R];)R+=1;R+=1}"Literal"!==A.key.type||A.computed?A.shorthand||A.method&&!A.computed&&i.conciseMethodProperty?e.overwrite(A.key.start,A.key.end,e.slice(A.key.start,A.key.end).replace(/:/," =")):(A.value.start>R&&e.remove(R,A.value.start),e.prependLeft(R," = ")):e.overwrite(A.start,A.key.end+1,"["+e.slice(A.start,A.key.end)+"] = "),!A.method||!A.computed&&i.conciseMethodProperty||(A.value.generator&&e.remove(A.start,A.key.start),e.prependRight(A.value.start,"function"+(A.value.generator?"*":"")+" "))}else"SpreadElement"===A.type?y&&S>0&&(b||(b=this.properties[S-1]),e.appendLeft(b.end,", "+y+" )"),b=null,y=null):(!w&&n&&(e.prependRight(A.start,"{"),e.appendLeft(A.end,"}")),T=!0);if(w&&("SpreadElement"===A.type||A.computed)){var P=T?this.properties[this.properties.length-1].end:this.end-1;","==e.original[P]&&++P;var k=e.slice(P,x);e.prependLeft(C,k),e.remove(P,x),w=!1}var M=A.end;if(S<E-1&&!T)for(;","!==e.original[M];)M+=1;else S==E-1&&(M=this.end);A.end!=M&&e.overwrite(A.end,M,"",{contentOnly:!0})}!g&&y&&e.appendLeft(b.end,", "+y+" )")}},e}(Ne),Property:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){"get"!==this.kind&&"set"!==this.kind||!e.getterSetter||je.missingTransform("getters and setters","getterSetter",this),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.conciseMethodProperty&&!this.computed&&"ObjectPattern"!==this.parent.type)if(this.shorthand)e.prependRight(this.start,this.key.name+": ");else if(this.method){var r="";!1!==this.program.options.namedFunctionExpressions&&(r=" "+(r="Literal"===this.key.type&&"number"==typeof this.key.value?"":"Identifier"===this.key.type?Le[this.key.name]||!/^[a-z_$][a-z0-9_$]*$/i.test(this.key.name)||this.value.body.scope.references[this.key.name]?this.findScope(!0).createIdentifier(this.key.name):this.key.name:this.findScope(!0).createIdentifier(this.key.value))),this.start<this.key.start&&e.remove(this.start,this.key.start),e.appendLeft(this.key.end,": "+(this.value.async?"async ":"")+"function"+(this.value.generator?"*":"")+r)}i.reservedProperties&&Le[this.key.name]&&(e.prependRight(this.key.start,"'"),e.appendLeft(this.key.end,"'"))},e}(Ne),ReturnStatement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){this.loop=this.findNearest(ni),this.nearestFunction=this.findNearest(/Function/),this.loop&&(!this.nearestFunction||this.loop.depth>this.nearestFunction.depth)&&(this.loop.canReturn=!0,this.shouldWrap=!0),this.argument&&this.argument.initialise(t)},e.prototype.transpile=function(t,e){var i=this.shouldWrap&&this.loop&&this.loop.shouldRewriteAsFunction;this.argument?(i&&t.prependRight(this.argument.start,"{ v: "),this.argument.transpile(t,e),i&&t.appendLeft(this.argument.end," }")):i&&t.appendLeft(this.start+6," {}")},e}(Ne),Super:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){if(t.classes){if(this.method=this.findNearest("MethodDefinition"),!this.method)throw new je("use of super outside class method",this);var e=this.findNearest("ClassBody").parent;if(this.superClassName=e.superClass&&(e.superClass.name||"superclass"),!this.superClassName)throw new je("super used in base class",this);if(this.isCalled="CallExpression"===this.parent.type&&this===this.parent.callee,"constructor"!==this.method.kind&&this.isCalled)throw new je("super() not allowed outside class constructor",this);if(this.isMember="MemberExpression"===this.parent.type,!this.isCalled&&!this.isMember)throw new je("Unexpected use of `super` (expected `super(...)` or `super.*`)",this)}if(t.arrow){var i=this.findLexicalBoundary(),r=this.findNearest("ArrowFunctionExpression"),s=this.findNearest(ni);r&&r.depth>i.depth&&(this.thisAlias=i.getThisAlias()),s&&s.body.contains(this)&&s.depth>i.depth&&(this.thisAlias=i.getThisAlias())}},e.prototype.transpile=function(t,e){if(e.classes){t.overwrite(this.start,this.end,this.isCalled||this.method.static?this.superClassName:this.superClassName+".prototype",{storeName:!0,contentOnly:!0});var i=this.isCalled?this.parent:this.parent.parent;if(i&&"CallExpression"===i.type){this.noCall||t.appendLeft(i.callee.end,".call");var r=this.thisAlias||"this";i.arguments.length?t.appendLeft(i.arguments[0].start,r+", "):t.appendLeft(i.end-1,""+r)}}},e}(Ne),TaggedTemplateExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.templateString&&!e.dangerousTaggedTemplateString&&je.missingTransform("tagged template strings","templateString",this,"dangerousTaggedTemplateString"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(i.templateString&&i.dangerousTaggedTemplateString){var r=this.quasi.expressions.concat(this.quasi.quasis).sort((function(t,e){return t.start-e.start})),s=this.program.body.scope,n=this.quasi.quasis.map((function(t){return JSON.stringify(t.value.cooked)})).join(", "),a=this.program.templateLiteralQuasis[n];a||(a=s.createIdentifier("templateObject"),e.prependLeft(this.program.prependAt,"var "+a+" = Object.freeze(["+n+"]);\n"),this.program.templateLiteralQuasis[n]=a),e.overwrite(this.tag.end,r[0].start,"("+a);var o=r[0].start;r.forEach((function(t){"TemplateElement"===t.type?e.remove(o,t.end):e.overwrite(o,t.start,", "),o=t.end})),e.overwrite(o,this.end,")")}t.prototype.transpile.call(this,e,i)},e}(Ne),TemplateElement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(){this.program.indentExclusionElements.push(this)},e}(Ne),TemplateLiteral:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.templateString&&"TaggedTemplateExpression"!==this.parent.type){var r=this.expressions.concat(this.quasis).sort((function(t,e){return t.start-e.start||t.end-e.end})).filter((function(t,e){return"TemplateElement"!==t.type||!!t.value.raw||!e}));if(r.length>=3){var s=r[0];"TemplateElement"===s.type&&""===s.value.raw&&"TemplateElement"===r[2].type&&r.shift()}var n=!(1===this.quasis.length&&0===this.expressions.length||"TemplateLiteral"===this.parent.type||"AssignmentExpression"===this.parent.type||"AssignmentPattern"===this.parent.type||"VariableDeclarator"===this.parent.type||"BinaryExpression"===this.parent.type&&"+"===this.parent.operator);n&&e.appendRight(this.start,"(");var a=this.start;r.forEach((function(t,i){var r=0===i?n?"(":"":" + ";if("TemplateElement"===t.type)e.overwrite(a,t.end,r+JSON.stringify(t.value.cooked));else{var s="Identifier"!==t.type;s&&(r+="("),e.remove(a,t.start),r&&e.prependRight(t.start,r),s&&e.appendLeft(t.end,")")}a=t.end})),n&&e.appendLeft(a,")"),e.overwrite(a,this.end,"",{contentOnly:!0})}},e}(Ne),ThisExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){var e=this.findLexicalBoundary();if(t.letConst)for(var i=this.findNearest(ni);i&&i.depth>e.depth;)i.thisRefs.push(this),i=i.parent.findNearest(ni);if(t.arrow){var r=this.findNearest("ArrowFunctionExpression");r&&r.depth>e.depth&&(this.alias=e.getThisAlias())}},e.prototype.transpile=function(t){this.alias&&t.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},e}(Ne),UpdateExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if("Identifier"===this.argument.type){var i=this.findScope(!1).findDeclaration(this.argument.name),r=i&&i.node.ancestor(3);r&&"ForStatement"===r.type&&r.body.contains(this)&&(r.reassigned[this.argument.name]=!0)}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){"Identifier"===this.argument.type&&ei(this.argument,this.findScope(!1)),t.prototype.transpile.call(this,e,i)},e}(Ne),VariableDeclaration:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){this.scope=this.findScope("var"===this.kind),this.declarations.forEach((function(e){return e.initialise(t)}))},e.prototype.transpile=function(t,e){var i=this,r=this.getIndentation(),s=this.kind;if(e.letConst&&"var"!==s&&t.overwrite(this.start,this.start+this.kind.length,s="var",{contentOnly:!0,storeName:!0}),e.destructuring&&"ForOfStatement"!==this.parent.type&&"ForInStatement"!==this.parent.type){var n,a=this.start;this.declarations.forEach((function(s,o){if(s.transpile(t,e),"Identifier"===s.id.type)o>0&&"Identifier"!==i.declarations[o-1].id.type&&t.overwrite(a,s.id.start,"var ");else{var h=ni.test(i.parent.type);0===o?t.remove(a,s.id.start):t.overwrite(a,s.id.start,";\n"+r);var l="Identifier"===s.init.type&&!s.init.rewritten,c=l?s.init.alias||s.init.name:s.findScope(!0).createIdentifier("ref");a=s.start;var u=[];l?t.remove(s.id.end,s.end):u.push((function(e,i,r){t.prependRight(s.id.end,"var "+c),t.appendLeft(s.init.end,""+r),t.move(s.id.end,s.end,e)}));var d=s.findScope(!1);He(t,(function(t){return d.createIdentifier(t)}),(function(t){return d.resolveName(t.name)}),s.id,c,h,u);var p=h?"var ":"",f=h?", ":";\n"+r;u.forEach((function(t,e){o===i.declarations.length-1&&e===u.length-1&&(f=h?"":";"),t(s.start,0===e?p:"",f)}))}a=s.end,n="Identifier"!==s.id.type})),n&&this.end>a&&t.overwrite(a,this.end,"",{contentOnly:!0})}else this.declarations.forEach((function(i){i.transpile(t,e)}))},e}(Ne),VariableDeclarator:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){var i=this.parent.kind;"let"===i&&"ForStatement"===this.parent.parent.type&&(i="for.let"),this.parent.scope.addDeclaration(this.id,i),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(!this.init&&e.letConst&&"var"!==this.parent.kind){var i=this.findNearest(/Function|^For(In|Of)?Statement|^(?:Do)?WhileStatement/);!i||/Function/.test(i.type)||this.isLeftDeclaratorOfLoop()||t.appendLeft(this.id.end," = (void 0)")}this.id&&this.id.transpile(t,e),this.init&&this.init.transpile(t,e)},e.prototype.isLeftDeclaratorOfLoop=function(){return this.parent&&"VariableDeclaration"===this.parent.type&&this.parent.parent&&("ForInStatement"===this.parent.parent.type||"ForOfStatement"===this.parent.parent.type)&&this.parent.parent.left&&this.parent.parent.left.declarations[0]===this},e}(Ne),WhileStatement:fi},Ni={Program:["body"],Literal:[]},Oi={IfStatement:"consequent",ForStatement:"body",ForInStatement:"body",ForOfStatement:"body",WhileStatement:"body",DoWhileStatement:"body",ArrowFunctionExpression:"body"};function Di(t,e,i,r){this.type="Root",this.jsx=r.jsx||"React.createElement",this.options=r,this.source=t,this.magicString=new ke(t),this.ast=e,this.depth=0,function t(e,i){if(e)if("length"in e)for(var r=e.length;r--;)t(e[r],i);else if(!e.__wrapped){e.__wrapped=!0,Ni[e.type]||(Ni[e.type]=Object.keys(e).filter((function(t){return"object"==typeof e[t]})));var s=Oi[e.type];if(s&&"BlockStatement"!==e[s].type){var n=e[s];e[s]={start:n.start,end:n.end,type:"BlockStatement",body:[n],synthetic:!0}}e.parent=i,e.program=i.program||i,e.depth=i.depth+1,e.keys=Ni[e.type],e.indentation=void 0;for(var a=0,o=Ni[e.type];a<o.length;a+=1)t(e[o[a]],e);e.program.magicString.addSourcemapLocation(e.start),e.program.magicString.addSourcemapLocation(e.end),e.__proto__=(("BlockStatement"===e.type?$e:Mi[e.type])||Ne).prototype}}(this.body=e,this),this.body.__proto__=$e.prototype,this.templateLiteralQuasis=Object.create(null);for(var s=0;s<this.body.body.length;++s)if(!this.body.body[s].directive){this.prependAt=this.body.body[s].start;break}this.objectWithoutPropertiesHelper=null,this.indentExclusionElements=[],this.body.initialise(i),this.indentExclusions=Object.create(null);for(var n=0,a=this.indentExclusionElements;n<a.length;n+=1)for(var o=a[n],h=o.start;h<o.end;h+=1)this.indentExclusions[h]=!0;this.body.transpile(this.magicString,i)}Di.prototype={export:function(t){return void 0===t&&(t={}),{code:this.magicString.toString(),map:this.magicString.generateMap({file:t.file,source:t.source,includeContent:!1!==t.includeContent})}},findNearest:function(){return null},findScope:function(){return null},getObjectWithoutPropertiesHelper:function(t){return this.objectWithoutPropertiesHelper||(this.objectWithoutPropertiesHelper=this.body.scope.createIdentifier("objectWithoutProperties"),t.prependLeft(this.prependAt,"function "+this.objectWithoutPropertiesHelper+" (obj, exclude) { var target = {}; for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) target[k] = obj[k]; return target; }\n")),this.objectWithoutPropertiesHelper}};var Li=st.extend(fe,ue(),(function(t){return class extends t{getTokenFromCode(t){if(35===t){++this.pos;const t=this.readWord1();return this.finishToken(_e,t)}return super.getTokenFromCode(t)}parseClass(t,e){this._privateBoundNamesStack=this._privateBoundNamesStack||[];const i=Object.create(this._privateBoundNamesStack[this._privateBoundNamesStack.length-1]||null);this._privateBoundNamesStack.push(i),this._unresolvedPrivateNamesStack=this._unresolvedPrivateNamesStack||[];const r=Object.create(null);this._unresolvedPrivateNamesStack.push(r);const s=super.parseClass(t,e);if(this._privateBoundNamesStack.pop(),this._unresolvedPrivateNamesStack.pop(),this._unresolvedPrivateNamesStack.length)Object.assign(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1],r);else{const t=Object.keys(r);t.length&&(t.sort(((t,e)=>r[t]-r[e])),this.raise(r[t[0]],"Usage of undeclared private name"))}return s}parseClassElement(t){if(this.eat(ge.semi))return null;const e=this.startNode();if(!(this.options.ecmaVersion>=8)||this.type!=_e){if(this.isContextual("async")){me.lastIndex=this.pos;let t=me.exec(this.input),i=this.input.charAt(this.pos+t[0].length);if(";"===i||"="===i)return e.key=this.parseIdent(!0),e.computed=!1,ye.call(this,e),this.finishNode(e,"FieldDefinition"),this.semicolon(),e}return super.parseClassElement.apply(this,arguments)}return e.key=ve.call(this),e.computed=!1,"constructor"==e.key.name&&this.raise(e.start,"Classes may not have a field named constructor"),Object.prototype.hasOwnProperty.call(this._privateBoundNamesStack[this._privateBoundNamesStack.length-1],e.key.name)&&this.raise(e.start,"Duplicate private element"),this._privateBoundNamesStack[this._privateBoundNamesStack.length-1][e.key.name]=!0,delete this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][e.key.name],ye.call(this,e),this.finishNode(e,"FieldDefinition"),this.semicolon(),e}parseClassMethod(t,e,i,r){return e||i||"method"!=t.kind||t.static||this.options.ecmaVersion<8||this.type==ge.parenL?super.parseClassMethod.apply(this,arguments):(ye.call(this,t),delete t.kind,delete t.static,t=this.finishNode(t,"FieldDefinition"),this.semicolon(),t)}parseSubscripts(t,e,i,r){for(let s;;){if(!(s=this.eat(ge.bracketL))&&!this.eat(ge.dot))return super.parseSubscripts(t,e,i,r);{let r=this.startNodeAt(e,i);r.object=t,s?r.property=this.parseExpression():this.type==_e?(r.property=ve.call(this),this._privateBoundNamesStack.length&&this._privateBoundNamesStack[this._privateBoundNamesStack.length-1][r.property.name]||(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][r.property.name]=r.property.start)):r.property=this.parseIdent(!0),r.computed=Boolean(s),s&&this.expect(ge.bracketR),t=this.finishNode(r,"MemberExpression")}}}parseMaybeUnary(t,e){const i=super.parseMaybeUnary(t,e);return"delete"==i.operator&&"MemberExpression"==i.argument.type&&"PrivateName"==i.argument.property.type&&this.raise(i.start,"Private elements may not be deleted"),i}parseIdent(t,e){const i=super.parseIdent(t,e);return this._inFieldValue&&"arguments"==i.name&&this.raise(i.start,"A class field initializer may not contain arguments"),i}parseExprAtom(t){const e=super.parseExprAtom(t);return this._inFieldValue&&"Super"==e.type&&this.raise(e.start,"A class field initializer may not contain super"),e}}})),Bi=["getterSetter","arrow","classes","computedProperty","conciseMethodProperty","defaultParameter","destructuring","forOf","generator","letConst","moduleExport","moduleImport","numericLiteral","parameterDestructuring","spreadRest","stickyRegExp","templateString","exponentiation","reservedProperties","trailingFunctionCommas","asyncAwait","objectRestSpread"],Fi=["dangerousTaggedTemplateString","dangerousForOf"];function Ui(t,e){return function(t,e){var i;void 0===e&&(e={});var r=null;try{i=Li.parse(t,{ecmaVersion:10,preserveParens:!0,sourceType:"module",allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!0,allowHashBang:!0,onComment:function(t,e){if(!r){var i=/@jsx\s+([^\s]+)/.exec(e);i&&(r=i[1])}}}),e.jsx=r||e.jsx}catch(e){throw e.snippet=Ue(t,e.loc),e.toString=function(){return e.name+": "+e.message+"\n"+e.snippet},e}var s=Object.create(null);return Bi.forEach((function(t){s[t]=!0})),Fi.forEach((function(t){s[t]=!0})),Object.keys(e.transforms||{}).forEach((function(t){if("modules"===t)return"moduleImport"in e.transforms||(s.moduleImport=e.transforms.modules),void("moduleExport"in e.transforms||(s.moduleExport=e.transforms.modules));if(!(t in s))throw new Error("Unknown transform '"+t+"'");s[t]=e.transforms[t]})),!0===e.objectAssign&&(e.objectAssign="Object.assign"),new Di(t,i,s,e).export(e)}(t,{...e,transforms:{asyncAwait:!1,classes:!1,getterSetter:!1,...e.transforms}})}var ji=i(9144),Gi=i.n(ji),Vi={plain:{color:"#C5C8C6",backgroundColor:"#1D1F21"},styles:[{types:["prolog","comment","doctype","cdata"],style:{color:"hsl(30, 20%, 50%)"}},{types:["property","tag","boolean","number","constant","symbol"],style:{color:"hsl(350, 40%, 70%)"}},{types:["attr-name","string","char","builtin","insterted"],style:{color:"hsl(75, 70%, 60%)"}},{types:["operator","entity","url","string","variable","language-css"],style:{color:"hsl(40, 90%, 60%)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["regex","important"],style:{color:"#e90"}},{types:["atrule","attr-value","keyword"],style:{color:"hsl(350, 40%, 70%)"}},{types:["punctuation","symbol"],style:{opacity:"0.7"}}]},Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zi=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Xi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Wi=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},$i=function(t,e){var i={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i},Yi=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},qi=function(t){function e(){var i,s;zi(this,e);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return i=s=Yi(this,t.call.apply(t,[this].concat(a))),s.state={code:""},s.updateContent=function(t){s.setState({code:t},(function(){s.props.onChange&&s.props.onChange(s.state.code)}))},s.highlightCode=function(t){return r.createElement(b,{Prism:c.Z,code:t,theme:s.props.theme||Vi,language:s.props.language},(function(t){var e=t.tokens,i=t.getLineProps,s=t.getTokenProps;return r.createElement(r.Fragment,null,e.map((function(t,e){return r.createElement("div",i({line:t,key:e}),t.map((function(t,e){return r.createElement("span",s({token:t,key:e}))})))})))}))},Yi(s,i)}return Wi(e,t),e.getDerivedStateFromProps=function(t,e){return t.code!==e.prevCodeProp?{code:t.code,prevCodeProp:t.code}:null},e.prototype.render=function(){var t=this.props,e=t.style,i=(t.code,t.onChange,t.language,t.theme),s=$i(t,["style","code","onChange","language","theme"]),n=this.state.code,a=i&&"object"===Hi(i.plain)?i.plain:{};return r.createElement(l.Z,Xi({value:n,padding:10,highlight:this.highlightCode,onValueChange:this.updateContent,style:Xi({whiteSpace:"pre",fontFamily:"monospace"},a,e)},s))},e}(r.Component),Zi=(0,r.createContext)({}),Ki={assign:Gi()},Qi={objectAssign:"_poly.assign",transforms:{dangerousForOf:!0,dangerousTaggedTemplateString:!0}},Ji=function(t){return Ui(t,Qi).code},tr=function(t,e){return function(i){function s(){return zi(this,s),Yi(this,i.apply(this,arguments))}return Wi(s,i),s.prototype.componentDidCatch=function(t){e(t)},s.prototype.render=function(){return"function"==typeof t?r.createElement(t,null):t},s}(r.Component)},er=function(t,e){var i=Object.keys(e),s=i.map((function(t){return e[t]}));return(new(Function.prototype.bind.apply(Function,[null].concat(["_poly","React"],i,[t])))).apply(void 0,[Ki,r].concat(s))},ir=function(t,e){var i=t.code,r=void 0===i?"":i,s=t.scope,n=void 0===s?{}:s,a=r.trim().replace(/;$/,""),o=Ji("return ("+a+")").trim();return tr(er(o,n),e)},rr=function(t,e,i){var r=t.code,s=void 0===r?"":r,n=t.scope,a=void 0===n?{}:n;if(!/render\s*\(/.test(s))return i(new SyntaxError("No-Inline evaluations must call `render`."));er(Ji(s),Xi({},a,{render:function(t){void 0===t?i(new SyntaxError("`render` must be called with valid JSX.")):e(tr(t,i))}}))},sr=function(t){function e(){var i,r;zi(this,e);for(var s=arguments.length,n=Array(s),a=0;a<s;a++)n[a]=arguments[a];return i=r=Yi(this,t.call.apply(t,[this].concat(n))),r.onChange=function(t){var e=r.props,i=e.scope,s=e.transformCode,n=e.noInline;r.transpile({code:t,scope:i,transformCode:s,noInline:n})},r.onError=function(t){r.setState({error:t.toString()})},r.transpile=function(t){var e=t.code,i=t.scope,s=t.transformCode,n=t.noInline,a=void 0!==n&&n,o={code:s?s(e):e,scope:i},h=function(t){return r.setState({element:void 0,error:t.toString()})},l=function(t){return r.setState(Xi({},c,{element:t}))},c={unsafeWrapperError:void 0,error:void 0};try{a?(r.setState(Xi({},c,{element:null})),rr(o,l,h)):l(ir(o,h))}catch(u){r.setState(Xi({},c,{error:u.toString()}))}},Yi(r,i)}return Wi(e,t),e.prototype.UNSAFE_componentWillMount=function(){var t=this.props,e=t.code,i=t.scope,r=t.transformCode,s=t.noInline;this.transpile({code:e,scope:i,transformCode:r,noInline:s})},e.prototype.componentDidUpdate=function(t){var e=t.code,i=t.scope,r=t.noInline,s=t.transformCode,n=this.props,a=n.code,o=n.scope,h=n.noInline,l=n.transformCode;a===e&&o===i&&h===r&&l===s||this.transpile({code:a,scope:o,transformCode:l,noInline:h})},e.prototype.render=function(){var t=this.props,e=t.children,i=t.code,s=t.language,n=t.theme,a=t.disabled;return r.createElement(Zi.Provider,{value:Xi({},this.state,{code:i,language:s,theme:n,disabled:a,onError:this.onError,onChange:this.onChange})},e)},e}(r.Component);function nr(t){return r.createElement(Zi.Consumer,null,(function(e){var i=e.code,s=e.language,n=e.theme,a=e.disabled,o=e.onChange;return r.createElement(qi,Xi({theme:n,code:i,language:s,disabled:a,onChange:o},t))}))}function ar(t){return r.createElement(Zi.Consumer,null,(function(e){var i=e.error;return i?r.createElement("pre",t,i):null}))}function or(t){var e=t.Component,i=$i(t,["Component"]);return r.createElement(e,i,r.createElement(Zi.Consumer,null,(function(t){var e=t.element;return e&&r.createElement(e,null)})))}sr.defaultProps={code:"",noInline:!1,language:"jsx",disabled:!1},or.defaultProps={Component:"div"};var hr=i(1077),lr=i(7614);function cr(t){let{children:e,fallback:i}=t;return(0,h.Z)()?r.createElement(r.Fragment,null,e?.()):i??null}var ur=i(361),dr=i(7683);function pr(){const{prism:t}=(0,dr.L)(),{colorMode:e}=(0,ur.I)(),i=t.theme,r=t.darkTheme||i;return"dark"===e?r:i}const fr="playgroundContainer_BKND",mr="playgroundHeader_BYID",gr="playgroundEditor_yR0i",yr="playgroundPreview_wiye";function vr(t){let{children:e}=t;return r.createElement("div",{className:(0,o.Z)(mr)},e)}function _r(){return r.createElement("div",null,"Loading...")}function xr(){return r.createElement(r.Fragment,null,r.createElement(vr,null,r.createElement(hr.Z,{id:"theme.Playground.result",description:"The result label of the live codeblocks"},"Result")),r.createElement("div",{className:yr},r.createElement(cr,{fallback:r.createElement(_r,null)},(()=>r.createElement(r.Fragment,null,r.createElement(or,null),r.createElement(ar,null))))))}function br(){const t=(0,h.Z)();return r.createElement(nr,{key:String(t),className:gr})}function Er(){return r.createElement(r.Fragment,null,r.createElement(vr,null,r.createElement(hr.Z,{id:"theme.Playground.liveEditor",description:"The live editor label of the live codeblocks"},"Live Editor")),r.createElement(br,null))}function Tr(t){let{children:e,transformCode:i,...s}=t;const{siteConfig:{themeConfig:a}}=(0,lr.Z)(),{liveCodeBlock:{playgroundPosition:o}}=a,h=pr(),l=s.metastring?.includes("noInline")??!1;return r.createElement("div",{className:fr},r.createElement(sr,(0,n.Z)({code:e.replace(/\n$/,""),noInline:l,transformCode:i??(t=>`${t};`),theme:h},s),"top"===o?r.createElement(r.Fragment,null,r.createElement(xr,null),r.createElement(Er,null)):r.createElement(r.Fragment,null,r.createElement(Er,null),r.createElement(xr,null))))}var wr=i(5098),Sr=i(211),Ar=i(4501),Cr=i.n(Ar);const Ir=/title=(?<quote>["'])(?<title>.*?)\1/,Rr=/\{(?<range>[\d,-]+)\}/,Pr={js:{start:"\\/\\/",end:""},jsBlock:{start:"\\/\\*",end:"\\*\\/"},jsx:{start:"\\{\\s*\\/\\*",end:"\\*\\/\\s*\\}"},bash:{start:"#",end:""},html:{start:"\x3c!--",end:"--\x3e"}};function kr(t,e){const i=t.map((t=>{const{start:i,end:r}=Pr[t];return`(?:${i}\\s*(${e.flatMap((t=>[t.line,t.block?.start,t.block?.end].filter(Boolean))).join("|")})\\s*${r})`})).join("|");return new RegExp(`^\\s*(?:${i})\\s*$`)}function Mr(t,e){let i=t.replace(/\n$/,"");const{language:r,magicComments:s,metastring:n}=e;if(n&&Rr.test(n)){const t=n.match(Rr).groups.range;if(0===s.length)throw new Error(`A highlight range has been given in code block's metastring (\`\`\` ${n}), but no magic comment config is available. Docusaurus applies the first magic comment entry's className for metastring ranges.`);const e=s[0].className,r=Cr()(t).filter((t=>t>0)).map((t=>[t-1,[e]]));return{lineClassNames:Object.fromEntries(r),code:i}}if(void 0===r)return{lineClassNames:{},code:i};const a=function(t,e){switch(t){case"js":case"javascript":case"ts":case"typescript":return kr(["js","jsBlock"],e);case"jsx":case"tsx":return kr(["js","jsBlock","jsx"],e);case"html":return kr(["js","jsBlock","html"],e);case"python":case"py":case"bash":return kr(["bash"],e);case"markdown":case"md":return kr(["html","jsx","bash"],e);default:return kr(Object.keys(Pr),e)}}(r,s),o=i.split("\n"),h=Object.fromEntries(s.map((t=>[t.className,{start:0,range:""}]))),l=Object.fromEntries(s.filter((t=>t.line)).map((t=>{let{className:e,line:i}=t;return[i,e]}))),c=Object.fromEntries(s.filter((t=>t.block)).map((t=>{let{className:e,block:i}=t;return[i.start,e]}))),u=Object.fromEntries(s.filter((t=>t.block)).map((t=>{let{className:e,block:i}=t;return[i.end,e]})));for(let p=0;p<o.length;){const t=o[p].match(a);if(!t){p+=1;continue}const e=t.slice(1).find((t=>void 0!==t));l[e]?h[l[e]].range+=`${p},`:c[e]?h[c[e]].start=p:u[e]&&(h[u[e]].range+=`${h[u[e]].start}-${p-1},`),o.splice(p,1)}i=o.join("\n");const d={};return Object.entries(h).forEach((t=>{let[e,{range:i}]=t;Cr()(i).forEach((t=>{d[t]??=[],d[t].push(e)}))})),{lineClassNames:d,code:i}}const Nr="codeBlockContainer_Ckt0";function Or(t){let{as:e,...i}=t;const s=function(t){const e={color:"--prism-color",backgroundColor:"--prism-background-color"},i={};return Object.entries(t.plain).forEach((t=>{let[r,s]=t;const n=e[r];n&&"string"==typeof s&&(i[n]=s)})),i}(pr());return r.createElement(e,(0,n.Z)({},i,{style:s,className:(0,o.Z)(i.className,Nr,Sr.k.common.codeBlock)}))}const Dr={codeBlockContent:"codeBlockContent_biex",codeBlockTitle:"codeBlockTitle_Ktv7",codeBlock:"codeBlock_bY9V",codeBlockStandalone:"codeBlockStandalone_MEMb",codeBlockLines:"codeBlockLines_e6Vv",codeBlockLinesWithNumbering:"codeBlockLinesWithNumbering_o6Pm",buttonGroup:"buttonGroup__atx"};function Lr(t){let{children:e,className:i}=t;return r.createElement(Or,{as:"pre",tabIndex:0,className:(0,o.Z)(Dr.codeBlockStandalone,"thin-scrollbar",i)},r.createElement("code",{className:Dr.codeBlockLines},e))}var Br=i(6335);const Fr={attributes:!0,characterData:!0,childList:!0,subtree:!0};function Ur(t,e){const[i,s]=(0,r.useState)(),n=(0,r.useCallback)((()=>{s(t.current?.closest("[role=tabpanel][hidden]"))}),[t,s]);(0,r.useEffect)((()=>{n()}),[n]),function(t,e,i){void 0===i&&(i=Fr);const s=(0,Br.zX)(e),n=(0,Br.Ql)(i);(0,r.useEffect)((()=>{const e=new MutationObserver(s);return t&&e.observe(t,n),()=>e.disconnect()}),[t,s,n])}(i,(t=>{t.forEach((t=>{"attributes"===t.type&&"hidden"===t.attributeName&&(e(),n())}))}),{attributes:!0,characterData:!1,childList:!1,subtree:!1})}const jr="codeLine_lJS_",Gr="codeLineNumber_Tfdd",Vr="codeLineContent_feaV";function Hr(t){let{line:e,classNames:i,showLineNumbers:s,getLineProps:a,getTokenProps:h}=t;1===e.length&&"\n"===e[0].content&&(e[0].content="");const l=a({line:e,className:(0,o.Z)(i,s&&jr)}),c=e.map(((t,e)=>r.createElement("span",(0,n.Z)({key:e},h({token:t,key:e})))));return r.createElement("span",l,s?r.createElement(r.Fragment,null,r.createElement("span",{className:Gr}),r.createElement("span",{className:Vr},c)):c,r.createElement("br",null))}const zr={copyButtonCopied:"copyButtonCopied_obH4",copyButtonIcons:"copyButtonIcons_eSgA",copyButtonIcon:"copyButtonIcon_y97N",copyButtonSuccessIcon:"copyButtonSuccessIcon_LjdS"};function Xr(t){let{code:e,className:i}=t;const[s,n]=(0,r.useState)(!1),a=(0,r.useRef)(void 0),h=(0,r.useCallback)((()=>{!function(t,e){let{target:i=document.body}=void 0===e?{}:e;const r=document.createElement("textarea"),s=document.activeElement;r.value=t,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";const n=document.getSelection();let a=!1;n.rangeCount>0&&(a=n.getRangeAt(0)),i.append(r),r.select(),r.selectionStart=0,r.selectionEnd=t.length;let o=!1;try{o=document.execCommand("copy")}catch{}r.remove(),a&&(n.removeAllRanges(),n.addRange(a)),s&&s.focus()}(e),n(!0),a.current=window.setTimeout((()=>{n(!1)}),1e3)}),[e]);return(0,r.useEffect)((()=>()=>window.clearTimeout(a.current)),[]),r.createElement("button",{type:"button","aria-label":s?(0,hr.I)({id:"theme.CodeBlock.copied",message:"Copied",description:"The copied button label on code blocks"}):(0,hr.I)({id:"theme.CodeBlock.copyButtonAriaLabel",message:"Copy code to clipboard",description:"The ARIA label for copy code blocks button"}),title:(0,hr.I)({id:"theme.CodeBlock.copy",message:"Copy",description:"The copy button label on code blocks"}),className:(0,o.Z)("clean-btn",i,zr.copyButton,s&&zr.copyButtonCopied),onClick:h},r.createElement("span",{className:zr.copyButtonIcons,"aria-hidden":"true"},r.createElement("svg",{className:zr.copyButtonIcon,viewBox:"0 0 24 24"},r.createElement("path",{d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"})),r.createElement("svg",{className:zr.copyButtonSuccessIcon,viewBox:"0 0 24 24"},r.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))}const Wr="wordWrapButtonIcon_Bwma",$r="wordWrapButtonEnabled_EoeP";function Yr(t){let{className:e,onClick:i,isEnabled:s}=t;const n=(0,hr.I)({id:"theme.CodeBlock.wordWrapToggle",message:"Toggle word wrap",description:"The title attribute for toggle word wrapping button of code block lines"});return r.createElement("button",{type:"button",onClick:i,className:(0,o.Z)("clean-btn",e,s&&$r),"aria-label":n,title:n},r.createElement("svg",{className:Wr,viewBox:"0 0 24 24","aria-hidden":"true"},r.createElement("path",{fill:"currentColor",d:"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"})))}function qr(t){let{children:e,className:i="",metastring:s,title:a,showLineNumbers:h,language:l}=t;const{prism:{defaultLanguage:c,magicComments:u}}=(0,dr.L)(),p=l??i.split(" ").find((t=>t.startsWith("language-")))?.replace(/language-/,"")??c;const f=pr(),m=function(){const[t,e]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),n=(0,r.useRef)(null),a=(0,r.useCallback)((()=>{const i=n.current.querySelector("code");t?i.removeAttribute("style"):(i.style.whiteSpace="pre-wrap",i.style.overflowWrap="anywhere"),e((t=>!t))}),[n,t]),o=(0,r.useCallback)((()=>{const{scrollWidth:t,clientWidth:e}=n.current,i=t>e||n.current.querySelector("code").hasAttribute("style");s(i)}),[n]);return Ur(n,o),(0,r.useEffect)((()=>{o()}),[t,o]),(0,r.useEffect)((()=>(window.addEventListener("resize",o,{passive:!0}),()=>{window.removeEventListener("resize",o)})),[o]),{codeBlockRef:n,isEnabled:t,isCodeScrollable:i,toggle:a}}(),g=function(t){return t?.match(Ir)?.groups.title??""}(s)||a,{lineClassNames:y,code:v}=Mr(e,{metastring:s,language:p,magicComments:u}),_=h??function(t){return Boolean(t?.includes("showLineNumbers"))}(s);return r.createElement(Or,{as:"div",className:(0,o.Z)(i,p&&!i.includes(`language-${p}`)&&`language-${p}`)},g&&r.createElement("div",{className:Dr.codeBlockTitle},g),r.createElement("div",{className:Dr.codeBlockContent},r.createElement(b,(0,n.Z)({},d,{theme:f,code:v,language:p??"text"}),(t=>{let{className:e,tokens:i,getLineProps:s,getTokenProps:n}=t;return r.createElement("pre",{tabIndex:0,ref:m.codeBlockRef,className:(0,o.Z)(e,Dr.codeBlock,"thin-scrollbar")},r.createElement("code",{className:(0,o.Z)(Dr.codeBlockLines,_&&Dr.codeBlockLinesWithNumbering)},i.map(((t,e)=>r.createElement(Hr,{key:e,line:t,getLineProps:s,getTokenProps:n,classNames:y[e],showLineNumbers:_})))))})),r.createElement("div",{className:Dr.buttonGroup},(m.isEnabled||m.isCodeScrollable)&&r.createElement(Yr,{className:Dr.codeButton,onClick:()=>m.toggle(),isEnabled:m.isEnabled}),r.createElement(Xr,{className:Dr.codeButton,code:v}))))}const Zr=(t=>function(e){return e.live?r.createElement(Tr,(0,n.Z)({scope:wr.Z},e)):r.createElement(t,e)})((function(t){let{children:e,...i}=t;const s=(0,h.Z)(),a=function(t){return r.Children.toArray(t).some((t=>(0,r.isValidElement)(t)))?t:Array.isArray(t)?t.join(""):t}(e),o="string"==typeof a?qr:Lr;return r.createElement(o,(0,n.Z)({key:String(s)},i),a)}));var Kr=i(9817);var Qr=i(8698);const Jr="details_B4FW",ts="isBrowser_Cof9",es="collapsibleContent_VYua";function is(t){return!!t&&("SUMMARY"===t.tagName||is(t.parentElement))}function rs(t,e){return!!t&&(t===e||rs(t.parentElement,e))}function ss(t){let{summary:e,children:i,...s}=t;const a=(0,h.Z)(),l=(0,r.useRef)(null),{collapsed:c,setCollapsed:u}=(0,Qr.u)({initialState:!s.open}),[d,p]=(0,r.useState)(s.open);return r.createElement("details",(0,n.Z)({},s,{ref:l,open:d,"data-collapsed":c,className:(0,o.Z)(Jr,a&&ts,s.className),onMouseDown:t=>{is(t.target)&&t.detail>1&&t.preventDefault()},onClick:t=>{t.stopPropagation();const e=t.target;is(e)&&rs(e,l.current)&&(t.preventDefault(),c?(u(!1),p(!0)):u(!0))}}),e??r.createElement("summary",null,"Details"),r.createElement(Qr.z,{lazy:!1,collapsed:c,disableSSRStyle:!0,onCollapseTransitionEnd:t=>{u(t),p(!t)}},r.createElement("div",{className:es},i)))}const ns="details_b_Ee";function as(t){let{...e}=t;return r.createElement(ss,(0,n.Z)({},e,{className:(0,o.Z)("alert alert--info",ns,e.className)}))}var os=i(3352);function hs(t){return r.createElement(os.Z,t)}const ls="containsTaskList_mC6p";const cs="img_ev3q";const us="admonition_LlT9",ds="admonitionHeading_tbUL",ps="admonitionIcon_kALy",fs="admonitionContent_S0QG";const ms={note:{infimaClassName:"secondary",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))},label:r.createElement(hr.Z,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)"},"note")},tip:{infimaClassName:"success",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 12 16"},r.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))},label:r.createElement(hr.Z,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)"},"tip")},danger:{infimaClassName:"danger",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 12 16"},r.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))},label:r.createElement(hr.Z,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)"},"danger")},info:{infimaClassName:"info",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))},label:r.createElement(hr.Z,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)"},"info")},caution:{infimaClassName:"warning",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 16 16"},r.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},label:r.createElement(hr.Z,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)"},"caution")}},gs={secondary:"note",important:"info",success:"tip",warning:"danger"};function ys(t){const{mdxAdmonitionTitle:e,rest:i}=function(t){const e=r.Children.toArray(t),i=e.find((t=>r.isValidElement(t)&&"mdxAdmonitionTitle"===t.props?.mdxType)),s=r.createElement(r.Fragment,null,e.filter((t=>t!==i)));return{mdxAdmonitionTitle:i,rest:s}}(t.children);return{...t,title:t.title??e,children:i}}const vs={head:function(t){const e=r.Children.map(t.children,(t=>r.isValidElement(t)?function(t){if(t.props?.mdxType&&t.props.originalType){const{mdxType:e,originalType:i,...s}=t.props;return r.createElement(t.props.originalType,s)}return t}(t):t));return r.createElement(a.Z,t,e)},code:function(t){const e=["a","abbr","b","br","button","cite","code","del","dfn","em","i","img","input","ins","kbd","label","object","output","q","ruby","s","small","span","strong","sub","sup","time","u","var","wbr"];return r.Children.toArray(t.children).every((t=>"string"==typeof t&&!t.includes("\n")||(0,r.isValidElement)(t)&&e.includes(t.props?.mdxType)))?r.createElement("code",t):r.createElement(Zr,t)},a:function(t){return r.createElement(Kr.Z,t)},pre:function(t){return r.createElement(Zr,(0,r.isValidElement)(t.children)&&"code"===t.children.props?.originalType?t.children.props:{...t})},details:function(t){const e=r.Children.toArray(t.children),i=e.find((t=>r.isValidElement(t)&&"summary"===t.props?.mdxType)),s=r.createElement(r.Fragment,null,e.filter((t=>t!==i)));return r.createElement(as,(0,n.Z)({},t,{summary:i}),s)},ul:function(t){return r.createElement("ul",(0,n.Z)({},t,{className:(e=t.className,(0,o.Z)(e,e?.includes("contains-task-list")&&ls))}));var e},img:function(t){return r.createElement("img",(0,n.Z)({loading:"lazy"},t,{className:(e=t.className,(0,o.Z)(e,cs))}));var e},h1:t=>r.createElement(hs,(0,n.Z)({as:"h1"},t)),h2:t=>r.createElement(hs,(0,n.Z)({as:"h2"},t)),h3:t=>r.createElement(hs,(0,n.Z)({as:"h3"},t)),h4:t=>r.createElement(hs,(0,n.Z)({as:"h4"},t)),h5:t=>r.createElement(hs,(0,n.Z)({as:"h5"},t)),h6:t=>r.createElement(hs,(0,n.Z)({as:"h6"},t)),admonition:function(t){const{children:e,type:i,title:s,icon:n}=ys(t),a=function(t){const e=gs[t]??t,i=ms[e];return i||(console.warn(`No admonition config found for admonition type "${e}". Using Info as fallback.`),ms.info)}(i),h=s??a.label,{iconComponent:l}=a,c=n??r.createElement(l,null);return r.createElement("div",{className:(0,o.Z)(Sr.k.common.admonition,Sr.k.common.admonitionType(t.type),"alert",`alert--${a.infimaClassName}`,us)},r.createElement("div",{className:ds},r.createElement("span",{className:ps},c),h),r.createElement("div",{className:fs},e))},mermaid:i(5594).Z};function _s(t){let{children:e}=t;return r.createElement(s.Zo,{components:vs},e)}},4058:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var r=i(7896),s=i(2784),n=i(6277),a=i(8727);const o="tableOfContents_bqdL";function h(t){let{className:e,...i}=t;return s.createElement("div",{className:(0,n.Z)(o,"thin-scrollbar",e)},s.createElement(a.Z,(0,r.Z)({},i,{linkClassName:"table-of-contents__link toc-highlight",linkActiveClassName:"table-of-contents__link--active"})))}},8727:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var r=i(7896),s=i(2784),n=i(7683);function a(t){const e=t.map((t=>({...t,parentIndex:-1,children:[]}))),i=Array(7).fill(-1);e.forEach(((t,e)=>{const r=i.slice(2,t.level);t.parentIndex=Math.max(...r),i[t.level]=e}));const r=[];return e.forEach((t=>{const{parentIndex:i,...s}=t;i>=0?e[i].children.push(s):r.push(s)})),r}function o(t){let{toc:e,minHeadingLevel:i,maxHeadingLevel:r}=t;return e.flatMap((t=>{const e=o({toc:t.children,minHeadingLevel:i,maxHeadingLevel:r});return function(t){return t.level>=i&&t.level<=r}(t)?[{...t,children:e}]:e}))}function h(t){const e=t.getBoundingClientRect();return e.top===e.bottom?h(t.parentNode):e}function l(t,e){let{anchorTopOffset:i}=e;const r=t.find((t=>h(t).top>=i));if(r){return function(t){return t.top>0&&t.bottom<window.innerHeight/2}(h(r))?r:t[t.indexOf(r)-1]??null}return t[t.length-1]??null}function c(){const t=(0,s.useRef)(0),{navbar:{hideOnScroll:e}}=(0,n.L)();return(0,s.useEffect)((()=>{t.current=e?0:document.querySelector(".navbar").clientHeight}),[e]),t}function u(t){const e=(0,s.useRef)(void 0),i=c();(0,s.useEffect)((()=>{if(!t)return()=>{};const{linkClassName:r,linkActiveClassName:s,minHeadingLevel:n,maxHeadingLevel:a}=t;function o(){const t=function(t){return Array.from(document.getElementsByClassName(t))}(r),o=function(t){let{minHeadingLevel:e,maxHeadingLevel:i}=t;const r=[];for(let s=e;s<=i;s+=1)r.push(`h${s}.anchor`);return Array.from(document.querySelectorAll(r.join()))}({minHeadingLevel:n,maxHeadingLevel:a}),h=l(o,{anchorTopOffset:i.current}),c=t.find((t=>h&&h.id===function(t){return decodeURIComponent(t.href.substring(t.href.indexOf("#")+1))}(t)));t.forEach((t=>{!function(t,i){i?(e.current&&e.current!==t&&e.current.classList.remove(s),t.classList.add(s),e.current=t):t.classList.remove(s)}(t,t===c)}))}return document.addEventListener("scroll",o),document.addEventListener("resize",o),o(),()=>{document.removeEventListener("scroll",o),document.removeEventListener("resize",o)}}),[t,i])}function d(t){let{toc:e,className:i,linkClassName:r,isChild:n}=t;return e.length?s.createElement("ul",{className:n?void 0:i},e.map((t=>s.createElement("li",{key:t.id},s.createElement("a",{href:`#${t.id}`,className:r??void 0,dangerouslySetInnerHTML:{__html:t.value}}),s.createElement(d,{isChild:!0,toc:t.children,className:i,linkClassName:r}))))):null}const p=s.memo(d);function f(t){let{toc:e,className:i="table-of-contents table-of-contents__left-border",linkClassName:h="table-of-contents__link",linkActiveClassName:l,minHeadingLevel:c,maxHeadingLevel:d,...f}=t;const m=(0,n.L)(),g=c??m.tableOfContents.minHeadingLevel,y=d??m.tableOfContents.maxHeadingLevel,v=function(t){let{toc:e,minHeadingLevel:i,maxHeadingLevel:r}=t;return(0,s.useMemo)((()=>o({toc:a(e),minHeadingLevel:i,maxHeadingLevel:r})),[e,i,r])}({toc:e,minHeadingLevel:g,maxHeadingLevel:y});return u((0,s.useMemo)((()=>{if(h&&l)return{linkClassName:h,linkActiveClassName:l,minHeadingLevel:g,maxHeadingLevel:y}}),[h,l,g,y])),s.createElement(p,(0,r.Z)({toc:v,className:i,linkClassName:h},f))}},9502:t=>{"use strict";function e(t,e,r){r=r||2;var n,a,o,h,u,d,f,m=e&&e.length,g=m?e[0]*r:t.length,y=i(t,0,g,r,!0),v=[];if(!y||y.next===y.prev)return v;if(m&&(y=function(t,e,r,s){var n,a,o,h=[];for(n=0,a=e.length;n<a;n++)(o=i(t,e[n]*s,n<a-1?e[n+1]*s:t.length,s,!1))===o.next&&(o.steiner=!0),h.push(p(o));for(h.sort(l),n=0;n<h.length;n++)r=c(h[n],r);return r}(t,e,y,r)),t.length>80*r){n=o=t[0],a=h=t[1];for(var _=r;_<g;_+=r)(u=t[_])<n&&(n=u),(d=t[_+1])<a&&(a=d),u>o&&(o=u),d>h&&(h=d);f=0!==(f=Math.max(o-n,h-a))?32767/f:0}return s(y,v,r,n,a,f,0),v}function i(t,e,i,r,s){var n,a;if(s===A(t,e,i,r)>0)for(n=e;n<i;n+=r)a=T(n,t[n],t[n+1],a);else for(n=i-r;n>=e;n-=r)a=T(n,t[n],t[n+1],a);return a&&y(a,a.next)&&(w(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!y(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(w(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function s(t,e,i,l,c,u,p){if(t){!p&&u&&function(t,e,i,r){var s=t;do{0===s.z&&(s.z=d(s.x,s.y,e,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,function(t){var e,i,r,s,n,a,o,h,l=1;do{for(i=t,t=null,n=null,a=0;i;){for(a++,r=i,o=0,e=0;e<l&&(o++,r=r.nextZ);e++);for(h=l;o>0||h>0&&r;)0!==o&&(0===h||!r||i.z<=r.z)?(s=i,i=i.nextZ,o--):(s=r,r=r.nextZ,h--),n?n.nextZ=s:t=s,s.prevZ=n,n=s;i=r}n.nextZ=null,l*=2}while(a>1)}(s)}(t,l,c,u);for(var f,m,g=t;t.prev!==t.next;)if(f=t.prev,m=t.next,u?a(t,l,c,u):n(t))e.push(f.i/i|0),e.push(t.i/i|0),e.push(m.i/i|0),w(t),t=m.next,g=m.next;else if((t=m)===g){p?1===p?s(t=o(r(t),e,i),e,i,l,c,u,2):2===p&&h(t,e,i,l,c,u):s(r(t),e,i,l,c,u,1);break}}}function n(t){var e=t.prev,i=t,r=t.next;if(g(e,i,r)>=0)return!1;for(var s=e.x,n=i.x,a=r.x,o=e.y,h=i.y,l=r.y,c=s<n?s<a?s:a:n<a?n:a,u=o<h?o<l?o:l:h<l?h:l,d=s>n?s>a?s:a:n>a?n:a,p=o>h?o>l?o:l:h>l?h:l,m=r.next;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=u&&m.y<=p&&f(s,o,n,h,a,l,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function a(t,e,i,r){var s=t.prev,n=t,a=t.next;if(g(s,n,a)>=0)return!1;for(var o=s.x,h=n.x,l=a.x,c=s.y,u=n.y,p=a.y,m=o<h?o<l?o:l:h<l?h:l,y=c<u?c<p?c:p:u<p?u:p,v=o>h?o>l?o:l:h>l?h:l,_=c>u?c>p?c:p:u>p?u:p,x=d(m,y,e,i,r),b=d(v,_,e,i,r),E=t.prevZ,T=t.nextZ;E&&E.z>=x&&T&&T.z<=b;){if(E.x>=m&&E.x<=v&&E.y>=y&&E.y<=_&&E!==s&&E!==a&&f(o,c,h,u,l,p,E.x,E.y)&&g(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,T.x>=m&&T.x<=v&&T.y>=y&&T.y<=_&&T!==s&&T!==a&&f(o,c,h,u,l,p,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;E&&E.z>=x;){if(E.x>=m&&E.x<=v&&E.y>=y&&E.y<=_&&E!==s&&E!==a&&f(o,c,h,u,l,p,E.x,E.y)&&g(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;T&&T.z<=b;){if(T.x>=m&&T.x<=v&&T.y>=y&&T.y<=_&&T!==s&&T!==a&&f(o,c,h,u,l,p,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function o(t,e,i){var s=t;do{var n=s.prev,a=s.next.next;!y(n,a)&&v(n,s,s.next,a)&&b(n,a)&&b(a,n)&&(e.push(n.i/i|0),e.push(s.i/i|0),e.push(a.i/i|0),w(s),w(s.next),s=t=a),s=s.next}while(s!==t);return r(s)}function h(t,e,i,n,a,o){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&m(h,l)){var c=E(h,l);return h=r(h,h.next),c=r(c,c.next),s(h,e,i,n,a,o,0),void s(c,e,i,n,a,o,0)}l=l.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function c(t,e){var i=function(t,e){var i,r=e,s=t.x,n=t.y,a=-1/0;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var o=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=s&&o>a&&(a=o,i=r.x<r.next.x?r:r.next,o===s))return i}r=r.next}while(r!==e);if(!i)return null;var h,l=i,c=i.x,d=i.y,p=1/0;r=i;do{s>=r.x&&r.x>=c&&s!==r.x&&f(n<d?s:a,n,c,d,n<d?a:s,n,r.x,r.y)&&(h=Math.abs(n-r.y)/(s-r.x),b(r,t)&&(h<p||h===p&&(r.x>i.x||r.x===i.x&&u(i,r)))&&(i=r,p=h)),r=r.next}while(r!==l);return i}(t,e);if(!i)return e;var s=E(i,t);return r(s,s.next),r(i,i.next)}function u(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,i,r,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,r,s,n,a,o){return(s-a)*(e-o)>=(t-a)*(n-o)&&(t-a)*(r-o)>=(i-a)*(e-o)&&(i-a)*(n-o)>=(s-a)*(r-o)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&v(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var i=t,r=!1,s=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&s<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||y(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,i,r){var s=x(g(t,e,i)),n=x(g(t,e,r)),a=x(g(i,r,t)),o=x(g(i,r,e));return s!==n&&a!==o||(!(0!==s||!_(t,i,e))||(!(0!==n||!_(t,r,e))||(!(0!==a||!_(i,t,r))||!(0!==o||!_(i,e,r)))))}function _(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function E(t,e){var i=new S(t.i,t.x,t.y),r=new S(e.i,e.x,e.y),s=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=s,s.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}function T(t,e,i,r){var s=new S(t,e,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,i,r){for(var s=0,n=e,a=i-r;n<i;n+=r)s+=(t[a]-t[n])*(t[n+1]+t[a+1]),a=n;return s}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,r){var s=e&&e.length,n=s?e[0]*i:t.length,a=Math.abs(A(t,0,n,i));if(s)for(var o=0,h=e.length;o<h;o++){var l=e[o]*i,c=o<h-1?e[o+1]*i:t.length;a-=Math.abs(A(t,l,c,i))}var u=0;for(o=0;o<r.length;o+=3){var d=r[o]*i,p=r[o+1]*i,f=r[o+2]*i;u+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,s=0;s<t.length;s++){for(var n=0;n<t[s].length;n++)for(var a=0;a<e;a++)i.vertices.push(t[s][n][a]);s>0&&(r+=t[s-1].length,i.holes.push(r))}return i}},161:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function r(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function n(t,e,r,n,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,n||t,a),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,r,s=[];if(0===this._eventsCount)return s;for(r in t=this._events)e.call(t,r)&&s.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(t)):s},o.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,n=r.length,a=new Array(n);s<n;s++)a[s]=r[s].fn;return a},o.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,s,n,a){var o=i?i+t:t;if(!this._events[o])return!1;var h,l,c=this._events[o],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,s),!0;case 5:return c.fn.call(c.context,e,r,s,n),!0;case 6:return c.fn.call(c.context,e,r,s,n,a),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var d,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,r);break;case 4:c[l].fn.call(c[l].context,e,r,s);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];c[l].fn.apply(c[l].context,h)}}return!0},o.prototype.on=function(t,e,i){return n(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return n(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,r,s){var n=i?i+t:t;if(!this._events[n])return this;if(!e)return a(this,n),this;var o=this._events[n];if(o.fn)o.fn!==e||s&&!o.once||r&&o.context!==r||a(this,n);else{for(var h=0,l=[],c=o.length;h<c;h++)(o[h].fn!==e||s&&!o[h].once||r&&o[h].context!==r)&&l.push(o[h]);l.length?this._events[n]=1===l.length?l[0]:l:a(this,n)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o},2185:t=>{var e=1/0,i=NaN,r=4294967295,s=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,h=parseInt;var l=Object.prototype.toString,c=Math.min;function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function d(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==l.call(t)}(t))return i;if(u(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=u(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var r=a.test(t);return r||o.test(t)?h(t.slice(2),r?2:8):n.test(t)?i:+t}(t))===e||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function p(t){return t}t.exports=function(t,e){if((t=function(t){var e=d(t),i=e%1;return e==e?i?e-i:e:0}(t))<1||t>9007199254740991)return[];var i=r,s=c(t,r);t-=r;for(var n=function(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}(s,e="function"==typeof e?e:p);++i<t;)e(i);return n}},4501:(t,e)=>{function i(t){let e,i=[];for(let r of t.split(",").map((t=>t.trim())))if(/^-?\d+$/.test(r))i.push(parseInt(r,10));else if(e=r.match(/^(-?\d+)(-|\.\.\.?|\u2025|\u2026|\u22EF)(-?\d+)$/)){let[t,r,s,n]=e;if(r&&n){r=parseInt(r),n=parseInt(n);const t=r<n?1:-1;"-"!==s&&".."!==s&&"\u2025"!==s||(n+=t);for(let e=r;e!==n;e+=t)i.push(e)}}return i}e.default=i,t.exports=i},2808:t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,i,r,s){i=i||"&",r=r||"=";var n={};if("string"!=typeof t||0===t.length)return n;var a=/\+/g;t=t.split(i);var o=1e3;s&&"number"==typeof s.maxKeys&&(o=s.maxKeys);var h=t.length;o>0&&h>o&&(h=o);for(var l=0;l<h;++l){var c,u,d,p,f=t[l].replace(a,"%20"),m=f.indexOf(r);m>=0?(c=f.substr(0,m),u=f.substr(m+1)):(c=f,u=""),d=decodeURIComponent(c),p=decodeURIComponent(u),e(n,d)?Array.isArray(n[d])?n[d].push(p):n[d]=[n[d],p]:n[d]=p}return n}},1368:t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,i,r,s){return i=i||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(s){var n=encodeURIComponent(e(s))+r;return Array.isArray(t[s])?t[s].map((function(t){return n+encodeURIComponent(e(t))})).join(i):n+encodeURIComponent(e(t[s]))})).join(i):s?encodeURIComponent(e(s))+r+encodeURIComponent(e(t)):""}},6642:(t,e,i)=>{"use strict";e.decode=e.parse=i(2808),e.encode=e.stringify=i(1368)},9144:(t,e,i)=>{i(9193),t.exports=i(3617).Object.assign},7155:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},97:(t,e,i)=>{var r=i(6233);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},4071:(t,e,i)=>{var r=i(7124),s=i(3176),n=i(2310);t.exports=function(t){return function(e,i,a){var o,h=r(e),l=s(h.length),c=n(a,l);if(t&&i!=i){for(;l>c;)if((o=h[c++])!=o)return!0}else for(;l>c;c++)if((t||c in h)&&h[c]===i)return t||c||0;return!t&&-1}}},6829:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},3617:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},4413:(t,e,i)=>{var r=i(7155);t.exports=function(t,e,i){if(r(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,s){return t.call(e,i,r,s)}}return function(){return t.apply(e,arguments)}}},8798:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},6268:(t,e,i)=>{t.exports=!i(1969)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},8674:(t,e,i)=>{var r=i(6233),s=i(5250).document,n=r(s)&&r(s.createElement);t.exports=function(t){return n?s.createElement(t):{}}},4820:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},2736:(t,e,i)=>{var r=i(5250),s=i(3617),n=i(3428),a=i(9489),o=i(4413),h="prototype",l=function(t,e,i){var c,u,d,p,f=t&l.F,m=t&l.G,g=t&l.S,y=t&l.P,v=t&l.B,_=m?r:g?r[e]||(r[e]={}):(r[e]||{})[h],x=m?s:s[e]||(s[e]={}),b=x[h]||(x[h]={});for(c in m&&(i=e),i)d=((u=!f&&_&&void 0!==_[c])?_:i)[c],p=v&&u?o(d,r):y&&"function"==typeof d?o(Function.call,d):d,_&&a(_,c,d,t&l.U),x[c]!=d&&n(x,c,p),y&&b[c]!=d&&(b[c]=d)};r.core=s,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},1969:t=>{t.exports=function(t){try{return!!t()}catch(e){return!0}}},4894:(t,e,i)=>{t.exports=i(6285)("native-function-to-string",Function.toString)},5250:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},483:t=>{var e={}.hasOwnProperty;t.exports=function(t,i){return e.call(t,i)}},3428:(t,e,i)=>{var r=i(2665),s=i(6631);t.exports=i(6268)?function(t,e,i){return r.f(t,e,s(1,i))}:function(t,e,i){return t[e]=i,t}},1864:(t,e,i)=>{t.exports=!i(6268)&&!i(1969)((function(){return 7!=Object.defineProperty(i(8674)("div"),"a",{get:function(){return 7}}).a}))},8275:(t,e,i)=>{var r=i(6829);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},6233:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},4266:t=>{t.exports=!1},4040:(t,e,i)=>{"use strict";var r=i(6268),s=i(3804),n=i(7020),a=i(8158),o=i(7684),h=i(8275),l=Object.assign;t.exports=!l||i(1969)((function(){var t={},e={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach((function(t){e[t]=t})),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=r}))?function(t,e){for(var i=o(t),l=arguments.length,c=1,u=n.f,d=a.f;l>c;)for(var p,f=h(arguments[c++]),m=u?s(f).concat(u(f)):s(f),g=m.length,y=0;g>y;)p=m[y++],r&&!d.call(f,p)||(i[p]=f[p]);return i}:l},2665:(t,e,i)=>{var r=i(97),s=i(1864),n=i(2190),a=Object.defineProperty;e.f=i(6268)?Object.defineProperty:function(t,e,i){if(r(t),e=n(e,!0),r(i),s)try{return a(t,e,i)}catch(o){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},7020:(t,e)=>{e.f=Object.getOwnPropertySymbols},7979:(t,e,i)=>{var r=i(483),s=i(7124),n=i(4071)(!1),a=i(9249)("IE_PROTO");t.exports=function(t,e){var i,o=s(t),h=0,l=[];for(i in o)i!=a&&r(o,i)&&l.push(i);for(;e.length>h;)r(o,i=e[h++])&&(~n(l,i)||l.push(i));return l}},3804:(t,e,i)=>{var r=i(7979),s=i(4820);t.exports=Object.keys||function(t){return r(t,s)}},8158:(t,e)=>{e.f={}.propertyIsEnumerable},6631:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9489:(t,e,i)=>{var r=i(5250),s=i(3428),n=i(483),a=i(7488)("src"),o=i(4894),h="toString",l=(""+o).split(h);i(3617).inspectSource=function(t){return o.call(t)},(t.exports=function(t,e,i,o){var h="function"==typeof i;h&&(n(i,"name")||s(i,"name",e)),t[e]!==i&&(h&&(n(i,a)||s(i,a,t[e]?""+t[e]:l.join(String(e)))),t===r?t[e]=i:o?t[e]?t[e]=i:s(t,e,i):(delete t[e],s(t,e,i)))})(Function.prototype,h,(function(){return"function"==typeof this&&this[a]||o.call(this)}))},9249:(t,e,i)=>{var r=i(6285)("keys"),s=i(7488);t.exports=function(t){return r[t]||(r[t]=s(t))}},6285:(t,e,i)=>{var r=i(3617),s=i(5250),n="__core-js_shared__",a=s[n]||(s[n]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:i(4266)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},2310:(t,e,i)=>{var r=i(4425),s=Math.max,n=Math.min;t.exports=function(t,e){return(t=r(t))<0?s(t+e,0):n(t,e)}},4425:t=>{var e=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:e)(t)}},7124:(t,e,i)=>{var r=i(8275),s=i(8798);t.exports=function(t){return r(s(t))}},3176:(t,e,i)=>{var r=i(4425),s=Math.min;t.exports=function(t){return t>0?s(r(t),9007199254740991):0}},7684:(t,e,i)=>{var r=i(8798);t.exports=function(t){return Object(r(t))}},2190:(t,e,i)=>{var r=i(6233);t.exports=function(t,e){if(!r(t))return t;var i,s;if(e&&"function"==typeof(i=t.toString)&&!r(s=i.call(t)))return s;if("function"==typeof(i=t.valueOf)&&!r(s=i.call(t)))return s;if(!e&&"function"==typeof(i=t.toString)&&!r(s=i.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},7488:t=>{var e=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+i).toString(36))}},9193:(t,e,i)=>{var r=i(2736);r(r.S+r.F,"Object",{assign:i(4040)})},4883:(t,e,i)=>{"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(2784));function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h=90,l=219,c=222,u=192,d=100,p=3e3,f="navigator"in i.g&&/Win/i.test(navigator.platform),m="navigator"in i.g&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),g="npm__react-simple-code-editor__textarea",y="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n."+g+":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  ."+g+" {\n    color: transparent !important;\n  }\n\n  ."+g+"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n",v=function(t){function e(){var t,i,s;a(this,e);for(var n=arguments.length,g=Array(n),y=0;y<n;y++)g[y]=arguments[y];return i=s=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(g))),s.state={capture:!0},s._recordCurrentState=function(){var t=s._input;if(t){var e=t.value,i=t.selectionStart,r=t.selectionEnd;s._recordChange({value:e,selectionStart:i,selectionEnd:r})}},s._getLines=function(t,e){return t.substring(0,e).split("\n")},s._recordChange=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=s._history,n=i.stack,a=i.offset;if(n.length&&a>-1){s._history.stack=n.slice(0,a+1);var o=s._history.stack.length;if(o>d){var h=o-d;s._history.stack=n.slice(h,o),s._history.offset=Math.max(s._history.offset-h,0)}}var l=Date.now();if(e){var c=s._history.stack[s._history.offset];if(c&&l-c.timestamp<p){var u=/[^a-z0-9]([a-z0-9]+)$/i,f=s._getLines(c.value,c.selectionStart).pop().match(u),m=s._getLines(t.value,t.selectionStart).pop().match(u);if(f&&m&&m[1].startsWith(f[1]))return void(s._history.stack[s._history.offset]=r({},t,{timestamp:l}))}}s._history.stack.push(r({},t,{timestamp:l})),s._history.offset++},s._updateInput=function(t){var e=s._input;e&&(e.value=t.value,e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd,s.props.onValueChange(t.value))},s._applyEdits=function(t){var e=s._input,i=s._history.stack[s._history.offset];i&&e&&(s._history.stack[s._history.offset]=r({},i,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),s._recordChange(t),s._updateInput(t)},s._undoEdit=function(){var t=s._history,e=t.stack,i=t.offset,r=e[i-1];r&&(s._updateInput(r),s._history.offset=Math.max(i-1,0))},s._redoEdit=function(){var t=s._history,e=t.stack,i=t.offset,r=e[i+1];r&&(s._updateInput(r),s._history.offset=Math.min(i+1,e.length-1))},s._handleKeyDown=function(t){var e=s.props,i=e.tabSize,r=e.insertSpaces,n=e.ignoreTabKey,a=e.onKeyDown;if(!a||(a(t),!t.defaultPrevented)){27===t.keyCode&&t.target.blur();var o=t.target,d=o.value,p=o.selectionStart,g=o.selectionEnd,y=(r?" ":"\t").repeat(i);if(9===t.keyCode&&!n&&s.state.capture)if(t.preventDefault(),t.shiftKey){var v=s._getLines(d,p),_=v.length-1,x=s._getLines(d,g).length-1,b=d.split("\n").map((function(t,e){return e>=_&&e<=x&&t.startsWith(y)?t.substring(y.length):t})).join("\n");if(d!==b){var E=v[_];s._applyEdits({value:b,selectionStart:E.startsWith(y)?p-y.length:p,selectionEnd:g-(d.length-b.length)})}}else if(p!==g){var T=s._getLines(d,p),w=T.length-1,S=s._getLines(d,g).length-1,A=T[w];s._applyEdits({value:d.split("\n").map((function(t,e){return e>=w&&e<=S?y+t:t})).join("\n"),selectionStart:/\S/.test(A)?p+y.length:p,selectionEnd:g+y.length*(S-w+1)})}else{var C=p+y.length;s._applyEdits({value:d.substring(0,p)+y+d.substring(g),selectionStart:C,selectionEnd:C})}else if(8===t.keyCode){var I=p!==g;if(d.substring(0,p).endsWith(y)&&!I){t.preventDefault();var R=p-y.length;s._applyEdits({value:d.substring(0,p-y.length)+d.substring(g),selectionStart:R,selectionEnd:R})}}else if(13===t.keyCode){if(p===g){var P=s._getLines(d,p).pop().match(/^\s+/);if(P&&P[0]){t.preventDefault();var k="\n"+P[0],M=p+k.length;s._applyEdits({value:d.substring(0,p)+k+d.substring(g),selectionStart:M,selectionEnd:M})}}}else if(57===t.keyCode||t.keyCode===l||t.keyCode===c||t.keyCode===u){var N=void 0;57===t.keyCode&&t.shiftKey?N=["(",")"]:t.keyCode===l?N=t.shiftKey?["{","}"]:["[","]"]:t.keyCode===c?N=t.shiftKey?['"','"']:["'","'"]:t.keyCode!==u||t.shiftKey||(N=["`","`"]),p!==g&&N&&(t.preventDefault(),s._applyEdits({value:d.substring(0,p)+N[0]+d.substring(p,g)+N[1]+d.substring(g),selectionStart:p,selectionEnd:g+2}))}else!(m?t.metaKey&&t.keyCode===h:t.ctrlKey&&t.keyCode===h)||t.shiftKey||t.altKey?(m?t.metaKey&&t.keyCode===h&&t.shiftKey:f?t.ctrlKey&&89===t.keyCode:t.ctrlKey&&t.keyCode===h&&t.shiftKey)&&!t.altKey?(t.preventDefault(),s._redoEdit()):77!==t.keyCode||!t.ctrlKey||m&&!t.shiftKey||(t.preventDefault(),s.setState((function(t){return{capture:!t.capture}}))):(t.preventDefault(),s._undoEdit())}},s._handleChange=function(t){var e=t.target,i=e.value,r=e.selectionStart,n=e.selectionEnd;s._recordChange({value:i,selectionStart:r,selectionEnd:n},!0),s.props.onValueChange(i)},s._history={stack:[],offset:-1},o(s,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),s(e,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var t=this,e=this.props,i=e.value,s=e.style,a=e.padding,o=e.highlight,h=e.textareaId,l=e.autoFocus,c=e.disabled,u=e.form,d=e.maxLength,p=e.minLength,f=e.name,m=e.placeholder,v=e.readOnly,x=e.required,b=e.onClick,E=e.onFocus,T=e.onBlur,w=e.onKeyUp,S=(e.onKeyDown,e.onValueChange,e.tabSize,e.insertSpaces,e.ignoreTabKey,function(t,e){var i={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}(e,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"])),A={paddingTop:a,paddingRight:a,paddingBottom:a,paddingLeft:a},C=o(i);return n.createElement("div",r({},S,{style:r({},_.container,s)}),n.createElement("textarea",{ref:function(e){return t._input=e},style:r({},_.editor,_.textarea,A),className:g,id:h,value:i,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:b,onKeyUp:w,onFocus:E,onBlur:T,disabled:c,form:u,maxLength:d,minLength:p,name:f,placeholder:m,readOnly:v,required:x,autoFocus:l,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),n.createElement("pre",r({"aria-hidden":"true",style:r({},_.editor,_.highlight,A)},"string"==typeof C?{dangerouslySetInnerHTML:{__html:C+"<br />"}}:{children:C})),n.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:y}}))}},{key:"session",get:function(){return{history:this._history}},set:function(t){this._history=t.history}}]),e}(n.Component);v.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},e.Z=v;var _={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}}},2706:(t,e,i)=>{"use strict";var r=i(5868);i.o(r,"Spring")&&i.d(e,{Spring:function(){return r.Spring}})},9639:function(t,e,i){var r;t=i.nmd(t),function(s){e&&e.nodeType,t&&t.nodeType;var n="object"==typeof i.g&&i.g;n.global!==n&&n.window!==n&&n.self;var a,o=2147483647,h=36,l=/^xn--/,c=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw RangeError(d[t])}function g(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function y(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+g((t=t.replace(u,".")).split("."),e).join(".")}function v(t){for(var e,i,r=[],s=0,n=t.length;s<n;)(e=t.charCodeAt(s++))>=55296&&e<=56319&&s<n?56320==(64512&(i=t.charCodeAt(s++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),s--):r.push(e);return r}function _(t){return g(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function b(t,e,i){var r=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;r+=h)t=p(t/35);return p(r+36*t/(t+38))}function E(t){var e,i,r,s,n,a,l,c,u,d,f,g=[],y=t.length,v=0,x=128,E=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&m("not-basic"),g.push(t.charCodeAt(r));for(s=i>0?i+1:0;s<y;){for(n=v,a=1,l=h;s>=y&&m("invalid-input"),((c=(f=t.charCodeAt(s++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:h)>=h||c>p((o-v)/a))&&m("overflow"),v+=c*a,!(c<(u=l<=E?1:l>=E+26?26:l-E));l+=h)a>p(o/(d=h-u))&&m("overflow"),a*=d;E=b(v-n,e=g.length+1,0==n),p(v/e)>o-x&&m("overflow"),x+=p(v/e),v%=e,g.splice(v++,0,x)}return _(g)}function T(t){var e,i,r,s,n,a,l,c,u,d,g,y,_,E,T,w=[];for(y=(t=v(t)).length,e=128,i=0,n=72,a=0;a<y;++a)(g=t[a])<128&&w.push(f(g));for(r=s=w.length,s&&w.push("-");r<y;){for(l=o,a=0;a<y;++a)(g=t[a])>=e&&g<l&&(l=g);for(l-e>p((o-i)/(_=r+1))&&m("overflow"),i+=(l-e)*_,e=l,a=0;a<y;++a)if((g=t[a])<e&&++i>o&&m("overflow"),g==e){for(c=i,u=h;!(c<(d=u<=n?1:u>=n+26?26:u-n));u+=h)T=c-d,E=h-d,w.push(f(x(d+T%E,0))),c=p(T/E);w.push(f(x(c,0))),n=b(i,_,r==s),i=0,++r}++i,++e}return w.join("")}a={version:"1.3.2",ucs2:{decode:v,encode:_},decode:E,encode:T,toASCII:function(t){return y(t,(function(t){return c.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return y(t,(function(t){return l.test(t)?E(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,i,e,t))||(t.exports=r)}()},883:(t,e,i)=>{"use strict";var r=i(9639),s=i(5225);function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.Qc=_,e.DB=function(t,e){return _(t,!1,!0).resolve(e)},e.WU=function(t){s.isString(t)&&(t=_(t));return t instanceof n?t.format():n.prototype.format.call(t)};var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),u=["%","/","?",";","#"].concat(c),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=i(6642);function _(t,e,i){if(t&&s.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}n.prototype.parse=function(t,e,i){if(!s.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),o=-1!==n&&n<t.indexOf("#")?"?":"#",l=t.split(o);l[0]=l[0].replace(/\\/g,"/");var _=t=l.join(o);if(_=_.trim(),!i&&1===t.split("#").length){var x=h.exec(_);if(x)return this.path=_,this.href=_,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=a.exec(_);if(b){var E=(b=b[0]).toLowerCase();this.protocol=E,_=_.substr(b.length)}if(i||b||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===_.substr(0,2);!T||b&&g[b]||(_=_.substr(2),this.slashes=!0)}if(!g[b]&&(T||b&&!y[b])){for(var w,S,A=-1,C=0;C<d.length;C++){-1!==(I=_.indexOf(d[C]))&&(-1===A||I<A)&&(A=I)}-1!==(S=-1===A?_.lastIndexOf("@"):_.lastIndexOf("@",A))&&(w=_.slice(0,S),_=_.slice(S+1),this.auth=decodeURIComponent(w)),A=-1;for(C=0;C<u.length;C++){var I;-1!==(I=_.indexOf(u[C]))&&(-1===A||I<A)&&(A=I)}-1===A&&(A=_.length),this.host=_.slice(0,A),_=_.slice(A),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var P=this.hostname.split(/\./),k=(C=0,P.length);C<k;C++){var M=P[C];if(M&&!M.match(p)){for(var N="",O=0,D=M.length;O<D;O++)M.charCodeAt(O)>127?N+="x":N+=M[O];if(!N.match(p)){var L=P.slice(0,C),B=P.slice(C+1),F=M.match(f);F&&(L.push(F[1]),B.unshift(F[2])),B.length&&(_="/"+B.join(".")+_),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+U,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!m[E])for(C=0,k=c.length;C<k;C++){var G=c[C];if(-1!==_.indexOf(G)){var V=encodeURIComponent(G);V===G&&(V=escape(G)),_=_.split(G).join(V)}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var z=_.indexOf("?");if(-1!==z?(this.search=_.substr(z),this.query=_.substr(z+1),e&&(this.query=v.parse(this.query)),_=_.slice(0,z)):e&&(this.search="",this.query={}),_&&(this.pathname=_),y[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var X=this.search||"";this.path=U+X}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,a="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var o=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==n?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),e+n+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+r},n.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(s.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),a=0;a<r.length;a++){var o=r[a];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var c=h[l];"protocol"!==c&&(i[c]=t[c])}return y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!y[t.protocol]){for(var u=Object.keys(t),d=0;d<u.length;d++){var p=u[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||g[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",v=i.search||"";i.path=m+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=x||_||i.host&&t.pathname,E=b,T=i.pathname&&i.pathname.split("/")||[],w=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!y[i.protocol]);if(w&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),b=b&&(""===f[0]||""===T[0])),x)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),i.search=t.search,i.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(w)i.hostname=i.host=T.shift(),(R=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=R.shift(),i.host=i.hostname=R.shift());return i.search=t.search,i.query=t.query,s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=T.slice(-1)[0],A=(i.host||t.host||T.length>1)&&("."===S||".."===S)||""===S,C=0,I=T.length;I>=0;I--)"."===(S=T[I])?T.splice(I,1):".."===S?(T.splice(I,1),C++):C&&(T.splice(I,1),C--);if(!b&&!E)for(;C--;C)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),A&&"/"!==T.join("/").substr(-1)&&T.push("");var R,P=""===T[0]||T[0]&&"/"===T[0].charAt(0);w&&(i.hostname=i.host=P?"":T.length?T.shift():"",(R=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=R.shift(),i.host=i.hostname=R.shift()));return(b=b||i.host&&T.length)&&!P&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},5225:t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},3905:(t,e,i)=>{"use strict";i.d(e,{Zo:()=>c,kt:()=>f});var r=i(2784);function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function o(t,e){if(null==t)return{};var i,r,s=function(t,e){if(null==t)return{};var i,r,s={},n=Object.keys(t);for(r=0;r<n.length;r++)i=n[r],e.indexOf(i)>=0||(s[i]=t[i]);return s}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)i=n[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}var h=r.createContext({}),l=function(t){var e=r.useContext(h),i=e;return t&&(i="function"==typeof t?t(e):a(a({},e),t)),i},c=function(t){var e=l(t.components);return r.createElement(h.Provider,{value:e},t.children)},u="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},p=r.forwardRef((function(t,e){var i=t.components,s=t.mdxType,n=t.originalType,h=t.parentName,c=o(t,["components","mdxType","originalType","parentName"]),u=l(i),p=s,f=u["".concat(h,".").concat(p)]||u[p]||d[p]||n;return i?r.createElement(f,a(a({ref:e},c),{},{components:i})):r.createElement(f,a({ref:e},c))}));function f(t,e){var i=arguments,s=e&&e.mdxType;if("string"==typeof t||s){var n=i.length,a=new Array(n);a[0]=p;var o={};for(var h in e)hasOwnProperty.call(e,h)&&(o[h]=e[h]);o.originalType=t,o[u]="string"==typeof t?t:s,a[1]=o;for(var l=2;l<n;l++)a[l]=i[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,i)}p.displayName="MDXCreateElement"},6091:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ALPHA_MODES:()=>g,AbstractMultiResource:()=>Vr,AccessibilityManager:()=>Ns,AlphaFilter:()=>ds,AnimatedSprite:()=>Oo,Application:()=>Ds,ArrayResource:()=>Hr,Assets:()=>gn,AssetsClass:()=>mn,Attribute:()=>ae,BLEND_MODES:()=>o,BUFFER_BITS:()=>a,BUFFER_TYPE:()=>T,BackgroundSystem:()=>li,BaseImageResource:()=>gi,BasePrepare:()=>Io,BaseRenderTexture:()=>mi,BaseTexture:()=>ie,BatchDrawCall:()=>re,BatchGeometry:()=>de,BatchRenderer:()=>ai,BatchShaderGenerator:()=>ii,BatchSystem:()=>ci,BatchTextureArray:()=>ri,BitmapFont:()=>eh,BitmapFontData:()=>Xo,BitmapText:()=>ah,BlobResource:()=>Rn,BlurFilter:()=>gs,BlurFilterPass:()=>ms,Bounds:()=>ts,BrowserAdapter:()=>w,Buffer:()=>ne,BufferResource:()=>Jt,BufferSystem:()=>Fr,CLEAR_MODES:()=>y,COLOR_MASK_BITS:()=>b,Cache:()=>Gs,CanvasResource:()=>zr,Circle:()=>xe,ColorMatrixFilter:()=>ys,CompressedTextureResource:()=>Pn,Container:()=>as,ContextSystem:()=>di,CountLimiter:()=>_o,CubeResource:()=>Wr,DEG_TO_RAD:()=>me,DRAW_MODES:()=>h,DisplacementFilter:()=>vs,DisplayObject:()=>es,ENV:()=>s,Ellipse:()=>be,EventBoundary:()=>Is,EventSystem:()=>Ps,ExtensionType:()=>jt,Extract:()=>da,FORMATS:()=>l,FORMATS_TO_COMPONENTS:()=>ra,FXAAFilter:()=>_s,FederatedDisplayObject:()=>ks,FederatedEvent:()=>Es,FederatedMouseEvent:()=>Ts,FederatedPointerEvent:()=>ws,FederatedWheelEvent:()=>Ss,FillStyle:()=>La,Filter:()=>hi,FilterState:()=>Ai,FilterSystem:()=>Ri,Framebuffer:()=>fi,FramebufferSystem:()=>Mi,GC_MODES:()=>v,GLFramebuffer:()=>Pi,GLProgram:()=>tr,GLTexture:()=>Tr,GRAPHICS_CURVES:()=>ba,GenerateTextureSystem:()=>qi,Geometry:()=>ue,GeometrySystem:()=>Oi,Graphics:()=>Ga,GraphicsData:()=>ka,GraphicsGeometry:()=>Da,IGLUniformData:()=>Ji,INSTALLED:()=>qt,INTERNAL_FORMATS:()=>Tn,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:()=>wn,ImageBitmapResource:()=>$r,ImageResource:()=>yi,LINE_CAP:()=>_a,LINE_JOIN:()=>va,LineStyle:()=>Ba,LoaderParserPriority:()=>zs,MASK_TYPES:()=>x,MIPMAP_MODES:()=>m,MSAA_QUALITY:()=>E,MaskData:()=>Fi,MaskSystem:()=>Ui,Matrix:()=>we,Mesh:()=>$a,MeshBatchUvs:()=>Ha,MeshGeometry:()=>Ya,MeshMaterial:()=>qa,MultisampleSystem:()=>Lr,NineSlicePlane:()=>Ja,NoiseFilter:()=>xs,ObjectRenderer:()=>si,ObjectRendererSystem:()=>Ur,ObservablePoint:()=>Ne,PI_2:()=>pe,PRECISION:()=>_,ParticleContainer:()=>io,ParticleRenderer:()=>so,PlaneGeometry:()=>Za,PluginSystem:()=>Wi,Point:()=>ye,Polygon:()=>Ee,Prepare:()=>Mo,Program:()=>Qe,ProjectionSystem:()=>$i,Quad:()=>wi,QuadUv:()=>Si,RAD_TO_DEG:()=>fe,RENDERER_TYPE:()=>n,Rectangle:()=>_e,RenderTexture:()=>Ei,RenderTexturePool:()=>Ti,RenderTextureSystem:()=>Qi,Renderer:()=>Gr,ResizePlugin:()=>Ls,Resource:()=>Qt,RopeGeometry:()=>Ka,RoundedRectangle:()=>Te,Runner:()=>Kt,SAMPLER_TYPES:()=>d,SCALE_MODES:()=>p,SHAPES:()=>ge,SVGResource:()=>qr,ScissorSystem:()=>zi,Shader:()=>ei,ShaderSystem:()=>gr,SimpleMesh:()=>to,SimplePlane:()=>Qa,SimpleRope:()=>eo,Sprite:()=>ls,SpriteMaskFilter:()=>Bi,Spritesheet:()=>Go,StartupSystem:()=>yr,State:()=>Yt,StateSystem:()=>_r,StencilSystem:()=>Xi,SystemManager:()=>xr,TARGETS:()=>c,TEXT_GRADIENT:()=>no,TYPES:()=>u,TYPES_TO_BYTES_PER_COMPONENT:()=>ia,TYPES_TO_BYTES_PER_PIXEL:()=>sa,TemporaryDisplayObject:()=>is,Text:()=>vo,TextFormat:()=>Wo,TextMetrics:()=>ho,TextStyle:()=>uo,Texture:()=>bi,TextureGCSystem:()=>Er,TextureMatrix:()=>Li,TextureSystem:()=>wr,TextureUvs:()=>vi,Ticker:()=>Pr,TickerPlugin:()=>kr,TilingSprite:()=>Lo,TilingSpriteRenderer:()=>Uo,TimeLimiter:()=>No,Transform:()=>De,TransformFeedback:()=>Qr,TransformFeedbackSystem:()=>Sr,UPDATE_PRIORITY:()=>Cr,UniformGroup:()=>ti,VERSION:()=>Jr,VideoResource:()=>Kr,ViewSystem:()=>Ar,ViewableBuffer:()=>zt,WRAP_MODES:()=>f,XMLFormat:()=>$o,XMLStringFormat:()=>Yo,accessibleTarget:()=>Ms,autoDetectFormat:()=>Zo,autoDetectRenderer:()=>Nr,autoDetectResource:()=>Zt,cacheTextureArray:()=>yn,checkDataUrl:()=>$s,checkExtension:()=>Us,checkMaxIfStatementsInShader:()=>$t,convertToList:()=>js,createStringVariations:()=>pn,createTexture:()=>an,createUBOElements:()=>lr,curves:()=>xa,defaultFilterVertex:()=>Dr,defaultVertex:()=>Or,detectAvif:()=>vn,detectCompressedTextures:()=>In,detectDefaults:()=>bn,detectWebp:()=>_n,extensions:()=>Ht,filters:()=>bs,generateProgram:()=>nr,generateUniformBufferSync:()=>ur,getFontFamilyName:()=>Ks,getTestContext:()=>Ve,getUBOData:()=>cr,graphicsUtils:()=>Va,groupD8:()=>Me,isMobile:()=>V,isSingleItem:()=>Vs,loadBitmapFont:()=>hh,loadDDS:()=>oa,loadImageBitmap:()=>ln,loadJson:()=>Xs,loadKTX:()=>ha,loadSVG:()=>un,loadTextures:()=>cn,loadTxt:()=>Ws,loadWebFont:()=>Qs,parseDDS:()=>Hn,parseKTX:()=>na,resolveCompressedTextureUrl:()=>la,resolveTextureUrl:()=>En,settings:()=>S,spritesheetAsset:()=>zo,uniformParsers:()=>Le,unsafeEvalSupported:()=>pr,utils:()=>r});var r={};i.r(r),i.d(r,{BaseTextureCache:()=>It,BoundingBox:()=>St,CanvasRenderTarget:()=>kt,DATA_URI:()=>dt,EventEmitter:()=>H,ProgramCache:()=>At,TextureCache:()=>Ct,clearTextureCache:()=>Pt,correctBlendMode:()=>ht,createIndicesForQuads:()=>pt,decomposeDataUri:()=>Lt,deprecation:()=>K,destroyTextureCache:()=>Rt,determineCrossOrigin:()=>Ft,earcut:()=>z,getBufferType:()=>ft,getCanvasBoundingBox:()=>Ot,getResolutionOfUrl:()=>Ut,hex2rgb:()=>rt,hex2string:()=>st,interleaveTypedArrays:()=>gt,isMobile:()=>V,isPow2:()=>vt,isWebGLSupported:()=>et,log2:()=>_t,nextPow2:()=>yt,path:()=>q,premultiplyBlendMode:()=>ot,premultiplyRgba:()=>lt,premultiplyTint:()=>ct,premultiplyTintToRgba:()=>ut,removeItems:()=>xt,rgb2hex:()=>at,sayHello:()=>J,sign:()=>bt,skipHello:()=>Q,string2hex:()=>nt,trimCanvas:()=>Dt,uid:()=>Tt,url:()=>W});var s=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(s||{}),n=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(n||{}),a=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(a||{}),o=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(o||{}),h=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(h||{}),l=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(l||{}),c=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(c||{}),u=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(u||{}),d=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(d||{}),p=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(p||{}),f=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(f||{}),m=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(m||{}),g=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(g||{}),y=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(y||{}),v=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(v||{}),_=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(_||{}),x=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(x||{}),b=(t=>(t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t))(b||{}),E=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(E||{}),T=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(T||{});const w={createCanvas:(t,e)=>{const i=document.createElement("canvas");return i.width=t,i.height=e,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")},S={ADAPTER:w,RESOLUTION:1,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,premultipliedAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var A=/iPhone/i,C=/iPod/i,I=/iPad/i,R=/\biOS-universal(?:.+)Mac\b/i,P=/\bAndroid(?:.+)Mobile\b/i,k=/Android/i,M=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,N=/Silk/i,O=/Windows Phone/i,D=/\bWindows(?:.+)ARM\b/i,L=/BlackBerry/i,B=/BB10/i,F=/Opera Mini/i,U=/\b(CriOS|Chrome)(?:.+)Mobile/i,j=/Mobile(?:.+)Firefox\b/i,G=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};const V=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,r=i.split("[FBAN");void 0!==r[1]&&(i=r[0]),void 0!==(r=i.split("Twitter"))[1]&&(i=r[0]);var s=function(t){return function(e){return e.test(t)}}(i),n={apple:{phone:s(A)&&!s(O),ipod:s(C),tablet:!s(A)&&(s(I)||G(e))&&!s(O),universal:s(R),device:(s(A)||s(C)||s(I)||s(R)||G(e))&&!s(O)},amazon:{phone:s(M),tablet:!s(M)&&s(N),device:s(M)||s(N)},android:{phone:!s(O)&&s(M)||!s(O)&&s(P),tablet:!s(O)&&!s(M)&&!s(P)&&(s(N)||s(k)),device:!s(O)&&(s(M)||s(N)||s(P)||s(k))||s(/\bokhttp\b/i)},windows:{phone:s(O),tablet:s(D),device:s(O)||s(D)},other:{blackberry:s(L),blackberry10:s(B),opera:s(F),firefox:s(j),chrome:s(U),device:s(L)||s(B)||s(F)||s(j)||s(U)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}(globalThis.navigator);S.RETINA_PREFIX=/@([0-9\.]+)x/,S.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var H=i(161),z=i(9502),X=i(883);const W={parse:X.Qc,format:X.WU,resolve:X.DB};function $(t){if("string"!=typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Y(t){return t.split("?")[0].split("#")[0]}const q={toPosix(t){return e="\\",i="/",t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i);var e,i},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){$(t),t=this.toPosix(t);let e="";const i=/^file:\/\/\//.exec(t),r=/^[^/:]+:\/\//.exec(t),s=/^[^/:]+:\//.exec(t);if(i||r||s){const n=i?.[0]||r?.[0]||s?.[0];e=n,t=t.slice(n.length)}return e},toAbsolute(t,e,i){if(this.isDataUrl(t))return t;const r=Y(this.toPosix(e??S.ADAPTER.getBaseUrl())),s=Y(this.toPosix(i??this.rootname(r)));if($(t),(t=this.toPosix(t)).startsWith("/"))return q.join(s,t.slice(1));return this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if($(t=this.toPosix(t)),0===t.length)return".";let e="";const i=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return(t=function(t,e){let i="",r=0,s=-1,n=0,a=-1;for(let o=0;o<=t.length;++o){if(o<t.length)a=t.charCodeAt(o);else{if(47===a)break;a=47}if(47===a){if(s===o-1||1===n);else if(s!==o-1&&2===n){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){const t=i.lastIndexOf("/");if(t!==i.length-1){-1===t?(i="",r=0):(i=i.slice(0,t),r=i.length-1-i.lastIndexOf("/")),s=o,n=0;continue}}else if(2===i.length||1===i.length){i="",r=0,s=o,n=0;continue}e&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+=`/${t.slice(s+1,o)}`:i=t.slice(s+1,o),r=o-s-1;s=o,n=0}else 46===a&&-1!==n?++n:n=-1}return i}(t,!1)).length>0&&r&&(t+="/"),i?`/${t}`:e+t},isAbsolute(t){return $(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let i=0;i<t.length;++i){const r=t[i];if($(r),r.length>0)if(void 0===e)e=r;else{const s=t[i-1]??"";this.extname(s)?e+=`/../${r}`:e+=`/${r}`}}return void 0===e?".":this.normalize(e)},dirname(t){if($(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const i=47===e;let r=-1,s=!0;const n=this.getProtocol(t),a=t;for(let o=(t=t.slice(n.length)).length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!s){r=o;break}}else s=!1;return-1===r?i?"/":this.isUrl(a)?n+t:n:i&&1===r?"//":n+t.slice(0,r)},rootname(t){$(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const i=t.indexOf("/",e.length);e=-1!==i?t.slice(0,i):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){$(t),e&&$(e),t=Y(this.toPosix(t));let i,r=0,s=-1,n=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let a=e.length-1,o=-1;for(i=t.length-1;i>=0;--i){const h=t.charCodeAt(i);if(47===h){if(!n){r=i+1;break}}else-1===o&&(n=!1,o=i+1),a>=0&&(h===e.charCodeAt(a)?-1==--a&&(s=i):(a=-1,s=o))}return r===s?s=o:-1===s&&(s=t.length),t.slice(r,s)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!n){r=i+1;break}}else-1===s&&(n=!1,s=i+1);return-1===s?"":t.slice(r,s)},extname(t){$(t);let e=-1,i=0,r=-1,s=!0,n=0;for(let a=(t=Y(this.toPosix(t))).length-1;a>=0;--a){const o=t.charCodeAt(a);if(47!==o)-1===r&&(s=!1,r=a+1),46===o?-1===e?e=a:1!==n&&(n=1):-1!==e&&(n=-1);else if(!s){i=a+1;break}}return-1===e||-1===r||0===n||1===n&&e===r-1&&e===i+1?"":t.slice(e,r)},parse(t){$(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let i=(t=Y(this.toPosix(t))).charCodeAt(0);const r=this.isAbsolute(t);let s;e.root=this.rootname(t),s=r||this.hasProtocol(t)?1:0;let n=-1,a=0,o=-1,h=!0,l=t.length-1,c=0;for(;l>=s;--l)if(i=t.charCodeAt(l),47!==i)-1===o&&(h=!1,o=l+1),46===i?-1===n?n=l:1!==c&&(c=1):-1!==n&&(c=-1);else if(!h){a=l+1;break}return-1===n||-1===o||0===c||1===c&&n===o-1&&n===a+1?-1!==o&&(e.base=e.name=0===a&&r?t.slice(1,o):t.slice(a,o)):(0===a&&r?(e.name=t.slice(1,n),e.base=t.slice(1,o)):(e.name=t.slice(a,n),e.base=t.slice(a,o)),e.ext=t.slice(n,o)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"},Z={};function K(t,e,i=3){if(Z[e])return;let r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(r))),Z[e]=!0}function Q(){K("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function J(){K("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option')}let tt;function et(){return void 0===tt&&(tt=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:S.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!S.ADAPTER.getWebGLRenderingContext())return!1;const e=S.ADAPTER.createCanvas();let i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);const r=!!i?.getContextAttributes()?.stencil;if(i){const t=i.getExtension("WEBGL_lose_context");t&&t.loseContext()}return i=null,r}catch(e){return!1}}()),tt}var it={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function rt(t,e=[]){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function st(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function nt(t){if("string"==typeof t&&("#"===(t=it[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),3===t.length)){const[e,i,r]=t;t=e+e+i+i+r+r}return parseInt(t,16)}function at(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}const ot=function(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[o.NORMAL_NPM]=o.NORMAL,t[o.ADD_NPM]=o.ADD,t[o.SCREEN_NPM]=o.SCREEN,e[o.NORMAL]=o.NORMAL_NPM,e[o.ADD]=o.ADD_NPM,e[o.SCREEN]=o.SCREEN_NPM;const i=[];return i.push(e),i.push(t),i}();function ht(t,e){return ot[e?1:0][t]}function lt(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function ct(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;let i=t>>16&255,r=t>>8&255,s=255&t;return i=i*e+.5|0,r=r*e+.5|0,s=s*e+.5|0,(255*e<<24)+(i<<16)+(r<<8)+s}function ut(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}const dt=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function pt(t,e=null){const i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${i}`);for(let r=0,s=0;r<i;r+=6,s+=4)e[r+0]=s+0,e[r+1]=s+1,e[r+2]=s+2,e[r+3]=s+0,e[r+4]=s+2,e[r+5]=s+3;return e}function ft(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}const mt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function gt(t,e){let i=0,r=0;const s={};for(let h=0;h<t.length;h++)r+=e[h],i+=t[h].length;const n=new ArrayBuffer(4*i);let a=null,o=0;for(let h=0;h<t.length;h++){const i=e[h],l=t[h],c=ft(l);s[c]||(s[c]=new mt[c](n)),a=s[c];for(let t=0;t<l.length;t++){a[(t/i|0)*r+o+t%i]=l[t]}o+=i}return new Float32Array(n)}function yt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function vt(t){return!(t&t-1||!t)}function _t(t){let e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,i=((t>>>=i)>15?1:0)<<2,e|=i,i=((t>>>=i)>3?1:0)<<1,e|=i,e|(t>>>=i)>>1}function xt(t,e,i){const r=t.length;let s;if(e>=r||0===i)return;const n=r-(i=e+i>r?r-e:i);for(s=e;s<n;++s)t[s]=t[s+i];t.length=n}function bt(t){return 0===t?0:t<0?-1:1}let Et=0;function Tt(){return++Et}const wt=class{constructor(t,e,i,r){this.left=t,this.top=e,this.right=i,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let St=wt;St.EMPTY=new wt(0,0,0,0);const At={},Ct=Object.create(null),It=Object.create(null);function Rt(){let t;for(t in Ct)Ct[t].destroy();for(t in It)It[t].destroy()}function Pt(){let t;for(t in Ct)delete Ct[t];for(t in It)delete It[t]}class kt{constructor(t,e,i){this._canvas=S.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||S.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Mt(t,e,i){for(let r=0,s=4*i*e;r<e;++r,s+=4)if(0!==t[s+3])return!1;return!0}function Nt(t,e,i,r,s){const n=4*e;for(let a=r,o=r*n+4*i;a<=s;++a,o+=n)if(0!==t[o+3])return!1;return!0}function Ot(t){const{width:e,height:i}=t,r=t.getContext("2d",{willReadFrequently:!0});if(null===r)throw new TypeError("Failed to get canvas 2D context");const s=r.getImageData(0,0,e,i).data;let n=0,a=0,o=e-1,h=i-1;for(;a<i&&Mt(s,e,a);)++a;if(a===i)return St.EMPTY;for(;Mt(s,e,h);)--h;for(;Nt(s,e,n,a,h);)++n;for(;Nt(s,e,o,a,h);)--o;return++o,++h,new St(n,a,o,h)}function Dt(t){const e=Ot(t),{width:i,height:r}=e;let s=null;if(!e.isEmpty()){const n=t.getContext("2d");if(null===n)throw new TypeError("Failed to get canvas 2D context");s=n.getImageData(e.left,e.top,i,r)}return{width:i,height:r,data:s}}function Lt(t){const e=dt.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}let Bt;function Ft(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,Bt||(Bt=document.createElement("a")),Bt.href=t;const i=W.parse(Bt.href),r=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&r&&i.protocol===e.protocol?"":"anonymous"}function Ut(t,e=1){const i=S.RETINA_PREFIX?.exec(t);return i?parseFloat(i[1]):e}var jt=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(jt||{});const Gt=t=>{if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},Vt=(t,e)=>Gt(t).priority??e,Ht={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Gt).forEach((t=>{t.type.forEach((e=>this._removeHandlers[e]?.(t)))})),this},add(...t){return t.map(Gt).forEach((t=>{t.type.forEach((e=>{const i=this._addHandlers,r=this._queue;i[e]?i[e](t):(r[e]=r[e]||[],r[e].push(t))}))})),this},handle(t,e,i){const r=this._addHandlers,s=this._removeHandlers;if(r[t]||s[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,s[t]=i;const n=this._queue;return n[t]&&(n[t].forEach((t=>e(t))),delete n[t]),this},handleByMap(t,e){return this.handle(t,(t=>{e[t.name]=t.ref}),(t=>{delete e[t.name]}))},handleByList(t,e,i=-1){return this.handle(t,(t=>{e.includes(t.ref)||(e.push(t.ref),e.sort(((t,e)=>Vt(e,i)-Vt(t,i))))}),(t=>{const i=e.indexOf(t.ref);-1!==i&&e.splice(i,1)}))}};class zt{constructor(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Xt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Wt(t){let e="";for(let i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+=`if(test == ${i}.0){}`);return e}function $t(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=Xt.replace(/%forloop%/gi,Wt(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}class Yt{constructor(){this.data=0,this.blendMode=o.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(t){!!(1&this.data)!==t&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(t){!!(2&this.data)!==t&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(t){!!(4&this.data)!==t&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(t){!!(8&this.data)!==t&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(t){!!(32&this.data)!==t&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(t){!!(16&this.data)!==t&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==o.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Yt;return t.depthTest=!1,t.blend=!0,t}}const qt=[];function Zt(t,e){if(!t)return null;let i="";if("string"==typeof t){const e=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);e&&(i=e[1].toLowerCase())}for(let r=qt.length-1;r>=0;--r){const s=qt[r];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Kt{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,r,s,n,a,o){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:l}=this;this._aliasCount++;for(let c=0,u=l.length;c<u;c++)l[c][h](t,e,i,r,s,n,a,o);return l===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(Kt.prototype,{dispatch:{value:Kt.prototype.emit},run:{value:Kt.prototype.emit}});class Qt{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Kt("setRealSize"),this.onUpdate=new Kt("update"),this.onError=new Kt("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Jt extends Qt{constructor(t,e){const{width:i,height:r}=e||{};if(!i||!r)throw new Error("BufferResource width or height invalid");super(i,r),this.data=t}upload(t,e,i){const r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===g.UNPACK);const s=e.realWidth,n=e.realHeight;return i.width===s&&i.height===n?r.texSubImage2D(e.target,0,0,0,s,n,e.format,i.type,this.data):(i.width=s,i.height=n,r.texImage2D(e.target,0,i.internalFormat,s,n,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const te={scaleMode:p.NEAREST,format:l.RGBA,alphaMode:g.NPM},ee=class extends H{constructor(t=null,e=null){super(),e=Object.assign({},ee.defaultOptions,e);const{alphaMode:i,mipmap:r,anisotropicLevel:s,scaleMode:n,width:a,height:o,wrapMode:h,format:l,type:c,target:u,resolution:d,resourceOptions:p}=e;!t||t instanceof Qt||((t=Zt(t,p)).internal=!0),this.resolution=d||S.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((o||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=s,this._wrapMode=h,this._scaleMode=n,this.format=l,this.type=c,this.target=u,this.alphaMode=i,this.uid=Tt(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&o>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this}setSize(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)}setRealSize(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=vt(this.realWidth)&&vt(this.realHeight)}setResolution(t){const e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete It[this.cacheId],delete Ct[this.cacheId],this.cacheId=null),this.dispose(),ee.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,i=S.STRICT_TEXTURE_CACHE){const r="string"==typeof t;let s=null;if(r)s=t;else{if(!t._pixiId){const i=e?.pixiIdPrefix||"pixiid";t._pixiId=`${i}_${Tt()}`}s=t._pixiId}let n=It[s];if(r&&i&&!n)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return n||(n=new ee(t,e),n.cacheId=s,ee.addToCache(n,s)),n}static fromBuffer(t,e,i,r){t=t||new Float32Array(e*i*4);const s=new Jt(t,{width:e,height:i}),n=t instanceof Float32Array?u.FLOAT:u.UNSIGNED_BYTE;return new ee(s,Object.assign({},te,r||{width:e,height:i,type:n}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),It[e]&&It[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),It[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=It[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete It[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete It[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let ie=ee;ie.defaultOptions={mipmap:m.POW2,anisotropicLevel:0,scaleMode:p.LINEAR,wrapMode:f.CLAMP,alphaMode:g.UNPACK,target:c.TEXTURE_2D,format:l.RGBA,type:u.UNSIGNED_BYTE},ie._globalBatch=0;class re{constructor(){this.texArray=null,this.blend=0,this.type=h.TRIANGLES,this.start=0,this.size=0,this.data=null}}let se=0;class ne{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=se++,this.disposeRunner=new Kt("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?T.ELEMENT_ARRAY_BUFFER:T.ARRAY_BUFFER}get index(){return this.type===T.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ne(t)}}class ae{constructor(t,e=0,i=!1,r=u.FLOAT,s,n,a,o=1){this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=s,this.start=n,this.instance=a,this.divisor=o}destroy(){this.buffer=null}static from(t,e,i,r,s){return new ae(t,e,i,r,s)}}const oe={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};const he={5126:4,5123:2,5121:1};let le=0;const ce={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};class ue{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=le++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Kt("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,r=!1,s,n,a,o=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ne||(e instanceof Array&&(e=new Float32Array(e)),e=new ne(e));const h=t.split("|");if(h.length>1){for(let t=0;t<h.length;t++)this.addAttribute(h[t],e,i,r,s);return this}let l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new ae(l,i,r,s,n,a,o),this.instanced=this.instanced||o,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ne||(t instanceof Array&&(t=new Uint16Array(t)),t=new ne(t)),t.type=T.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const t=[],e=[],i=new ne;let r;for(r in this.attributes){const i=this.attributes[r],s=this.buffers[i.buffer];t.push(s.data),e.push(i.size*he[i.type]/4),i.buffer=0}for(i.data=function(t,e){let i=0,r=0;const s={};for(let h=0;h<t.length;h++)r+=e[h],i+=t[h].length;const n=new ArrayBuffer(4*i);let a=null,o=0;for(let h=0;h<t.length;h++){const i=e[h],l=t[h],c=ft(l);s[c]||(s[c]=new oe[c](n)),a=s[c];for(let t=0;t<l.length;t++)a[(t/i|0)*r+o+t%i]=l[t];o+=i}return new Float32Array(n)}(t,e),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new ue;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new ne(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new ae(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=T.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new ue,i=[],r=[],s=[];let n;for(let a=0;a<t.length;a++){n=t[a];for(let t=0;t<n.buffers.length;t++)r[t]=r[t]||0,r[t]+=n.buffers[t].data.length,s[t]=0}for(let a=0;a<n.buffers.length;a++)i[a]=new(ce[ft(n.buffers[a].data)])(r[a]),e.buffers[a]=new ne(i[a]);for(let a=0;a<t.length;a++){n=t[a];for(let t=0;t<n.buffers.length;t++)i[t].set(n.buffers[t].data,s[t]),s[t]+=n.buffers[t].data.length}if(e.attributes=n.attributes,n.indexBuffer){e.indexBuffer=e.buffers[n.buffers.indexOf(n.indexBuffer)],e.indexBuffer.type=T.ELEMENT_ARRAY_BUFFER;let i=0,r=0,s=0,a=0;for(let t=0;t<n.buffers.length;t++)if(n.buffers[t]!==n.indexBuffer){a=t;break}for(const t in n.attributes){const e=n.attributes[t];(0|e.buffer)===a&&(r+=e.size*he[e.type]/4)}for(let n=0;n<t.length;n++){const o=t[n].indexBuffer.data;for(let t=0;t<o.length;t++)e.indexBuffer.data[t+s]+=i;i+=t[n].buffers[a].data.length/r,s+=o.length}}return e}}class de extends ue{constructor(t=!1){super(),this._buffer=new ne(null,t,!1),this._indexBuffer=new ne(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,u.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,u.FLOAT).addAttribute("aColor",this._buffer,4,!0,u.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,u.FLOAT).addIndex(this._indexBuffer)}}const pe=2*Math.PI,fe=180/Math.PI,me=Math.PI/180;var ge=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(ge||{});class ye{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new ye(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const ve=[new ye,new ye,new ye,new ye];class _e{constructor(t=0,e=0,i=0,r=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=ge.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new _e(0,0,0,0)}clone(){return new _e(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=e)return!1;const i=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>i}const i=this.left,r=this.right,s=this.top,n=this.bottom;if(r<=i||n<=s)return!1;const a=ve[0].set(t.left,t.top),o=ve[1].set(t.left,t.bottom),h=ve[2].set(t.right,t.top),l=ve[3].set(t.right,t.bottom);if(h.x<=a.x||o.y<=a.y)return!1;const c=Math.sign(e.a*e.d-e.b*e.c);if(0===c)return!1;if(e.apply(a,a),e.apply(o,o),e.apply(h,h),e.apply(l,l),Math.max(a.x,o.x,h.x,l.x)<=i||Math.min(a.x,o.x,h.x,l.x)>=r||Math.max(a.y,o.y,h.y,l.y)<=s||Math.min(a.y,o.y,h.y,l.y)>=n)return!1;const u=c*(o.y-a.y),d=c*(a.x-o.x),p=u*i+d*s,f=u*r+d*s,m=u*i+d*n,g=u*r+d*n;if(Math.max(p,f,m,g)<=u*a.x+d*a.y||Math.min(p,f,m,g)>=u*l.x+d*l.y)return!1;const y=c*(a.y-h.y),v=c*(h.x-a.x),_=y*i+v*s,x=y*r+v*s,b=y*i+v*n,E=y*r+v*n;return!(Math.max(_,x,b,E)<=y*a.x+v*a.y||Math.min(_,x,b,E)>=y*l.x+v*l.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=s-r,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class xe{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=ge.CIRC}clone(){return new xe(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-t,s=this.y-e;return r*=r,s*=s,r+s<=i}getBounds(){return new _e(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class be{constructor(t=0,e=0,i=0,r=0){this.x=t,this.y=e,this.width=i,this.height=r,this.type=ge.ELIP}clone(){return new be(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,r=(e-this.y)/this.height;return i*=i,r*=r,i+r<=1}getBounds(){return new _e(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Ee{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if("number"!=typeof e[0]){const t=[];for(let i=0,r=e.length;i<r;i++)t.push(e[i].x,e[i].y);e=t}this.points=e,this.type=ge.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Ee(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const r=this.points.length/2;for(let s=0,n=r-1;s<r;n=s++){const r=this.points[2*s],a=this.points[2*s+1],o=this.points[2*n],h=this.points[2*n+1];a>e!=h>e&&t<(e-a)/(h-a)*(o-r)+r&&(i=!i)}return i}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce(((t,e)=>`${t}, ${e}`),"")}]`}}class Te{constructor(t=0,e=0,i=0,r=0,s=20){this.x=t,this.y=e,this.width=i,this.height=r,this.radius=s,this.type=ge.RREC}clone(){return new Te(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),s=e-(this.y+i);const n=i*i;if(r*r+s*s<=n)return!0;if(r=t-(this.x+this.width-i),r*r+s*s<=n)return!0;if(s=e-(this.y+this.height-i),r*r+s*s<=n)return!0;if(r=t-(this.x+i),r*r+s*s<=n)return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class we{constructor(t=1,e=0,i=0,r=1,s=0,n=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=s,this.ty=n}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,r,s,n){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=s,this.ty=n,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new ye;const i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e}applyInverse(t,e){e=e||new ye;const i=1/(this.a*this.d+this.c*-this.b),r=t.x,s=t.y;return e.x=this.d*i*r+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a,s=this.c,n=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=n*e-this.ty*i,this.ty=n*i+this.ty*e,this}append(t){const e=this.a,i=this.b,r=this.c,s=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this}setTransform(t,e,i,r,s,n,a,o,h){return this.a=Math.cos(a+h)*s,this.b=Math.sin(a+h)*s,this.c=-Math.sin(a-o)*n,this.d=Math.cos(a-o)*n,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,i=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,r=this.c,s=this.d,n=t.pivot,a=-Math.atan2(-r,s),o=Math.atan2(i,e),h=Math.abs(a+o);return h<1e-5||Math.abs(pe-h)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+s*s),t.position.x=this.tx+(n.x*e+n.y*r),t.position.y=this.ty+(n.x*i+n.y*s),t}invert(){const t=this.a,e=this.b,i=this.c,r=this.d,s=this.tx,n=t*r-e*i;return this.a=r/n,this.b=-e/n,this.c=-i/n,this.d=t/n,this.tx=(i*this.ty-r*s)/n,this.ty=-(t*this.ty-e*s)/n,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new we;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new we}static get TEMP_MATRIX(){return new we}}const Se=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ae=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ce=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ie=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Re=[],Pe=[],ke=Math.sign;!function(){for(let t=0;t<16;t++){const e=[];Re.push(e);for(let i=0;i<16;i++){const r=ke(Se[t]*Se[i]+Ce[t]*Ae[i]),s=ke(Ae[t]*Se[i]+Ie[t]*Ae[i]),n=ke(Se[t]*Ce[i]+Ce[t]*Ie[i]),a=ke(Ae[t]*Ce[i]+Ie[t]*Ie[i]);for(let t=0;t<16;t++)if(Se[t]===r&&Ae[t]===s&&Ce[t]===n&&Ie[t]===a){e.push(t);break}}}for(let t=0;t<16;t++){const e=new we;e.set(Se[t],Ae[t],Ce[t],Ie[t],0,0),Pe.push(e)}}();const Me={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Se[t],uY:t=>Ae[t],vX:t=>Ce[t],vY:t=>Ie[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>Re[t][e],sub:(t,e)=>Re[t][Me.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?Me.S:Me.N:2*Math.abs(e)<=Math.abs(t)?t>0?Me.E:Me.W:e>0?t>0?Me.SE:Me.SW:t>0?Me.NE:Me.NW,matrixAppendRotationInv:(t,e,i=0,r=0)=>{const s=Pe[Me.inv(e)];s.tx=i,s.ty=r,t.append(s)}};class Ne{constructor(t,e,i=0,r=0){this._x=i,this._y=r,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Ne(t,e,this._x,this._y)}set(t=0,e=t){return this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const Oe=class{constructor(){this.worldTransform=new we,this.localTransform=new we,this.position=new Ne(this.onChange,this,0,0),this.scale=new Ne(this.onChange,this,1,1),this.pivot=new Ne(this.onChange,this,0,0),this.skew=new Ne(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let De=Oe;De.IDENTITY=new Oe;const Le=[{test:t=>"float"===t.type&&1===t.size&&!t.isArray,code:t=>`\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `},{test:(t,e)=>!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture),code:t=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(t,e)=>"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a,code:t=>`\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,codeUbo:t=>`\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `},{test:(t,e)=>"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,codeUbo:t=>`\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:t=>"vec2"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:t=>"vec4"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`}],Be={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Fe={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};const Ue={};let je,Ge=Ue;function Ve(){if(Ge===Ue||Ge?.isContextLost()){const t=S.ADAPTER.createCanvas();let e;S.PREFER_ENV>=s.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Ge=e}return Ge}const He={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ze(t){return He[t]}let Xe=null;const We={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function $e(t,e){if(!Xe){const e=Object.keys(We);Xe={};for(let i=0;i<e.length;++i){const r=e[i];Xe[t[r]]=We[r]}}return Xe[e]}function Ye(t,e,i){if("precision"!==t.substring(0,9)){let r=e;return e===_.HIGH&&i!==_.HIGH&&(r=_.MEDIUM),`precision ${r} float;\n${t}`}return i!==_.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}let qe=0;const Ze={},Ke=class{constructor(t,e,i="pixi-shader",r={}){this.extra={},this.id=qe++,this.vertexSrc=t||Ke.defaultVertexSrc,this.fragmentSrc=e||Ke.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),Ze[i]?(Ze[i]++,i+=`-${Ze[i]}`):Ze[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}\n${this.fragmentSrc}`,this.vertexSrc=Ye(this.vertexSrc,Ke.defaultVertexPrecision,_.HIGH),this.fragmentSrc=Ye(this.fragmentSrc,Ke.defaultFragmentPrecision,function(){if(!je){je=_.MEDIUM;const t=Ve();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);je=e.precision?_.HIGH:_.MEDIUM}}return je}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(t,e,i){const r=t+e;let s=At[r];return s||(At[r]=s=new Ke(t,e,i)),s}};let Qe=Ke;Qe.defaultVertexPrecision=_.HIGH,Qe.defaultFragmentPrecision=V.apple.device?_.HIGH:_.MEDIUM;let Je=0;class ti{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Je++,this.static=!!e,this.ubo=!!i,t instanceof ne?(this.buffer=t,this.buffer.type=T.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ne(new Float32Array(1)),this.buffer.type=T.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new ti(e,i)}static from(t,e,i){return new ti(t,e,i)}static uboFrom(t,e){return new ti(t,e??!0,!0)}}class ei{constructor(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof ti?e:new ti(e):new ti({}),this.disposeRunner=new Kt("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const r=e.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const r=Qe.from(t,e);return new ei(r,i)}}class ii{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const e=new Int32Array(t);for(let r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=ti.from({uSamplers:e},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${t}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Qe(this.vertexSrc,i)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new we,default:this.defaultGroupCache[t]};return new ei(this.programCache[t],e)}generateSampleSrc(t){let e="";e+="\n",e+="\n";for(let i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+="\n{",e+=`\n\tcolor = texture2D(uSamplers[${i}], vTextureCoord);`,e+="\n}";return e+="\n",e+="\n",e}}class ri{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}class si{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}const ni=class extends si{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=de,this.vertexSize=6,this.state=Yt.for2d(),this.size=4*ni.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function(t){let e=!0;const i=S.ADAPTER.getNavigator();if(V.tablet||V.phone){if(V.apple.device){const t=i.userAgent.match(/OS (\d+)_(\d+)?/);t&&parseInt(t[1],10)<11&&(e=!1)}if(V.android.device){const t=i.userAgent.match(/Android\s([0-9.]*)/);t&&parseInt(t[1],10)<7&&(e=!1)}}return e?t:4}(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??!V.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return K("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=ni.defaultVertexSrc,fragment:e=ni.defaultFragmentTemplate}={}){this.shaderGenerator=new ii(t,e)}contextChange(){const t=this.renderer.gl;S.PREFER_ENV===s.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ni.defaultMaxTextures),this.maxTextures=$t(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=ni,i=this.size/4,r=Math.floor(i/this.maxTextures)+1;for(;t.length<i;)t.push(new re);for(;e.length<r;)e.push(new ri);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,i=ni._textureArrayPool,r=this.renderer.batch,s=this._tempBoundTextures,n=this.renderer.textureGC.count;let a=++ie._globalBatch,o=0,h=i[0],l=0;r.copyBoundTextures(s,e);for(let c=0;c<this._bufferSize;++c){const u=t[c];t[c]=null,u._batchEnabled!==a&&(h.count>=e&&(r.boundArray(h,s,a,e),this.buildDrawCalls(h,l,c),l=c,h=i[++o],++a),u._batchEnabled=a,u.touched=n,h.elements[h.count++]=u)}h.count>0&&(r.boundArray(h,s,a,e),this.buildDrawCalls(h,l,this._bufferSize),++o,++a);for(let c=0;c<s.length;c++)s[c]=null;ie._globalBatch=a}buildDrawCalls(t,e,i){const{_bufferedElements:r,_attributeBuffer:s,_indexBuffer:n,vertexSize:a}=this,o=ni._drawCallPool;let h=this._dcIndex,l=this._aIndex,c=this._iIndex,u=o[h];u.start=this._iIndex,u.texArray=t;for(let d=e;d<i;++d){const i=r[d],p=i._texture.baseTexture,f=ot[p.alphaMode?1:0][i.blendMode];r[d]=null,e<d&&u.blend!==f&&(u.size=c-u.start,e=d,u=o[++h],u.texArray=t,u.start=c),this.packInterleavedGeometry(i,s,n,l,c),l+=i.vertexData.length/2*a,c+=i.indices.length,u.blend=f}e<i&&(u.size=c-u.start,++h),this._dcIndex=h,this._aIndex=l,this._iIndex=c}bindAndClearTexArray(t){const e=this.renderer.texture;for(let i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:i}=this;ni.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:i}=this.renderer,r=ni._drawCallPool;let s=null;for(let n=0;n<t;n++){const{texArray:t,type:a,size:o,start:h,blend:l}=r[n];s!==t&&(s=t,this.bindAndClearTexArray(t)),this.state.blendMode=l,i.set(this.state),e.drawElements(a,o,e.UNSIGNED_SHORT,2*h)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),ni.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=yt(Math.ceil(t/8)),i=_t(e),r=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._aBuffers[r];return s||(this._aBuffers[r]=s=new zt(r*this.vertexSize*4)),s}getIndexBuffer(t){const e=yt(Math.ceil(t/12)),i=_t(e),r=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(r)),s}packInterleavedGeometry(t,e,i,r,s){const{uint32View:n,float32View:a}=e,o=r/this.vertexSize,h=t.uvs,l=t.indices,c=t.vertexData,u=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?ct(t._tintRGB,d):t._tintRGB+(255*d<<24);for(let f=0;f<c.length;f+=2)a[r++]=c[f],a[r++]=c[f+1],a[r++]=h[f],a[r++]=h[f+1],n[r++]=p,a[r++]=u;for(let f=0;f<l.length;f++)i[s++]=o+l[f]}};let ai=ni;ai.defaultBatchSize=4096,ai.extension={name:"batch",type:jt.RendererPlugin},ai._drawCallPool=[],ai._textureArrayPool=[],Ht.add(ai);const oi=class extends ei{constructor(t,e,i){super(Qe.from(t||oi.defaultVertexSrc,e||oi.defaultFragmentSrc),i),this.padding=0,this.resolution=oi.defaultResolution,this.multisample=oi.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Yt}apply(t,e,i,r,s){t.applyFilter(this,e,i,r)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};let hi=oi;hi.defaultResolution=1,hi.defaultMultisample=E.NONE;class li{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender,t.color&&(this.color="string"==typeof t.color?nt(t.color):t.color),this.alpha=t.alpha}get color(){return this._backgroundColor}set color(t){this._backgroundColor=t,this._backgroundColorString=st(t),rt(t,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(t){this._backgroundColorRgba[3]=t}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}li.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"background"},Ht.add(li);class ci{constructor(t){this.renderer=t,this.emptyRenderer=new si(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let r=e-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)}boundArray(t,e,i,r){const{elements:s,ids:n,count:a}=t;let o=0;for(let h=0;h<a;h++){const t=s[h],a=t._batchLocation;if(a>=0&&a<r&&e[a]===t)n[h]=a;else for(;o<r;){const r=e[o];if(!r||r._batchEnabled!==i||r._batchLocation!==o){n[h]=o,t._batchLocation=o,e[o]=t;break}o++}}}destroy(){this.renderer=null}}ci.extension={type:jt.RendererSystem,name:"batch"},Ht.add(ci);let ui=0;class di{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ui++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ui++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;void 0!==e.addEventListener&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(S.PREFER_ENV>=s.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout((()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()}),0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,void 0!==t.removeEventListener&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}di.extension={type:jt.RendererSystem,name:"context"},Ht.add(di);class pi extends Jt{upload(t,e,i){const r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===g.UNPACK);const s=e.realWidth,n=e.realHeight;return i.width===s&&i.height===n?r.texSubImage2D(e.target,0,0,0,s,n,e.format,i.type,this.data):(i.width=s,i.height=n,r.texImage2D(e.target,0,i.internalFormat,s,n,0,e.format,i.type,this.data)),!0}}class fi{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Kt("disposeFramebuffer"),this.multisample=E.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new ie(null,{scaleMode:p.NEAREST,resolution:1,mipmap:m.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new ie(new pi(null,{width:this.width,height:this.height}),{scaleMode:p.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:m.OFF,format:l.DEPTH_COMPONENT,type:u.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const r=this.colorTextures[i],s=r.resolution;r.setSize(t/s,e/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class mi extends ie{constructor(t={}){if("number"==typeof t){t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=E.NONE),super(null,t),this.mipmap=m.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new fi(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class gi extends Qt{constructor(t){const e=t;super(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){void 0!==i||e.startsWith("data:")?!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous"):t.crossOrigin=Ft(e)}upload(t,e,i,r){const s=t.gl,n=e.realWidth,a=e.realHeight;if(r=r||this.source,"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if("undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement&&r.readyState<=1&&0===r.buffered.length)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===g.UNPACK),this.noSubImage||e.target!==s.TEXTURE_2D||i.width!==n||i.height!==a?(i.width=n,i.height=a,s.texImage2D(e.target,0,i.internalFormat,e.format,i.type,r)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,i.type,r),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}}class yi extends gi{constructor(t,e){if(e=e||{},"string"==typeof t){const i=new Image;gi.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??S.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,this.bitmap=null,this._load=null,!1!==e.autoLoad&&this.load()}load(t){return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(((t,e)=>{const i=this.source;this.url=i.src;const r=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,this.createBitmap?t(this.process()):t(this))};i.complete&&i.src?r():(i.onload=r,i.onerror=t=>{e(t),this.onError.emit(t)})}))),this._load}process(){const t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then((t=>t.blob())).then((i=>e(i,0,0,t.width,t.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===g.UNPACK?"premultiply":"none"}))).then((t=>this.destroyed?Promise.reject():(this.bitmap=t,this.update(),this._process=null,Promise.resolve(this)))),this._process}upload(t,e,i){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let t=!0;const r=e._glTextures;for(const s in r){const n=r[s];if(n!==i&&n.dirtyId!==e.dirtyId){t=!1;break}}t&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return"undefined"!=typeof HTMLImageElement&&("string"==typeof t||t instanceof HTMLImageElement)}}class vi{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const r=e.width,s=e.height;if(i){const e=t.width/2/r,n=t.height/2/s,a=t.x/r+e,o=t.y/s+n;i=Me.add(i,Me.NW),this.x0=a+e*Me.uX(i),this.y0=o+n*Me.uY(i),i=Me.add(i,2),this.x1=a+e*Me.uX(i),this.y1=o+n*Me.uY(i),i=Me.add(i,2),this.x2=a+e*Me.uX(i),this.y2=o+n*Me.uY(i),i=Me.add(i,2),this.x3=a+e*Me.uX(i),this.y3=o+n*Me.uY(i)}else this.x0=t.x/r,this.y0=t.y/s,this.x1=(t.x+t.width)/r,this.y1=t.y/s,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/s,this.x3=t.x/r,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const _i=new vi;function xi(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class bi extends H{constructor(t,e,i,r,s,n){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new _e(0,0,1,1)),t instanceof bi&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=r,this.valid=!1,this._uvs=_i,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=n?new ye(n.x,n.y):new ye(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:t}=this.baseTexture;t?.url&&Ct[t.url]&&bi.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,bi.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new bi(this.baseTexture,!this.noFrame&&t,e,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===_i&&(this._uvs=new vi),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=S.STRICT_TEXTURE_CACHE){const r="string"==typeof t;let s=null;if(r)s=t;else if(t instanceof ie){if(!t.cacheId){const i=e?.pixiIdPrefix||"pixiid";t.cacheId=`${i}-${Tt()}`,ie.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const i=e?.pixiIdPrefix||"pixiid";t._pixiId=`${i}_${Tt()}`}s=t._pixiId}let n=Ct[s];if(r&&i&&!n)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return n||t instanceof ie?!n&&t instanceof ie&&(n=new bi(t),bi.addToCache(n,s)):(e.resolution||(e.resolution=Ut(t)),n=new bi(new ie(t,e)),n.baseTexture.cacheId=s,ie.addToCache(n.baseTexture,s),bi.addToCache(n,s)),n}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e?.resourceOptions),r=bi.from(t,Object.assign({resourceOptions:i},e),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then((()=>Promise.resolve(r)))}static fromBuffer(t,e,i,r){return new bi(ie.fromBuffer(t,e,i,r))}static fromLoader(t,e,i,r){const s=new ie(t,Object.assign({scaleMode:S.SCALE_MODE,resolution:Ut(e)},r)),{resource:n}=s;n instanceof yi&&(n.url=e);const a=new bi(s);return i||(i=e),ie.addToCache(a.baseTexture,i),bi.addToCache(a,i),i!==e&&(ie.addToCache(a.baseTexture,e),bi.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise((t=>{a.baseTexture.once("loaded",(()=>t(a)))}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Ct[e]&&Ct[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),Ct[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=Ct[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete Ct[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)Ct[t.textureCacheIds[e]]===t&&delete Ct[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:r,height:s}=t,n=e+r>this.baseTexture.width,a=i+s>this.baseTexture.height;if(n||a){const t=n&&a?"and":"or",o=`X: ${e} + ${r} = ${e+r} > ${this.baseTexture.width}`,h=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${o} ${t} ${h}`)}this.valid=r&&s&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return bi._EMPTY||(bi._EMPTY=new bi(new ie),xi(bi._EMPTY),xi(bi._EMPTY.baseTexture)),bi._EMPTY}static get WHITE(){if(!bi._WHITE){const t=S.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),bi._WHITE=new bi(ie.from(t)),xi(bi._WHITE),xi(bi._WHITE.baseTexture)}return bi._WHITE}}class Ei extends bi{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const r=this.baseTexture.resolution,s=Math.round(t*r)/r,n=Math.round(e*r)/r;this.valid=s>0&&n>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=n,i&&this.baseTexture.resize(s,n),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Ei(new mi(t))}}class Ti{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=E.NONE){const r=new mi(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new Ei(r)}getOptimalTexture(t,e,i=1,r=E.NONE){let s;t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?s=r>1?-r:-1:(s=((65535&(t=yt(t)))<<16|65535&(e=yt(e)))>>>0,r>1&&(s+=4294967296*r)),this.texturePool[s]||(this.texturePool[s]=[]);let n=this.texturePool[s].pop();return n||(n=this.createTexture(t,e,r)),n.filterPoolKey=s,n.setResolution(i),n}getFilterTexture(t,e,i){const r=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||E.NONE);return r.filterFrame=t.filterFrame,r}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=!1!==t)for(const e in this.texturePool){const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0)}this.texturePool={}}setScreenSize(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){this.enableFullScreen=t.width>0&&t.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Ti.SCREEN_KEY=-1;class wi extends ue{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Si extends ue{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ne(this.vertices),this.uvBuffer=new ne(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Ai{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=E.NONE,this.sourceFrame=new _e,this.destinationFrame=new _e,this.bindingSourceFrame=new _e,this.bindingDestinationFrame=new _e,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ci=[new ye,new ye,new ye,new ye],Ii=new we;class Ri{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Ti,this.statePool=[],this.quad=new wi,this.quadUv=new Si,this.tempRect=new _e,this.activeState={},this.globalUniforms=new ti({outputFrame:new _e,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,r=this.defaultFilterStack,s=this.statePool.pop()||new Ai,n=this.renderer.renderTexture;let a=e[0].resolution,o=e[0].multisample,h=e[0].padding,l=e[0].autoFit,c=e[0].legacy??!0;for(let p=1;p<e.length;p++){const t=e[p];a=Math.min(a,t.resolution),o=Math.min(o,t.multisample),h=this.useMaxPadding?Math.max(h,t.padding):h+t.padding,l=l&&t.autoFit,c=c||(t.legacy??!0)}1===r.length&&(this.defaultFilterStack[0].renderTexture=n.current),r.push(s),s.resolution=a,s.multisample=o,s.legacy=c,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(h);const u=this.tempRect.copyFrom(n.sourceFrame);i.projection.transform&&this.transformAABB(Ii.copyFrom(i.projection.transform).invert(),u),l?(s.sourceFrame.fit(u),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(u)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,n.current?n.current.resolution:i.resolution,n.sourceFrame,n.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,o),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const d=this.tempRect;d.x=0,d.y=0,d.width=s.sourceFrame.width,d.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(n.sourceFrame),s.bindingDestinationFrame.copyFrom(n.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,n.bind(s.renderTexture,s.sourceFrame,d),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;const s=r.inputSize,n=r.inputPixel,a=r.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],n[0]=Math.round(s[0]*e.resolution),n[1]=Math.round(s[1]*e.resolution),n[2]=1/n[0],n[3]=1/n[1],a[0]=.5*n[2],a[1]=.5*n[3],a[2]=e.sourceFrame.width*s[2]-.5*n[2],a[3]=e.sourceFrame.height*s[3]-.5*n[3],e.legacy){const t=r.filterArea;t[0]=e.destinationFrame.width,t[1]=e.destinationFrame.height,t[2]=e.sourceFrame.x,t[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const o=t[t.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,o.renderTexture,y.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let t=e.renderTexture,r=this.getOptimalFilterTexture(t.width,t.height,e.resolution);r.filterFrame=t.filterFrame;let s=0;for(s=0;s<i.length-1;++s){1===s&&e.multisample>1&&(r=this.getOptimalFilterTexture(t.width,t.height,e.resolution),r.filterFrame=t.filterFrame),i[s].apply(this,t,r,y.CLEAR,e);const n=t;t=r,r=n}i[s].apply(this,t,o.renderTexture,y.BLEND,e),s>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(t),this.returnFilterTexture(r)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=y.CLEAR){const{renderTexture:i,state:r}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const e=this.tempRect;e.x=0,e.y=0,e.width=t.filterFrame.width,e.height=t.filterFrame.height,i.bind(t,t.filterFrame,e)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=1&r.stateId||this.forceClear;(e===y.CLEAR||e===y.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,r){const s=this.renderer;s.state.set(t.state),this.bindAndClear(i,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(h.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(h.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:r}=this.activeState,{orig:s}=e._texture,n=t.set(r.width,0,0,r.height,i.x,i.y),a=e.worldTransform.copyTo(we.TEMP_MATRIX);return a.invert(),n.prepend(a),n.scale(1/s.width,1/s.height),n.translate(e.anchor.x,e.anchor.y),n}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,r=E.NONE){return this.texturePool.getOptimalTexture(t,e,i,r)}getFilterTexture(t,e,i){if("number"==typeof t){const i=t;t=e,e=i}t=t||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||E.NONE);return r.filterFrame=t.filterFrame,r}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=Ci[0],r=Ci[1],s=Ci[2],n=Ci[3];i.set(e.left,e.top),r.set(e.left,e.bottom),s.set(e.right,e.top),n.set(e.right,e.bottom),t.apply(i,i),t.apply(r,r),t.apply(s,s),t.apply(n,n);const a=Math.min(i.x,r.x,s.x,n.x),o=Math.min(i.y,r.y,s.y,n.y),h=Math.max(i.x,r.x,s.x,n.x),l=Math.max(i.y,r.y,s.y,n.y);e.x=a,e.y=o,e.width=h-a,e.height=l-o}roundFrame(t,e,i,r,s){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(s){const{a:t,b:e,c:i,d:r}=s;if((Math.abs(e)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(r)>1e-4))return}(s=s?Ii.copyFrom(s):Ii.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)}}}Ri.extension={type:jt.RendererSystem,name:"filter"},Ht.add(Ri);class Pi{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=E.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const ki=new _e;class Mi{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new fi(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new _e,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;S.PREFER_ENV===s.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=t=>e.drawBuffersWEBGL(t):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:r}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let e=0;e<t.colorTextures.length;e++){const i=t.colorTextures[e];this.renderer.texture.unbind(i.parentTextureArray||i)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const t=e.width>>i,r=e.height>>i,s=t/e.width;this.setViewport(e.x*s,e.y*s,t,r)}else{const e=t.width>>i,r=t.height>>i;this.setViewport(0,0,e,r)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,r){const s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),r=Math.round(r),s.width===i&&s.height===r&&s.x===t&&s.y===e||(s.x=t,s.y=e,s.width=i,s.height=r,this.gl.viewport(t,e,i,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,r,s=a.COLOR|a.DEPTH){const{gl:n}=this;n.clearColor(t,e,i,r),n.clear(s)}initFramebuffer(t){const{gl:e}=this,i=new Pi(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const r=t.colorTextures;let s=r.length;e.drawBuffers||(s=Math.min(s,1));for(let n=0;n<s;n++){const s=r[n],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0),0===n&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,a._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,r=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let n=s.length;i.drawBuffers||(n=Math.min(n,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer():r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let o=0;o<n;o++){const n=s[o],h=n.parentTextureArray||n;this.renderer.texture.bind(h,0),0===o&&r.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+o,n.target,h._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+o))}if(a.length>1&&i.drawBuffers(a),t.depthTexture){if(this.writeDepthTexture){const r=t.depthTexture;this.renderer.texture.bind(r,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,r._glTextures[this.CONTEXT_UID].texture,e)}}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))}canMultisampleFramebuffer(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=E.NONE;if(t<=1||null===e)return i;for(let r=0;r<e.length;r++)if(e[r]<=t){i=e[r];break}return 1===i&&(i=E.NONE),i}blit(t,e,i){const{current:r,renderer:s,gl:n,CONTEXT_UID:a}=this;if(2!==s.context.webGLVersion)return;if(!r)return;const o=r.glFramebuffers[a];if(!o)return;if(!t){if(!o.msaaBuffer)return;const e=r.colorTextures[0];if(!e)return;o.blitFramebuffer||(o.blitFramebuffer=new fi(r.width,r.height),o.blitFramebuffer.addColorTexture(0,e)),(t=o.blitFramebuffer).colorTextures[0]!==e&&(t.colorTextures[0]=e,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=ki).width=r.width,e.height=r.height),i||(i=e);const h=e.width===i.width&&e.height===i.height;this.bind(t),n.bindFramebuffer(n.READ_FRAMEBUFFER,o.framebuffer),n.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,n.COLOR_BUFFER_BIT,h?n.NEAREST:n.LINEAR)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const i=t.width,r=t.height,s=this.gl,n=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,n),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,r):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,r),e.stencil=n,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n)}reset(){this.current=this.unknownFramebuffer,this.viewport=new _e}destroy(){this.renderer=null}}Mi.extension={type:jt.RendererSystem,name:"framebuffer"},Ht.add(Mi);const Ni={5126:4,5123:2,5121:1};class Oi{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){let e=this.renderer.context.extensions.vertexArrayObject;S.PREFER_ENV===s.WEBGL_LEGACY&&(e=null),e?(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=t=>e.bindVertexArrayOES(t),t.deleteVertexArray=t=>e.deleteVertexArrayOES(t)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(2!==e.webGLVersion){const e=t.getExtension("ANGLE_instanced_arrays");e?(t.vertexAttribDivisor=(t,i)=>e.vertexAttribDivisorANGLE(t,i),t.drawElementsInstanced=(t,i,r,s,n)=>e.drawElementsInstancedANGLE(t,i,r,s,n),t.drawArraysInstanced=(t,i,r,s)=>e.drawArraysInstancedANGLE(t,i,r,s)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let r=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},s=!0);const n=r[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?i.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const r=t.buffers[i];e.update(r)}}checkCompatibility(t,e){const i=t.attributes,r=e.attributeData;for(const s in r)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,e){const i=t.attributes,r=e.attributeData,s=["g",t.id];for(const n in i)r[n]&&s.push(n,r[n].location);return s.join("-")}initGeometryVao(t,e,i=!0){const r=this.gl,s=this.CONTEXT_UID,n=this.renderer.buffer,a=e.program;a.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const o=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID];let l=h[o];if(l)return h[a.id]=l,l;const c=t.buffers,u=t.attributes,d={},p={};for(const f in c)d[f]=0,p[f]=0;for(const f in u)!u[f].size&&a.attributeData[f]?u[f].size=a.attributeData[f].size:u[f].size||console.warn(`PIXI Geometry attribute '${f}' size cannot be determined (likely the bound shader does not have the attribute)`),d[u[f].buffer]+=u[f].size*Ni[u[f].type];for(const f in u){const t=u[f],e=t.size;void 0===t.stride&&(d[t.buffer]===e*Ni[t.type]?t.stride=0:t.stride=d[t.buffer]),void 0===t.start&&(t.start=p[t.buffer],p[t.buffer]+=e*Ni[t.type])}l=r.createVertexArray(),r.bindVertexArray(l);for(let f=0;f<c.length;f++){const t=c[f];n.bind(t),i&&t._glBuffers[s].refCount++}return this.activateVao(t,a),h[a.id]=l,h[o]=l,r.bindVertexArray(null),n.unbind(T.ARRAY_BUFFER),l}disposeGeometry(t,e){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,s=t.buffers,n=this.renderer?.buffer;if(t.disposeRunner.remove(this),i){if(n)for(let t=0;t<s.length;t++){const i=s[t]._glBuffers[this.CONTEXT_UID];i&&(i.refCount--,0!==i.refCount||e||n.dispose(s[t],e))}if(!e)for(const t in i)if("g"===t[0]){const e=i[t];this._activeVao===e&&this.unbind(),r.deleteVertexArray(e)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,r=this.CONTEXT_UID,s=this.renderer.buffer,n=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let o=null;for(const h in a){const t=a[h],l=n[t.buffer],c=l._glBuffers[r];if(e.attributeData[h]){o!==c&&(s.bind(l),o=c);const r=e.attributeData[h].location;if(i.enableVertexAttribArray(r),i.vertexAttribPointer(r,t.size,t.type||i.FLOAT,t.normalized,t.stride,t.start),t.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(r,t.divisor)}}}}draw(t,e,i,r){const{gl:s}=this,n=this._activeGeometry;if(n.indexBuffer){const a=n.indexBuffer.data.BYTES_PER_ELEMENT,o=2===a?s.UNSIGNED_SHORT:s.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?n.instanced?s.drawElementsInstanced(t,e||n.indexBuffer.data.length,o,(i||0)*a,r||1):s.drawElements(t,e||n.indexBuffer.data.length,o,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else n.instanced?s.drawArraysInstanced(t,i,e||n.getSize(),r||1):s.drawArrays(t,i,e||n.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Oi.extension={type:jt.RendererSystem,name:"geometry"},Ht.add(Oi);const Di=new we;class Li{constructor(t,e){this._texture=t,this.mapCoord=new we,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){void 0===e&&(e=t);const i=this.mapCoord;for(let r=0;r<t.length;r+=2){const s=t[r],n=t[r+1];e[r]=s*i.a+n*i.c+i.tx,e[r+1]=s*i.b+n*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const r=e.orig,s=e.trim;s&&(Di.set(r.width/s.width,0,0,r.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Di));const n=e.baseTexture,a=this.uClampFrame,o=this.clampMargin/n.resolution,h=this.clampOffset;return a[0]=(e._frame.x+o+h)/n.width,a[1]=(e._frame.y+o+h)/n.height,a[2]=(e._frame.x+e._frame.width-o+h)/n.width,a[3]=(e._frame.y+e._frame.height-o+h)/n.height,this.uClampOffset[0]=h/n.realWidth,this.uClampOffset[1]=h/n.realHeight,this.isSimple=e._frame.width===n.width&&e._frame.height===n.height&&0===e.rotate,!0}}class Bi extends hi{constructor(t,e,i){let r=null;"string"!=typeof t&&void 0===e&&void 0===i&&(r=t,t=void 0,e=void 0,i=void 0),super(t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",e||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i),this.maskSprite=r,this.maskMatrix=new we}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,r){const s=this._maskSprite,n=s._texture;n.valid&&(n.uvMatrix||(n.uvMatrix=new Li(n,0)),n.uvMatrix.update(),this.uniforms.npmAlpha=n.baseTexture.alphaMode?0:1,this.uniforms.mask=n,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(n.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=n.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))}}class Fi{constructor(t=null){this.type=x.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=S.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=x.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Ui{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const t=this.maskDataPool.pop()||new Fi;t.pooled=!0,t.maskObject=e,i=t}const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(r),i._colorMask=r?r._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==x.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case x.SCISSOR:this.renderer.scissor.push(i);break;case x.STENCIL:this.renderer.stencil.push(i);break;case x.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case x.COLOR:this.pushColorMask(i)}i.type===x.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case x.SCISSOR:this.renderer.scissor.pop(e);break;case x.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case x.SPRITE:this.popSpriteMask(e);break;case x.COLOR:this.popColorMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){const t=this.maskStack[this.maskStack.length-1];t.type===x.SPRITE&&t._filters&&(t._filters[0].maskSprite=t.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=x.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=x.SCISSOR:t.type=x.STENCIL:t.type=x.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let r=t._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new Bi]));const s=this.renderer,n=s.renderTexture;let a,o;if(n.current){const e=n.current;a=t.resolution||e.resolution,o=t.multisample??e.multisample}else a=t.resolution||s.resolution,o=t.multisample??s.multisample;r[0].resolution=a,r[0].multisample=o,r[0].maskSprite=e;const h=i.filterArea;i.filterArea=e.getBounds(!0),s.filter.push(i,r),i.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))}destroy(){this.renderer=null}}Ui.extension={type:jt.RendererSystem,name:"mask"},Ht.add(Ui);class ji{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const r=this.getStackLength();r!==i&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Gi=new we,Vi=[],Hi=class extends ji{constructor(t){super(t),this.glConst=S.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:i}=t,{renderer:r}=this,s=r.renderTexture,n=i.getBounds(!0,Vi.pop()??new _e);this.roundFrameToPixels(n,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),e&&n.fit(e),t._scissorRectLocal=n}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:i,c:r,d:s}=t;return(Math.abs(i)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(s)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect())return!1;if(Hi.isMatrixRotated(e.worldTransform))return!1;if(Hi.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const i=t._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(t,e,i,r,s){Hi.isMatrixRotated(s)||((s=s?Gi.copyFrom(s):Gi.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.renderer.filter.transformAABB(s,t),t.fit(r),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&Vi.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let zi=Hi;zi.extension={type:jt.RendererSystem,name:"scissor"},Ht.add(zi);class Xi extends ji{constructor(t){super(t),this.glConst=S.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;0!==s&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==s&&(t._colorMask=s,i.colorMask(0!=(1&s),0!=(2&s),0!=(4&s),0!=(8&s))),this._useCurrent()}pop(t){const e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{const i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,r=i?i._colorMask:15;0!==r&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==r&&(i._colorMask=r,e.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Xi.extension={type:jt.RendererSystem,name:"stencil"},Ht.add(Xi);class Wi{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(K("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract)},prepare:{enumerable:!1,get:()=>(K("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare)},interaction:{enumerable:!1,get:()=>(K("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events)}})}init(t){for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}Wi.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"_plugin"},Ht.add(Wi);class $i{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new we,this.transform=null}update(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,e,i,r){const s=this.projectionMatrix,n=r?-1:1;s.identity(),s.a=1/e.width*2,s.d=n*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-n-e.y*s.d}setTransform(t){}destroy(){this.renderer=null}}$i.extension={type:jt.RendererSystem,name:"projection"},Ht.add($i);const Yi=new De;class qi{constructor(t){this.renderer=t,this._tempMatrix=new we}generateTexture(t,e){const{region:i,...r}=e||{},s=i||t.getLocalBounds(null,!0);0===s.width&&(s.width=1),0===s.height&&(s.height=1);const n=Ei.create({width:s.width,height:s.height,...r});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=t.transform;return t.transform=Yi,this.renderer.render(t,{renderTexture:n,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,n}destroy(){}}qi.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"textureGenerator"},Ht.add(qi);const Zi=new _e,Ki=new _e;class Qi{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new _e,this.destinationFrame=new _e,this.viewportFrame=new _e}bind(t=null,e,i){const r=this.renderer;let s,n,a;this.current=t,t?(s=t.baseTexture,a=s.resolution,e||(Zi.width=t.frame.width,Zi.height=t.frame.height,e=Zi),i||(Ki.x=t.frame.x,Ki.y=t.frame.y,Ki.width=e.width,Ki.height=e.height,i=Ki),n=s.framebuffer):(a=r.resolution,e||(Zi.width=r._view.screen.width,Zi.height=r._view.screen.height,e=Zi),i||((i=Zi).width=e.width,i.height=e.height));const o=this.viewportFrame;o.x=i.x*a,o.y=i.y*a,o.width=i.width*a,o.height=i.height*a,t||(o.y=r.view.height-(o.y+o.height)),o.ceil(),this.renderer.framebuffer.bind(n,o),this.renderer.projection.update(i,e,a,!n),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.renderer.background.colorRgba;const i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==r.width||i.height!==r.height;if(s){let{x:t,y:e,width:i,height:r}=this.viewportFrame;t=Math.round(t),e=Math.round(e),i=Math.round(i),r=Math.round(r),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(t,e,i,r)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Qi.extension={type:jt.RendererSystem,name:"renderTexture"},Ht.add(Qi);class Ji{}class tr{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function er(t,e,i){const r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}function ir(t){const e=new Array(t);for(let i=0;i<e.length;i++)e[i]=!1;return e}function rr(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ir(2*e);case"bvec3":return ir(3*e);case"bvec4":return ir(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function sr(t,e){const i=t.getShaderSource(e).split("\n").map(((t,e)=>`${e}: ${t}`)),r=t.getShaderInfoLog(e),s=r.split("\n"),n={},a=s.map((t=>parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((t=>!(!t||n[t])&&(n[t]=!0,!0))),o=[""];a.forEach((t=>{i[t-1]=`%c${i[t-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const h=i.join("\n");o[0]=h,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function nr(t,e){const i=er(t,t.VERTEX_SHADER,e.vertexSrc),r=er(t,t.FRAGMENT_SHADER,e.fragmentSrc),s=t.createProgram();t.attachShader(s,i),t.attachShader(s,r);const n=e.extra?.transformFeedbackVaryings;if(n&&("function"!=typeof t.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(s,n.names,"separate"===n.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||function(t,e,i,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||sr(t,i),t.getShaderParameter(r,t.COMPILE_STATUS)||sr(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,s,i,r),e.attributeData=function(t,e){const i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const r=e.getActiveAttrib(t,s);if(r.name.startsWith("gl_"))continue;const n=$e(e,r.type),a={type:n,name:r.name,size:ze(n),location:e.getAttribLocation(t,r.name)};i[r.name]=a}return i}(s,t),e.uniformData=function(t,e){const i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<r;s++){const r=e.getActiveUniform(t,s),n=r.name.replace(/\[.*?\]$/,""),a=!!r.name.match(/\[.*?\]$/),o=$e(e,r.type);i[n]={name:n,index:s,type:o,size:r.size,isArray:a,value:rr(o,r.size)}}return i}(s,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const i=Object.keys(e.attributeData);i.sort(((t,e)=>t>e?1:-1));for(let r=0;r<i.length;r++)e.attributeData[i[r]].location=r,t.bindAttribLocation(s,r,i[r]);t.linkProgram(s)}t.deleteShader(i),t.deleteShader(r);const a={};for(const o in e.uniformData){const i=e.uniformData[o];a[o]={location:t.getUniformLocation(s,o),value:rr(i.type,i.size)}}return new tr(s,a)}function ar(t,e,i,r,s){i.buffer.update(s)}const or={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},hr={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function lr(t){const e=t.map((t=>({data:t,offset:0,dataLen:0,dirty:0})));let i=0,r=0,s=0;for(let n=0;n<e.length;n++){const t=e[n];if(i=hr[t.data.type],t.data.size>1&&(i=Math.max(i,16)*t.data.size),t.dataLen=i,r%i!=0&&r<16){const t=r%i%16;r+=t,s+=t}r+i>16?(s=16*Math.ceil(s/16),t.offset=s,s+=i,r=i):(t.offset=s,r+=i,s+=i)}return s=16*Math.ceil(s/16),{uboElements:e,size:s}}function cr(t,e){const i=[];for(const r in t)e[r]&&i.push(e[r]);return i.sort(((t,e)=>t.index-e.index)),i}function ur(t,e){if(!t.autoManage)return{size:0,syncFunc:ar};const i=cr(t.uniforms,e),{uboElements:r,size:s}=lr(i),n=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let a=0;a<r.length;a++){const e=r[a],i=t.uniforms[e.data.name],s=e.data.name;let o=!1;for(let t=0;t<Le.length;t++){const r=Le[t];if(r.codeUbo&&r.test(e.data,i)){n.push(`offset = ${e.offset/4};`,Le[t].codeUbo(e.data.name,i)),o=!0;break}}if(!o)if(e.data.size>1){const t=ze(e.data.type),i=Math.max(hr[e.data.type]/16,1),r=t/i,a=(4-r%4)%4;n.push(`\n                cv = ud.${s}.value;\n                v = uv.${s};\n                offset = ${e.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${e.data.size*i}; i++)\n                {\n                    for(var j = 0; j < ${r}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${a};\n                }\n\n                `)}else{const t=or[e.data.type];n.push(`\n                cv = ud.${s}.value;\n                v = uv.${s};\n                offset = ${e.offset/4};\n                ${t};\n                `)}}return n.push("\n       renderer.buffer.update(buffer);\n    "),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join("\n"))}}let dr;function pr(){if("boolean"==typeof dr)return dr;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");dr=!0===t({a:"b"},"a","b")}catch(t){dr=!1}return dr}let fr=0;const mr={textureCount:0,uboCount:0};class gr{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=fr++}systemCheck(){if(!pr())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(mr.textureCount=0,mr.uboCount=0,this.syncUniformGroup(t.uniformGroup,mr)),r}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();t.static&&t.dirtyId===i.uniformDirtyGroups[t.id]||(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){const i=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const r in t.uniforms){const s=e[r];if(!s){t.uniforms[r]?.group&&(t.uniforms[r].ubo?i.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');\n                    `):i.push(`\n                        renderer.shader.syncUniformGroup(uv.${r}, syncData);\n                    `));continue}const n=t.uniforms[r];let a=!1;for(let t=0;t<Le.length;t++)if(Le[t].test(s,n)){i.push(Le[t].code(r,n)),a=!0;break}if(!a){const t=(1!==s.size||s.isArray?Fe:Be)[s.type].replace("location",`ud["${r}"].location`);i.push(`\n            cu = ud["${r}"];\n            cv = cu.value;\n            v = uv["${r}"];\n            ${t};`)}}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||0!==t.dirtyId||!i.uniformGroups[t.id]){t.dirtyId=0;const r=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),r(i.uniformData,t.uniforms,this.renderer,mr,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:r}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const n=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[n];if(a||(a=this._uboCache[n]=ur(t,this.shader.program.uniformData)),t.autoManage){const e=new Float32Array(a.size/4);t.buffer.update(e)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const r=t.uniforms,s=[`${i}-`];for(const n in r)s.push(n),e[n]&&s.push(e[n].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,r=nr(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}gr.extension={type:jt.RendererSystem,name:"shader"},Ht.add(gr);class yr{constructor(t){this.renderer=t}run(t){const e=this.renderer;e.emitWithCustomOptions(e.runners.init,t),t.hello&&console.log(`PixiJS 7.1.0 - ${e.rendererLogId} - https://pixijs.com`),e.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}yr.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"startup"},Ht.add(yr);const vr=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=o.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Yt,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=function(t,e=[]){return e[o.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.ADD]=[t.ONE,t.ONE],e[o.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.NONE]=[0,0],e[o.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[o.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[o.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[o.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[o.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[o.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[o.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[o.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[o.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[o.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[o.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(vr.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(vr.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let _r=vr;_r.extension={type:jt.RendererSystem,name:"state"},Ht.add(_r);class xr extends H{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter((e=>t.systems[e])),i=[...e,...Object.keys(t.systems).filter((t=>!e.includes(t)))];for(const r of i)this.addSystem(t.systems[r],r)}addRunners(...t){t.forEach((t=>{this.runners[t]=new Kt(t)}))}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const r in this.runners)this.runners[r].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach((r=>{const s=i.find((t=>this._systemsHash[t]===r));r[t.name](e[s])}))}destroy(){Object.values(this.runners).forEach((t=>{t.destroy()})),this._systemsHash={}}}const br=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=br.defaultMaxIdle,this.checkCountMax=br.defaultCheckCountMax,this.mode=br.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==v.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let i=!1;for(let r=0;r<e.length;r++){const s=e[r];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[r]=null,i=!0)}if(i){let t=0;for(let i=0;i<e.length;i++)null!==e[i]&&(e[t++]=e[i]);e.length=t}}unload(t){const e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(let r=t.children.length-1;r>=0;r--)this.unload(t.children[r])}destroy(){this.renderer=null}};let Er=br;Er.defaultMode=v.AUTO,Er.defaultMaxIdle=3600,Er.defaultCheckCountMax=600,Er.extension={type:jt.RendererSystem,name:"textureGC"},Ht.add(Er);class Tr{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=u.UNSIGNED_BYTE,this.internalFormat=l.RGBA,this.samplerType=0}}class wr{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ie,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){let e;return e="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?{[u.UNSIGNED_BYTE]:{[l.RGBA]:t.RGBA8,[l.RGB]:t.RGB8,[l.RG]:t.RG8,[l.RED]:t.R8,[l.RGBA_INTEGER]:t.RGBA8UI,[l.RGB_INTEGER]:t.RGB8UI,[l.RG_INTEGER]:t.RG8UI,[l.RED_INTEGER]:t.R8UI,[l.ALPHA]:t.ALPHA,[l.LUMINANCE]:t.LUMINANCE,[l.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[u.BYTE]:{[l.RGBA]:t.RGBA8_SNORM,[l.RGB]:t.RGB8_SNORM,[l.RG]:t.RG8_SNORM,[l.RED]:t.R8_SNORM,[l.RGBA_INTEGER]:t.RGBA8I,[l.RGB_INTEGER]:t.RGB8I,[l.RG_INTEGER]:t.RG8I,[l.RED_INTEGER]:t.R8I},[u.UNSIGNED_SHORT]:{[l.RGBA_INTEGER]:t.RGBA16UI,[l.RGB_INTEGER]:t.RGB16UI,[l.RG_INTEGER]:t.RG16UI,[l.RED_INTEGER]:t.R16UI,[l.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[u.SHORT]:{[l.RGBA_INTEGER]:t.RGBA16I,[l.RGB_INTEGER]:t.RGB16I,[l.RG_INTEGER]:t.RG16I,[l.RED_INTEGER]:t.R16I},[u.UNSIGNED_INT]:{[l.RGBA_INTEGER]:t.RGBA32UI,[l.RGB_INTEGER]:t.RGB32UI,[l.RG_INTEGER]:t.RG32UI,[l.RED_INTEGER]:t.R32UI,[l.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[u.INT]:{[l.RGBA_INTEGER]:t.RGBA32I,[l.RGB_INTEGER]:t.RGB32I,[l.RG_INTEGER]:t.RG32I,[l.RED_INTEGER]:t.R32I},[u.FLOAT]:{[l.RGBA]:t.RGBA32F,[l.RGB]:t.RGB32F,[l.RG]:t.RG32F,[l.RED]:t.R32F,[l.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[u.HALF_FLOAT]:{[l.RGBA]:t.RGBA16F,[l.RGB]:t.RGB16F,[l.RG]:t.RG16F,[l.RED]:t.R16F},[u.UNSIGNED_SHORT_5_6_5]:{[l.RGB]:t.RGB565},[u.UNSIGNED_SHORT_4_4_4_4]:{[l.RGBA]:t.RGBA4},[u.UNSIGNED_SHORT_5_5_5_1]:{[l.RGBA]:t.RGB5_A1},[u.UNSIGNED_INT_2_10_10_10_REV]:{[l.RGBA]:t.RGB10_A2,[l.RGBA_INTEGER]:t.RGB10_A2UI},[u.UNSIGNED_INT_10F_11F_11F_REV]:{[l.RGB]:t.R11F_G11F_B10F},[u.UNSIGNED_INT_5_9_9_9_REV]:{[l.RGB]:t.RGB9_E5},[u.UNSIGNED_INT_24_8]:{[l.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[u.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[l.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:{[u.UNSIGNED_BYTE]:{[l.RGBA]:t.RGBA,[l.RGB]:t.RGB,[l.ALPHA]:t.ALPHA,[l.LUMINANCE]:t.LUMINANCE,[l.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[u.UNSIGNED_SHORT_5_6_5]:{[l.RGB]:t.RGB},[u.UNSIGNED_SHORT_4_4_4_4]:{[l.RGBA]:t.RGBA},[u.UNSIGNED_SHORT_5_5_5_1]:{[l.RGBA]:t.RGBA}},e}(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};const i=new Tr(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Tr(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(t,e=0){const{gl:i}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):r.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let t=0;t<i.length;t++)i[t]===this.unknownTexture&&this.bind(null,t)}for(let r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:r}=this;if(i)for(let s=t-1;s>=0;--s){const t=e[s];if(t){t._glTextures[r].samplerType!==d.FLOAT&&this.renderer.texture.unbind(t)}}}initTexture(t){const e=new Tr(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){e.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,2===this.webGLVersion&&t.type===u.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),t.resource?.upload(i,t,e))e.samplerType!==d.FLOAT&&(this.hasIntegerTextures=!0);else{const r=t.realWidth,s=t.realHeight,n=i.gl;(e.width!==r||e.height!==s||e.dirtyId<0)&&(e.width=r,e.height=s,n.texImage2D(t.target,0,e.internalFormat,r,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const e=this.managedTextures.indexOf(t);-1!==e&&xt(this.managedTextures,e,1)}}updateTextureStyle(t){const e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==m.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=f.CLAMP,t.resource?.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==m.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===p.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const e=this.renderer.context.extensions.anisotropicFiltering;if(e&&t.anisotropicLevel>0&&t.scaleMode===p.LINEAR){const r=Math.min(t.anisotropicLevel,i.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===p.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===p.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}wr.extension={type:jt.RendererSystem,name:"texture"},Ht.add(wr);class Sr{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,r=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:r}=this;e&&r.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:r}=this,s=e.createTransformFeedback();t._glTransformFeedbacks[r]=s,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s);for(let n=0;n<t.buffers.length;n++){const s=t.buffers[n];s&&(i.buffer.update(s),s._glBuffers[r].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n,s._glBuffers[r].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let n=0;n<t.buffers.length;n++){const i=t.buffers[n];if(!i)continue;const r=i._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0!==r.refCount||e||s.dispose(i,e))}i&&(e||r.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Sr.extension={type:jt.RendererSystem,name:"transformFeedback"},Ht.add(Sr);class Ar{constructor(t){this.renderer=t}init(t){this.screen=new _e(0,0,t.width,t.height),this.element=t.view||S.ADAPTER.createCanvas(),this.resolution=t.resolution||S.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",i,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Ar.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"_view"},Ht.add(Ar),S.PREFER_ENV=s.WEBGL2,S.STRICT_TEXTURE_CACHE=!1,Object.defineProperties(S,{WRAP_MODE:{get:()=>ie.defaultOptions.wrapMode,set(t){K("7.1.0","settings.WRAP_MODE is deprecated, use BaseTeture.defaultOptions.wrapMode"),ie.defaultOptions.wrapMode=t}},SCALE_MODE:{get:()=>ie.defaultOptions.scaleMode,set(t){K("7.1.0","settings.SCALE_MODE is deprecated, use BaseTeture.defaultOptions.scaleMode"),ie.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get:()=>ie.defaultOptions.mipmap,set(t){K("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTeture.defaultOptions.mipmap"),ie.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get:()=>ie.defaultOptions.anisotropicLevel,set(t){K("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTeture.defaultOptions.anisotropicLevel"),ie.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get:()=>(K("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),hi.defaultResolution),set(t){hi.defaultResolution=t}},FILTER_MULTISAMPLE:{get:()=>(K("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),hi.defaultMultisample),set(t){hi.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get:()=>ai.defaultMaxTextures,set(t){K("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ai.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get:()=>ai.defaultBatchSize,set(t){K("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ai.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get:()=>ai.canUploadSameBuffer,set(t){K("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ai.canUploadSameBuffer=t}},GC_MODE:{get:()=>Er.defaultMode,set(t){K("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Er.defaultMode=t}},GC_MAX_IDLE:{get:()=>Er.defaultMaxIdle,set(t){K("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Er.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get:()=>Er.defaultCheckCountMax,set(t){K("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Er.defaultCheckCountMax=t}},PRECISION_VERTEX:{get:()=>Qe.defaultVertexPrecision,set(t){K("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Qe.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get:()=>Qe.defaultFragmentPrecision,set(t){K("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Qe.defaultFragmentPrecision=t}}});var Cr=(t=>(t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Cr||{});class Ir{constructor(t,e=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=r}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Rr=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ir(null,null,1/0),this.deltaMS=1/Rr.targetFPMS,this.elapsedMS=1/Rr.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=Cr.NORMAL){return this._addListener(new Ir(t,e,i))}addOnce(t,e,i=Cr.NORMAL){return this._addListener(new Ir(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Rr.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Rr.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Rr._shared){const t=Rr._shared=new Rr;t.autoStart=!0,t._protected=!0}return Rr._shared}static get system(){if(!Rr._system){const t=Rr._system=new Rr;t.autoStart=!0,t._protected=!0}return Rr._system}};let Pr=Rr;Pr.targetFPMS=.06,Object.defineProperties(S,{TARGET_FPMS:{get:()=>Pr.targetFPMS,set(t){K("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Pr.targetFPMS=t}}});class kr{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Cr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Pr.shared:new Pr,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}kr.extension=jt.Application,Ht.add(kr);const Mr=[];function Nr(t){for(const e of Mr)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}Ht.handleByList(jt.Renderer,Mr);const Or="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Dr="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";class Lr{constructor(t){this.renderer=t}contextChange(t){let e;if(1===this.renderer.context.webGLVersion){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=E.HIGH?this.multisample=E.HIGH:e>=E.MEDIUM?this.multisample=E.MEDIUM:e>=E.LOW?this.multisample=E.LOW:this.multisample=E.NONE}destroy(){}}Lr.extension={type:jt.RendererSystem,name:"_multisample"},Ht.add(Lr);class Br{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Fr{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,r=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:r}=this;if(this.boundBufferBases[e]!==t){const s=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,s.buffer)}}bindBufferRange(t,e,i){const{gl:r,CONTEXT_UID:s}=this;i=i||0;const n=t._glBuffers[s]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,n.buffer,256*i,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,r=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new Br(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}Fr.extension={type:jt.RendererSystem,name:"buffer"},Ht.add(Fr);class Ur{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let r,s,n,a;if(e&&(r=e.renderTexture,s=e.clear,n=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!r,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=n,!i.context.isLost){if(r||(this.lastObjectRendered=t),!a){const e=t.enableTempParent();t.updateTransform(),t.disableTempParent(e)}i.renderTexture.bind(r),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),r&&(e.blit&&i.framebuffer.blit(),r.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Ur.extension={type:jt.RendererSystem,name:"objectRenderer"},Ht.add(Ur);const jr=class extends xr{constructor(t){super(),t=Object.assign({},S.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ti({projectionMatrix:new we},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:jr.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(K("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha);const i={hello:t.hello,_plugin:jr.__plugins,background:{alpha:t.backgroundAlpha,color:t.background??t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:t.premultipliedAlpha,preserveDrawingBuffer:t.preserveDrawingBuffer}};this.startup.run(i),this.options=t}static test(t){return!t?.forceCanvas&&et()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return K("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return K("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return K("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return K("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){K("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return K("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(t){K("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return K("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let Gr=jr;Gr.extension={type:jt.Renderer,priority:1},Gr.__plugins={},Gr.__systems={},Ht.handleByMap(jt.RendererPlugin,Gr.__plugins),Ht.handleByMap(jt.RendererSystem,Gr.__systems),Ht.add(Gr);class Vr extends Qt{constructor(t,e){const{width:i,height:r}=e||{};super(i,r),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const t=new ie;this.items.push(t),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Qt?this.addResourceAt(t[i],i):this.addResourceAt(Zt(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map((t=>t.resource)).filter((t=>t)).map((t=>t.load()));return this._load=Promise.all(t).then((()=>{const{realWidth:t,realHeight:e}=this.items[0];return this.resize(t,e),Promise.resolve(this)})),this._load}}class Hr extends Vr{constructor(t,e){const{width:i,height:r}=e||{};let s,n;Array.isArray(t)?(s=t,n=t.length):n=t,super(n,{width:i,height:r}),s&&this.initFromArray(s,e)}addBaseTextureAt(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this}bind(t){super.bind(t),t.target=c.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:r,itemDirtyIds:s,items:n}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,e.format,i.type,null);for(let o=0;o<r;o++){const t=n[o];s[o]<t.dirtyId&&(s[o]=t.dirtyId,t.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,o,t.resource.width,t.resource.height,1,e.format,i.type,t.resource.source))}return!0}}class zr extends gi{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Xr=class extends Vr{constructor(t,e){const{width:i,height:r,autoLoad:s,linkBaseTexture:n}=e||{};if(t&&t.length!==Xr.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:i,height:r});for(let a=0;a<Xr.SIDES;a++)this.items[a].target=c.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=!1!==n,t&&this.initFromArray(t,e),!1!==s&&this.load()}bind(t){super.bind(t),t.target=c.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,i){if(void 0===i&&(i=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=c.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,i){const r=this.itemDirtyIds;for(let s=0;s<Xr.SIDES;s++){const n=this.items[s];(r[s]<n.dirtyId||i.dirtyId<e.dirtyId)&&(n.valid&&n.resource?(n.resource.upload(t,n,i),r[s]=n.dirtyId):r[s]<-1&&(t.gl.texImage2D(n.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),r[s]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===Xr.SIDES}};let Wr=Xr;Wr.SIDES=6;class $r extends gi{constructor(t,e){var i=(...t)=>{super(...t)};e=e||{},"string"==typeof t?(i($r.EMPTY),this.url=t):(i(t),this.url=null),this.crossOrigin=e.crossOrigin??!0,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((async(t,e)=>{if(null!==this.url)try{const e=await S.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await e.blob();if(this.destroyed)return;const r=await createImageBitmap(i,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===g.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=r,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}else t(this)}))),this._load}upload(t,e,i){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&("string"==typeof t||t instanceof ImageBitmap)}static get EMPTY(){return $r._EMPTY=$r._EMPTY??S.ADAPTER.createCanvas(0,0),$r._EMPTY}}const Yr=class extends gi{constructor(t,e){e=e||{},super(S.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},Yr.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}))),this._load}_loadSvg(){const t=new Image;gi.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,i=t.height;if(!e||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=e*this.scale,s=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/i*e,s=this._overrideHeight||this._overrideWidth/e*i),r=Math.round(r),s=Math.round(s);const n=this.source;n.width=r,n.height=s,n._pixiId=`canvas_${Tt()}`,n.getContext("2d").drawImage(t,0,0,e,i,0,0,r,s),this._resolve(),this._resolve=null}}static getSize(t){const e=Yr.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return"svg"===e||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&Yr.SVG_XML.test(t)}};let qr=Yr;qr.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,qr.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Zr=class extends gi{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]);const r=t[0].src||t[0];gi.crossOrigin(i,r,e.crossorigin);for(let e=0;e<t.length;++e){const r=document.createElement("source");let{src:s,mime:n}=t[e];s=s||t[e];const a=s.split("?").shift().toLowerCase(),o=a.slice(a.lastIndexOf(".")+1);n=n||Zr.MIME_TYPES[o]||`video/${o}`,r.src=s,r.type=n,i.appendChild(r)}t=i}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(t=0){if(!this.destroyed){const t=Pr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e=>{this.valid?e(this):(this._resolve=e,t.load())})),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Pr.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Pr.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(Pr.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Pr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Pr.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||Zr.TYPES.includes(e)}};let Kr=Zr;Kr.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Kr.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},qt.push($r,yi,zr,Kr,qr,Jt,Wr,Hr);class Qr{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new Kt("disposeTransformFeedback")}bindBuffer(t,e){this.buffers[t]=e}destroy(){this.disposeRunner.emit(this,!1)}}const Jr="7.1.0";class ts{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?_e.EMPTY:((t=t||new _e(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:r,c:s,d:n,tx:a,ty:o}=t,h=i*e.x+s*e.y+a,l=r*e.x+n*e.y+o;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)}addQuad(t){let e=this.minX,i=this.minY,r=this.maxX,s=this.maxY,n=t[0],a=t[1];e=n<e?n:e,i=a<i?a:i,r=n>r?n:r,s=a>s?a:s,n=t[2],a=t[3],e=n<e?n:e,i=a<i?a:i,r=n>r?n:r,s=a>s?a:s,n=t[4],a=t[5],e=n<e?n:e,i=a<i?a:i,r=n>r?n:r,s=a>s?a:s,n=t[6],a=t[7],e=n<e?n:e,i=a<i?a:i,r=n>r?n:r,s=a>s?a:s,this.minX=e,this.minY=i,this.maxX=r,this.maxY=s}addFrame(t,e,i,r,s){this.addFrameMatrix(t.worldTransform,e,i,r,s)}addFrameMatrix(t,e,i,r,s){const n=t.a,a=t.b,o=t.c,h=t.d,l=t.tx,c=t.ty;let u=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=n*e+o*i+l,g=a*e+h*i+c;u=m<u?m:u,d=g<d?g:d,p=m>p?m:p,f=g>f?g:f,m=n*r+o*i+l,g=a*r+h*i+c,u=m<u?m:u,d=g<d?g:d,p=m>p?m:p,f=g>f?g:f,m=n*e+o*s+l,g=a*e+h*s+c,u=m<u?m:u,d=g<d?g:d,p=m>p?m:p,f=g>f?g:f,m=n*r+o*s+l,g=a*r+h*s+c,u=m<u?m:u,d=g<d?g:d,p=m>p?m:p,f=g>f?g:f,this.minX=u,this.minY=d,this.maxX=p,this.maxY=f}addVertexData(t,e,i){let r=this.minX,s=this.minY,n=this.maxX,a=this.maxY;for(let o=e;o<i;o+=2){const e=t[o],i=t[o+1];r=e<r?e:r,s=i<s?i:s,n=e>n?e:n,a=i>a?i:a}this.minX=r,this.minY=s,this.maxX=n,this.maxY=a}addVertices(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)}addVerticesMatrix(t,e,i,r,s=0,n=s){const a=t.a,o=t.b,h=t.c,l=t.d,c=t.tx,u=t.ty;let d=this.minX,p=this.minY,f=this.maxX,m=this.maxY;for(let g=i;g<r;g+=2){const t=e[g],i=e[g+1],r=a*t+h*i+c,y=l*i+o*t+u;d=Math.min(d,r-s),f=Math.max(f,r+s),p=Math.min(p,y-n),m=Math.max(m,y+n)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=m}addBounds(t){const e=this.minX,i=this.minY,r=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,n=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&r<=n){const t=this.minX,e=this.minY,a=this.maxX,o=this.maxY;this.minX=i<t?i:t,this.minY=r<e?r:e,this.maxX=s>a?s:a,this.maxY=n>o?n:o}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,n=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&r<=n){const t=this.minX,e=this.minY,a=this.maxX,o=this.maxY;this.minX=i<t?i:t,this.minY=r<e?r:e,this.maxX=s>a?s:a,this.maxY=n>o?n:o}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,r,s,n){t-=s,e-=n,i+=s,r+=n,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r}}class es extends H{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new De,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ts,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const r=e[i];Object.defineProperty(es.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new _e),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new _e),t=this._localBoundsRect),this._localBounds||(this._localBounds=new ts);const e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const n=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-s,n}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,e=0,i=1,r=1,s=0,n=0,a=0,o=0,h=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=s,this.skew.x=n,this.skew.y=a,this.pivot.x=o,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new is),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*fe}set angle(t){this.transform.rotation=t*me}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1))}if(this._mask=t,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(0===t._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class is extends es{constructor(){super(...arguments),this.sortDirty=null}}es.prototype.displayObjectUpdateTransform=es.prototype.updateTransform;const rs=new we;function ss(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const ns=class extends es{constructor(){super(),this.children=[],this.sortableChildren=ns.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(t);xt(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],i=this.children.indexOf(e);if(-1===i)return null;e.parent=null,e.transform._parentID=-1,xt(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this),this.emit("childRemoved",e,this,i)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,xt(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const i=t,r=e-i;let s;if(r>0&&r<=e){s=this.children.splice(i,r);for(let t=0;t<s.length;++t)s[t].parent=null,s[t].transform&&(s[t].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let t=0;t<s.length;++t)s[t].emit("removed",this),this.emit("childRemoved",s[t],this,t);return s}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,i=this.children.length;e<i;++e){const i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(ss),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){const t=e._mask.isMaskData?e._mask.maskObject:e._mask;t?(t.calculateBounds(),this._bounds.addBoundsMask(e._bounds,t._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const i=super.getLocalBounds(t);if(!e)for(let r=0,s=this.children.length;r<s;++r){const t=this.children[r];t.visible&&t.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let i,r;this.cullArea?(i=this.cullArea,r=this.worldTransform):this._render!==ns.prototype._render&&(i=this.getBounds(!0));const s=t.projection.transform;if(s&&(r?(r=rs.copyFrom(r),r.prepend(s)):r=s),i&&e.intersects(i,r))this._render(t);else if(this.cullArea)return;for(let n=0,a=this.children.length;n<a;++n){const e=this.children[n],i=e.cullable;e.cullable=i||!this.cullArea,e.render(t),e.cullable=i}}render(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}}renderAdvanced(t){const e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let t=0;t<e.length;t++)e[t].enabled&&this._enabledFilters.push(e[t])}const r=e&&this._enabledFilters?.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==x.NONE));if(r&&t.batch.flush(),e&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}r&&t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e="boolean"==typeof t?t:t?.children,i=this.removeChildren(0,this.children.length);if(e)for(let r=0;r<i.length;++r)i[r].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}};let as=ns;as.defaultSortableChildren=!1,as.prototype.containerUpdateTransform=as.prototype.updateTransform,Object.defineProperties(S,{SORTABLE_CHILDREN:{get:()=>as.defaultSortableChildren,set(t){K("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),as.defaultSortableChildren=t}}});const os=new ye,hs=new Uint16Array([0,1,2,0,2,3]);class ls extends as{constructor(t){super(),this._anchor=new Ne(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=o.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||bi.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=hs,this.pluginName="batch",this.isSprite=!0,this._roundPixels=S.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=bt(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=bt(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,r=e.b,s=e.c,n=e.d,a=e.tx,o=e.ty,h=this.vertexData,l=t.trim,c=t.orig,u=this._anchor;let d=0,p=0,f=0,m=0;if(l?(p=l.x-u._x*c.width,d=p+l.width,m=l.y-u._y*c.height,f=m+l.height):(p=-u._x*c.width,d=p+c.width,m=-u._y*c.height,f=m+c.height),h[0]=i*p+s*m+a,h[1]=n*m+r*p+o,h[2]=i*d+s*m+a,h[3]=n*m+r*d+o,h[4]=i*d+s*f+a,h[5]=n*f+r*d+o,h[6]=i*p+s*f+a,h[7]=n*f+r*p+o,this._roundPixels){const t=S.RESOLUTION;for(let e=0;e<h.length;++e)h[e]=Math.round(h[e]*t)/t}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,s=this.transform.worldTransform,n=s.a,a=s.b,o=s.c,h=s.d,l=s.tx,c=s.ty,u=-r._x*i.width,d=u+i.width,p=-r._y*i.height,f=p+i.height;e[0]=n*u+o*p+l,e[1]=h*p+a*u+c,e[2]=n*d+o*p+l,e[3]=h*p+a*d+c,e[4]=n*d+o*f+l,e[5]=h*f+a*d+c,e[6]=n*u+o*f+l,e[7]=h*f+a*u+c}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new ts),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new _e),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,os);const e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x;let s=0;return os.x>=r&&os.x<r+e&&(s=-i*this.anchor.y,os.y>=s&&os.y<s+i)}destroy(t){super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;if("boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const i=t instanceof bi?t:bi.from(t,e);return new ls(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=bt(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=bt(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tint}set tint(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||bi.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const cs=new we;es.prototype._cacheAsBitmap=!1,es.prototype._cacheData=null,es.prototype._cacheAsBitmapResolution=null,es.prototype._cacheAsBitmapMultisample=null;class us{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(es.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;let e;this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new us),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),es.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},es.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const i=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const t=this.filters[0].padding;i.pad(t)}i.ceil(S.RESOLUTION);const r=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),n=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,o=Ei.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${Tt()}`;this._cacheData.textureCacheId=h,ie.addToCache(o.baseTexture,h),bi.addToCache(o,h);const l=this.transform.localTransform.copyTo(cs).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(r,s,n),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new ls(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-i.x/i.width,c.anchor.y=-i.y/i.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)},es.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},es.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;const r=t.canvasContext.activeContext,s=t._projTransform;e.ceil(S.RESOLUTION);const n=Ei.create({width:e.width,height:e.height}),a=`cacheAsBitmap_${Tt()}`;this._cacheData.textureCacheId=a,ie.addToCache(n.baseTexture,a),bi.addToCache(n,a);const o=cs;this.transform.localTransform.copyTo(o),o.invert(),o.tx-=e.x,o.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:n,clear:!0,transform:o,skipUpdateTransform:!1}),t.canvasContext.activeContext=r,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const h=new ls(n);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)},es.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},es.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},es.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ie.removeFromCache(this._cacheData.textureCacheId),bi.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},es.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},es.prototype.name=null,as.prototype.getChildByName=function(t,e){for(let i=0,r=this.children.length;i<r;i++)if(this.children[i].name===t)return this.children[i];if(e)for(let i=0,r=this.children.length;i<r;i++){const e=this.children[i];if(!e.getChildByName)continue;const r=e.getChildByName(t,!0);if(r)return r}return null},es.prototype.getGlobalPosition=function(t=new ye,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};class ds extends hi{constructor(t=1){super(Or,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const ps={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fs=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class ms extends hi{constructor(t,e=8,i=4,r=S.FILTER_RESOLUTION,s=5){const n=function(t,e){const i=Math.ceil(t/2);let r,s="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",n="";r=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let a=0;a<t;a++){let t=r.replace("%index%",a.toString());t=t.replace("%sampleIndex%",a-(i-1)+".0"),n+=t,n+="\n"}return s=s.replace("%blur%",n),s=s.replace("%size%",t.toString()),s}(s,t),a=function(t){const e=ps[t],i=e.length;let r,s=fs,n="";for(let a=0;a<t;a++){let s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());r=a,a>=i&&(r=t-a-1),s=s.replace("%value%",e[r].toString()),n+=s,n+="\n"}return s=s.replace("%blur%",n),s=s.replace("%size%",t.toString()),s}(s);super(n,a),this.horizontal=t,this.resolution=r,this._quality=0,this.quality=i,this.blur=e}apply(t,e,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{const s=t.getFilterTexture(),n=t.renderer;let a=e,o=s;this.state.blend=!1,t.applyFilter(this,a,o,y.CLEAR);for(let e=1;e<this.passes-1;e++){t.bindAndClear(a,y.BLIT),this.uniforms.uSampler=o;const e=o;o=a,a=e,n.shader.bind(this),n.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,o,i,r),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+2*Math.abs(t),this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class gs extends hi{constructor(t=8,e=4,i=hi.defaultResolution,r=5){super(),this.blurXFilter=new ms(!0,t,e,i,r),this.blurYFilter=new ms(!1,t,e,i,r),this.resolution=i,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,i,r){const s=Math.abs(this.blurXFilter.strength),n=Math.abs(this.blurYFilter.strength);if(s&&n){const s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,y.CLEAR),this.blurYFilter.apply(t,s,i,r),t.returnFilterTexture(s)}else n?this.blurYFilter.apply(t,e,i,r):this.blurXFilter.apply(t,e,i,r)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}class ys extends hi{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Dr,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",t),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const i=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(i,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}blackAndWhite(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),r=Math.sin(t),s=1/3,n=(0,Math.sqrt)(s),a=[i+(1-i)*s,s*(1-i)-n*r,s*(1-i)+n*r,0,0,s*(1-i)+n*r,i+s*(1-i),s*(1-i)-n*r,0,0,s*(1-i)-n*r,s*(1-i)+n*r,i+s*(1-i),0,0,0,0,0,1,0];this._loadMatrix(a,e)}contrast(t,e){const i=(t||0)+1,r=-.5*(i-1),s=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(s,e)}saturate(t=0,e){const i=2*t/3+1,r=-.5*(i-1),s=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(s,e)}desaturate(){this.saturate(-1)}negative(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)}sepia(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)}technicolor(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)}polaroid(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)}toBGR(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)}kodachrome(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)}browni(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)}vintage(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)}colorTone(t,e,i,r,s){const n=((i=i||16770432)>>16&255)/255,a=(i>>8&255)/255,o=(255&i)/255,h=((r=r||3375104)>>16&255)/255,l=(r>>8&255)/255,c=(255&r)/255,u=[.3,.59,.11,0,0,n,a,o,t=t||.2,0,h,l,c,e=e||.15,0,n-h,a-l,o-c,0,0];this._loadMatrix(u,s)}night(t,e){const i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}ys.prototype.grayscale=ys.prototype.greyscale;class vs extends hi{constructor(t,e){const i=new we;t.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,null==e&&(e=20),this.scale=new ye(e,e)}apply(t,e,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,n=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);0!==n&&0!==a&&(this.uniforms.rotation[0]=s.a/n,this.uniforms.rotation[1]=s.b/n,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),t.applyFilter(this,e,i,r)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}class _s extends hi{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}}class xs extends hi{constructor(t=.5,e=Math.random()){super(Dr,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const bs={AlphaFilter:ds,BlurFilter:gs,BlurFilterPass:ms,ColorMatrixFilter:ys,DisplacementFilter:vs,FXAAFilter:_s,NoiseFilter:xs};Object.entries(bs).forEach((([t,e])=>{Object.defineProperty(bs,t,{get:()=>(K("7.1.0",`filters.${t} has moved to ${t}`),e)})}));class Es{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Es.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ye,this.page=new ye,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Ts extends Es{constructor(){super(...arguments),this.client=new ye,this.movement=new ye,this.offset=new ye,this.global=new ye,this.screen=new ye}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,r,s,n,a,o,h,l,c,u,d,p,f){throw new Error("Method not implemented.")}}class ws extends Ts{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Ss extends Ts{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}const As=new ye,Cs=new ye;class Is{constructor(t){this.dispatch=new H,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort(((t,e)=>t.priority-e.priority))}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,r=e.length;i<r;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){const i=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,As.set(t,e),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(t.currentTarget=i[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this.rootTarget){t.eventPhase=t.BUBBLING_PHASE;const r=i.children;if(r)for(let s=0;s<r.length;s++)this.all(t,e,r[s]);t.currentTarget=i,this.notifyTarget(t,e)}propagationPath(t){const e=[t];for(let i=0;i<2048&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestRecursive(t,e,i,r,s){if(!t||!t.visible)return null;if(s(t,i))return null;if(t.interactiveChildren&&t.children){const n=t.children;for(let a=n.length-1;a>=0;a--){const o=n[a],h=this.hitTestRecursive(o,e||o.interactive,i,r,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;return(h.length>0||t.interactive)&&h.push(t),h}}}return e&&r(t,i)?t.interactive?[t]:[]:null}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,Cs),!t.hitArea.contains(Cs.x,Cs.y)))return!0;if(t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;if(i&&!i.containsPoint?.(e))return!0}return!1}hitTestFn(t,e){return!!t.hitArea||!!t.containsPoint&&t.containsPoint(e)}notifyTarget(t,e){const i=`on${e=e??t.type}`;t.currentTarget[i]?.(t);const r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof ws))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)this.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){const t=2===e.button;this.dispatchEvent(e,t?"rightdown":"mousedown")}this.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){if(!(t instanceof ws))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t),i="mouse"===e.pointerType||"pen"===e.pointerType,r=this.trackingData(t.pointerId),s=this.findMountedTarget(r.overTargets);if(r.overTargets&&s!==e.target){const r="mousemove"===t.type?"mouseout":"pointerout",n=this.createPointerEvent(t,r,s);if(this.dispatchEvent(n,"pointerout"),i&&this.dispatchEvent(n,"mouseout"),!e.composedPath().includes(s)){const r=this.createPointerEvent(t,"pointerleave",s);for(r.eventPhase=r.AT_TARGET;r.target&&!e.composedPath().includes(r.target);)r.currentTarget=r.target,this.notifyTarget(r),i&&this.notifyTarget(r,"mouseleave"),r.target=r.target.parent;this.freeEvent(r)}this.freeEvent(n)}if(s!==e.target){const r="mousemove"===t.type?"mouseover":"pointerover",n=this.clonePointerEvent(e,r);this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover");let a=s?.parent;for(;a&&a!==this.rootTarget.parent&&a!==e.target;)a=a.parent;if(!a||a===this.rootTarget.parent){const t=this.clonePointerEvent(e,"pointerenter");for(t.eventPhase=t.AT_TARGET;t.target&&t.target!==s&&t.target!==this.rootTarget.parent;)t.currentTarget=t.target,this.notifyTarget(t),i&&this.notifyTarget(t,"mouseenter"),t.target=t.target.parent;this.freeEvent(t)}this.freeEvent(n)}const n=this.moveOnAll?"all":"dispatchEvent";this[n](e,"pointermove"),"touch"===e.pointerType&&this[n](e,"touchmove"),i&&(this[n](e,"mousemove"),this.cursor=e.target?.cursor),r.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){if(!(t instanceof ws))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),r="mouse"===i.pointerType||"pen"===i.pointerType;this.dispatchEvent(i,"pointerover"),r&&this.dispatchEvent(i,"mouseover"),"mouse"===i.pointerType&&(this.cursor=i.target?.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof ws))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId);if(e.overTargets){const i="mouse"===t.pointerType||"pen"===t.pointerType,r=this.findMountedTarget(e.overTargets),s=this.createPointerEvent(t,"pointerout",r);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const n=this.createPointerEvent(t,"pointerleave",r);for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),i&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;e.overTargets=null,this.freeEvent(s),this.freeEvent(n)}this.cursor=null}mapPointerUp(t){if(!(t instanceof ws))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),"touch"===i.pointerType)this.dispatchEvent(i,"touchend");else if("mouse"===i.pointerType||"pen"===i.pointerType){const t=2===i.button;this.dispatchEvent(i,t?"rightup":"mouseup")}const r=this.trackingData(t.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[t.button]);let n=s;if(s&&!i.composedPath().includes(s)){let e=s;for(;e&&!i.composedPath().includes(e);){if(i.currentTarget=e,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType)this.notifyTarget(i,"touchendoutside");else if("mouse"===i.pointerType||"pen"===i.pointerType){const t=2===i.button;this.notifyTarget(i,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete r.pressTargetsByButton[t.button],n=e}if(n){const s=this.clonePointerEvent(i,"click");s.target=n,s.path=null,r.clicksByButton[t.button]||(r.clicksByButton[t.button]={clickCount:0,target:s.target,timeStamp:e});const a=r.clicksByButton[t.button];a.target===s.target&&e-a.timeStamp<200?++a.clickCount:a.clickCount=1,a.target=s.target,a.timeStamp=e,s.detail=a.clickCount,"mouse"===s.pointerType?this.dispatchEvent(s,"click"):"touch"===s.pointerType&&this.dispatchEvent(s,"tap"),this.dispatchEvent(s,"pointertap"),this.freeEvent(s)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof ws))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),r=this.createPointerEvent(t);if(i){let s=i;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),s=s.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(r)}mapWheel(t){if(!(t instanceof Ss))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const r=this.allocateEvent(ws);return this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=i??this.hitTest(r.global.x,r.global.y),"string"==typeof e&&(r.type=e),r}createWheelEvent(t){const e=this.allocateEvent(Ss);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(ws);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof ws&&e instanceof ws&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Ts&&e instanceof Ts&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i)if("fn"in i)i.fn.call(i.context,t);else for(let r=0,s=i.length;r<s&&!t.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,t)}}const Rs={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class Ps{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new Is(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new ws(null),this.rootWheelEvent=new Ss(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:t,resolution:e}=this.renderer;this.setTargetElement(t),this.resolution=e}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}onPointerDown(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized){(t.cancelable||!("cancelable"in t))&&t.preventDefault()}for(let i=0,r=e.length;i<r;i++){const t=e[i],r=this.bootstrapEvent(this.rootPointerEvent,t);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let i=0,r=e.length;i<r;i++){const t=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",r=this.normalizeToPointerData(t);for(let s=0,n=r.length;s<n;s++){const t=this.bootstrapEvent(this.rootPointerEvent,r[s]);t.type+=i,this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let i=0,r=e.length;i<r;i++){const t=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){let r;r=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;t.x=(e-r.left)*(this.domElement.width/r.width)*s,t.y=(i-r.top)*(this.domElement.height/r.height)*s}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,r=t.changedTouches.length;i<r;i++){const r=t.changedTouches[i];void 0===r.button&&(r.button=0),void 0===r.buttons&&(r.buttons=1),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=t.type,e.push(r)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))e.push(t);else{const i=t;void 0===i.isPrimary&&(i.isPrimary=!0),void 0===i.width&&(i.width=1),void 0===i.height&&(i.height=1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="mouse"),void 0===i.pointerId&&(i.pointerId=1),void 0===i.pressure&&(i.pressure=.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Rs[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}}Ps.extension={name:"events",type:[jt.RendererSystem,jt.CanvasRendererSystem]},Ht.add(Ps);const ks={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,ontouchstart:null,onwheel:null,interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(t,e,i){const r="function"==typeof e?void 0:e;t="boolean"==typeof i&&i||"object"==typeof i&&i.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,this.on(t,e,r)},removeEventListener(t,e,i){const r="function"==typeof e?void 0:e;t="boolean"==typeof i&&i||"object"==typeof i&&i.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,this.off(t,e,r)},dispatchEvent(t){if(!(t instanceof Es))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};es.mixin(ks);const Ms={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};es.mixin(Ms);class Ns{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(V.tablet||V.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",(()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()})),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}update(){const t=performance.now();if(V.android.device&&t<this.androidUpdateCount)return;if(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen)return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:i,width:r,height:s}=this.renderer.view.getBoundingClientRect(),{width:n,height:a,resolution:o}=this.renderer,h=r/n*o,l=s/a*o;let c=this.div;c.style.left=`${e}px`,c.style.top=`${i}px`,c.style.width=`${n}px`,c.style.height=`${a}px`;for(let u=0;u<this.children.length;u++){const t=this.children[u];if(t.renderId!==this.renderId)t._accessibleActive=!1,xt(this.children,u,1),this.div.removeChild(t._accessibleDiv),this.pool.push(t._accessibleDiv),t._accessibleDiv=null,u--;else{c=t._accessibleDiv;let e=t.hitArea;const i=t.worldTransform;t.hitArea?(c.style.left=(i.tx+e.x*i.a)*h+"px",c.style.top=(i.ty+e.y*i.d)*l+"px",c.style.width=e.width*i.a*h+"px",c.style.height=e.height*i.d*l+"px"):(e=t.getBounds(),this.capHitArea(e),c.style.left=e.x*h+"px",c.style.top=e.y*l+"px",c.style.width=e.width*h+"px",c.style.height=e.height*l+"px",c.title!==t.accessibleTitle&&null!==t.accessibleTitle&&(c.title=t.accessibleTitle),c.getAttribute("aria-label")!==t.accessibleHint&&null!==t.accessibleHint&&c.setAttribute("aria-label",t.accessibleHint)),t.accessibleTitle===c.title&&t.tabIndex===c.tabIndex||(c.title=t.accessibleTitle,c.tabIndex=t.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:i}=t.target,r=this.renderer.events.rootBoundary,s=Object.assign(new Es(r),{target:i});r.rootTarget=this.renderer.lastObjectRendered,e.forEach((t=>r.dispatchEvent(s,t)))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){9===t.keyCode&&this.activate()}_onMouseMove(t){0===t.movementX&&0===t.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Ns.extension={name:"accessibility",type:[jt.RendererPlugin,jt.CanvasRendererPlugin]},Ht.add(Ns);const Os=class{constructor(t){this.stage=new as,t=Object.assign({forceCanvas:!1},t),this.renderer=Nr(t),Os._plugins.forEach((e=>{e.init.call(this,t)}))}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const i=Os._plugins.slice(0);i.reverse(),i.forEach((t=>{t.destroy.call(this)})),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let Ds=Os;Ds._plugins=[],Ht.handleByList(jt.Application,Ds._plugins);class Ls{static init(t){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame((()=>this.resize())))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let t,e;if(this.cancelResize(),this._resizeTo===globalThis.window)t=globalThis.innerWidth,e=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:r}=this._resizeTo;t=i,e=r}this.renderer.resize(t,e),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Ls.extension=jt.Application,Ht.add(Ls);const Bs={loader:jt.LoadParser,resolver:jt.ResolveParser,cache:jt.CacheParser,detection:jt.DetectionParser};Ht.handle(jt.Asset,(t=>{const e=t.ref;Object.entries(Bs).filter((([t])=>!!e[t])).forEach((([t,i])=>Ht.add(Object.assign(e[t],{extension:e[t].extension??i}))))}),(t=>{const e=t.ref;Object.keys(Bs).filter((t=>!!e[t])).forEach((t=>Ht.remove(e[t])))}));class Fs{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach((t=>{this._assetList.push(t)})),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Us(t,e){const i=t.split("?")[0],r=q.extname(i).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const js=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map((t=>"string"==typeof t?e(t):t)):t);const Gs=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=js(t);let r;for(let a=0;a<this.parsers.length;a++){const t=this.parsers[a];if(t.test(e)){r=t.getCacheableAssets(i,e);break}}r||(r={},i.forEach((t=>{r[t]=e})));const s=Object.keys(r),n={cacheKeys:s,keys:i};if(i.forEach((t=>{this._cacheMap.set(t,n)})),s.forEach((t=>{this._cache.has(t)&&this._cache.get(t)!==e&&console.warn("[Cache] already has key:",t),this._cache.set(t,r[t])})),e instanceof bi){const t=e;i.forEach((e=>{t.baseTexture!==bi.EMPTY.baseTexture&&ie.addToCache(t.baseTexture,e),bi.addToCache(t,e)}))}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t))return void console.warn(`[Assets] Asset id ${t} was not found in the Cache`);const e=this._cacheMap.get(t);e.cacheKeys.forEach((t=>{this._cache.delete(t)})),e.keys.forEach((t=>{this._cacheMap.delete(t)}))}get parsers(){return this._parsers}},Vs=t=>!Array.isArray(t);class Hs{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{let r=null;for(let s=0;s<this.parsers.length;s++){const n=this.parsers[s];if(n.load&&n.test?.(t,e,this)){r=await n.load(t,e,this),i.parser=n;break}}if(!i.parser)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let t=0;t<this.parsers.length;t++){const s=this.parsers[t];s.parse&&s.parse&&await(s.testParse?.(r,e,this))&&(r=await s.parse(r,e,this)||r,i.parser=s)}return r})(),i}async load(t,e){let i=0;const r={},s=Vs(t),n=js(t,(t=>({src:t}))),a=n.length,o=n.map((async t=>{const s=q.toAbsolute(t.src);if(!r[t.src])try{this.promiseCache[s]||(this.promiseCache[s]=this._getLoadPromiseAndParser(s,t)),r[t.src]=await this.promiseCache[s].promise,e&&e(++i/a)}catch(n){throw delete this.promiseCache[s],delete r[t.src],new Error(`[Loader.load] Failed to load ${s}.\n${n}`)}}));return await Promise.all(o),s?r[n[0].src]:r}async unload(t){const e=js(t,(t=>({src:t}))).map((async t=>{const e=q.toAbsolute(t.src),i=this.promiseCache[e];if(i){const r=await i.promise;i.parser?.unload?.(r,t,this),delete this.promiseCache[e]}}));await Promise.all(e)}get parsers(){return this._parsers}}var zs=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(zs||{});const Xs={extension:{type:jt.LoadParser,priority:zs.Low},test:t=>".json"===q.extname(t).toLowerCase(),async load(t){const e=await S.ADAPTER.fetch(t);return await e.json()}};Ht.add(Xs);const Ws={extension:{type:jt.LoadParser,priority:zs.Low},test:t=>".txt"===q.extname(t).toLowerCase(),async load(t){const e=await S.ADAPTER.fetch(t);return await e.text()}};function $s(t,e){if(Array.isArray(e)){for(const i of e)if(t.startsWith(`data:${i}`))return!0;return!1}return t.startsWith(`data:${e}`)}Ht.add(Ws);const Ys=["normal","bold","100","200","300","400","500","600","700","800","900"],qs=[".ttf",".otf",".woff",".woff2"],Zs=["font/ttf","font/otf","font/woff","font/woff2"];function Ks(t){const e=q.extname(t);return q.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ")}const Qs={extension:{type:jt.LoadParser,priority:zs.Low},test:t=>$s(t,Zs)||Us(t,qs),async load(t,e){if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const i=S.ADAPTER.getFontFaceSet();if(i){const r=[],s=e.data?.family??Ks(t),n=e.data?.weights?.filter((t=>Ys.includes(t)))??["normal"],a=e.data??{};for(let e=0;e<n.length;e++){const o=n[e],h=new FontFace(s,`url(${encodeURI(t)})`,{...a,weight:o});await h.load(),i.add(h),r.push(h)}return 1===r.length?r[0]:r}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach((t=>S.ADAPTER.getFontFaceSet().delete(t)))}};Ht.add(Qs);let Js,tn=0;const en={id:"checkImageBitmap",code:"\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    "},rn={id:"loadImageBitmap",code:"\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };"};let sn;const nn=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((t=>{const e=URL.createObjectURL(new Blob([en.code],{type:"application/javascript"})),i=new Worker(e);i.addEventListener("message",(r=>{i.terminate(),URL.revokeObjectURL(e),t(r.data)}))}))),this._isImageBitmapSupported}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===Js&&(Js=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Js&&(sn||(sn=URL.createObjectURL(new Blob([rn.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(sn),t.addEventListener("message",(t=>{this.complete(t.data),this.returnWorker(t.target),this.next()}))),t}returnWorker(t){this.workerPool.push(t)}complete(t){void 0!==t.error?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise(((i,r)=>{this.queue.push({id:t,arguments:e,resolve:i,reject:r})}));return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[tn]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:tn++,id:i})}};function an(t,e,i){const r=new bi(t);return r.baseTexture.on("dispose",(()=>{delete e.promiseCache[i]})),r}const on=[".jpeg",".jpg",".png",".webp",".avif"],hn=["image/jpeg","image/png","image/webp","image/avif"];async function ln(t){const e=await S.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const i=await e.blob();return await createImageBitmap(i)}const cn={extension:{type:jt.LoadParser,priority:zs.High},config:{preferWorkers:!0},test:t=>$s(t,hn)||Us(t,on),async load(t,e,i){let r=null;r=globalThis.createImageBitmap?this.config.preferWorkers&&await nn.isImageBitmapSupported()?await nn.loadImageBitmap(t):await ln(t):await new Promise((e=>{r=new Image,r.crossOrigin="anonymous",r.src=t,r.complete?e(r):r.onload=()=>{e(r)}}));const s=new ie(r,{resolution:Ut(t),...e.data});return s.resource.src=t,an(s,i,t)},unload(t){t.destroy(!0)}};Ht.add(cn);const un={extension:{type:jt.LoadParser,priority:zs.High},test:t=>".svg"===q.extname(t).toLowerCase(),testParse:async t=>qr.test(t),async parse(t,e,i){const r=new qr(t,e?.data?.resourceOptions),s=new ie(r,{resolution:Ut(t),...e?.data});s.resource.src=t;const n=an(s,i,t);return e?.data?.resourceOptions?.autoLoad||await r.load(),n},load:async(t,e)=>(await S.ADAPTER.fetch(t)).text(),unload:cn.unload};function dn(t,e,i,r,s){const n=e[i];for(let a=0;a<n.length;a++){const o=n[a];i<e.length-1?dn(t.replace(r[i],o),e,i+1,r,s):s.push(t.replace(r[i],o))}}function pn(t){const e=t.match(/\{(.*?)\}/g),i=[];if(e){const r=[];e.forEach((t=>{const e=t.substring(1,t.length-1).split(",");r.push(e)})),dn(t,r,0,e,i)}else i.push(t);return i}Ht.add(un);class fn{constructor(){this._bundleIdConnector="-",this._createBundleAssetId=(t,e)=>`${t}${this._bundleIdConnector}${e}`,this._extractAssetIdFromBundle=(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,""),this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach((t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))})),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}setDefaultSearchParams(t){if("string"==typeof t)this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach((t=>{this.addBundle(t.name,t.assets)}))}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach((e=>{if("string"==typeof e.name){const r=this._createBundleAssetId(t,e.name);i.push(r),this.add([e.name,r],e.srcs)}else{const r=e.name.map((e=>this._createBundleAssetId(t,e)));r.forEach((t=>{i.push(t)})),this.add([...e.name,...r],e.srcs)}})):Object.keys(e).forEach((r=>{i.push(this._createBundleAssetId(t,r)),this.add([r,this._createBundleAssetId(t,r)],e[r])})),this._bundles[t]=i}add(t,e,i){const r=js(t);r.forEach((t=>{this._assetMap[t]&&console.warn(`[Resolver] already has key: ${t} overwriting`)})),Array.isArray(e)||(e="string"==typeof e?pn(e):[e]);const s=e.map((t=>{let e=t;if("string"==typeof t){let i=!1;for(let r=0;r<this._parsers.length;r++){const s=this._parsers[r];if(s.test(t)){e=s.parse(t),i=!0;break}}i||(e={src:t})}return e.format||(e.format=e.src.split(".").pop()),e.alias||(e.alias=r),(this._basePath||this._rootPath)&&(e.src=q.toAbsolute(e.src,this._basePath,this._rootPath)),e.src=this._appendDefaultSearchParams(e.src),e.data=e.data??i,e}));r.forEach((t=>{this._assetMap[t]=s}))}resolveBundle(t){const e=Vs(t);t=js(t);const i={};return t.forEach((t=>{const e=this._bundles[t];if(e){const r=this.resolve(e),s={};for(const e in r){const i=r[e];s[this._extractAssetIdFromBundle(t,e)]=i}i[t]=s}})),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if("string"!=typeof t){const t={};for(const i in e)t[i]=e[i].src;return t}return e.src}resolve(t){const e=Vs(t);t=js(t);const i={};return t.forEach((t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t];const i=this._getPreferredOrder(e),r=e[0];i?.priority.forEach((t=>{i.params[t].forEach((i=>{const r=e.filter((e=>!!e[t]&&e[t]===i));r.length&&(e=r)}))})),this._resolverHash[t]=e[0]??r}else{let e=t;(this._basePath||this._rootPath)&&(e=q.toAbsolute(e,this._basePath,this._rootPath)),e=this._appendDefaultSearchParams(e),this._resolverHash[t]={src:e}}i[t]=this._resolverHash[t]})),e?i[t[0]]:i}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const e=t[0],i=this._preferredOrder.find((t=>t.params.format.includes(e.format)));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;return`${t}${/\?/.test(t)?"&":"?"}${this._defaultSearchParams}`}}class mn{constructor(){this._detections=[],this._initialized=!1,this.resolver=new fn,this.loader=new Hs,this.cache=Gs,this._backgroundLoader=new Fs(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let e=t.manifest;"string"==typeof e&&(e=await this.load(e)),this.resolver.addManifest(e)}const e=t.texturePreference?.resolution??1,i="number"==typeof e?[e]:e;let r=[];if(t.texturePreference?.format){const e=t.texturePreference?.format;r="string"==typeof e?[e]:e;for(const t of this._detections)await t.test()||(r=await t.remove(r))}else for(const s of this._detections)await s.test()&&(r=await s.add(r));this.resolver.prefer({params:{format:r,resolution:i}})}add(t,e,i){this.resolver.add(t,e,i)}async load(t,e){this._initialized||await this.init();const i=Vs(t),r=js(t).map((t=>"string"!=typeof t?(this.resolver.add(t.src,t),t.src):t)),s=this.resolver.resolve(r),n=await this._mapLoadToResolve(s,e);return i?n[r[0]]:n}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;"string"==typeof t&&(i=!0,t=[t]);const r=this.resolver.resolveBundle(t),s={},n=Object.keys(r);let a=0,o=0;const h=()=>{e?.(++a/o)},l=n.map((t=>{const e=r[t];return o+=Object.keys(e).length,this._mapLoadToResolve(e,h).then((e=>{s[t]=e}))}));return await Promise.all(l),i?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach((t=>{this._backgroundLoader.add(Object.values(t))}))}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if("string"==typeof t)return Gs.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Gs.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),r=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const n={};return i.forEach(((t,e)=>{const i=s[t.src],a=[t.src];t.alias&&a.push(...t.alias),n[r[e]]=i,Gs.set(a,i)})),n}async unload(t){this._initialized||await this.init();const e=js(t).map((t=>"string"!=typeof t?t.src:t)),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=js(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map((t=>this._unloadFromResolved(e[t])));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach((t=>{Gs.remove(t.src)})),await this.loader.unload(e)}get detections(){return this._detections}get preferWorkers(){return cn.config.preferWorkers}set preferWorkers(t){cn.config.preferWorkers=t}}const gn=new mn;Ht.handleByList(jt.LoadParser,gn.loader.parsers).handleByList(jt.ResolveParser,gn.resolver.parsers).handleByList(jt.CacheParser,gn.cache.parsers).handleByList(jt.DetectionParser,gn.detections);const yn={extension:jt.CacheParser,test:t=>Array.isArray(t)&&t.every((t=>t instanceof bi)),getCacheableAssets:(t,e)=>{const i={};return t.forEach((t=>{e.forEach(((e,r)=>{i[t+(0===r?"":r+1)]=e}))})),i}};Ht.add(yn);const vn={extension:{type:jt.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t=await S.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then((t=>t.blob()));return createImageBitmap(t).then((()=>!0),(()=>!1))},add:async t=>[...t,"avif"],remove:async t=>t.filter((t=>"avif"!==t))};Ht.add(vn);const _n={extension:{type:jt.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t=await S.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((t=>t.blob()));return createImageBitmap(t).then((()=>!0),(()=>!1))},add:async t=>[...t,"webp"],remove:async t=>t.filter((t=>"webp"!==t))};Ht.add(_n);const xn=["png","jpg","jpeg"],bn={extension:{type:jt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...xn],remove:async t=>t.filter((t=>!xn.includes(t)))};Ht.add(bn);const En={extension:jt.ResolveParser,test:cn.test,parse:t=>({resolution:parseFloat(S.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};Ht.add(En);var Tn=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(Tn||{});const wn={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let Sn,An;function Cn(){An={s3tc:Sn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Sn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Sn.getExtension("WEBGL_compressed_texture_etc"),etc1:Sn.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Sn.getExtension("WEBGL_compressed_texture_pvrtc")||Sn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Sn.getExtension("WEBGL_compressed_texture_atc"),astc:Sn.getExtension("WEBGL_compressed_texture_astc")}}const In={extension:{type:jt.DetectionParser,priority:2},test:async()=>{const t=S.ADAPTER.createCanvas().getContext("webgl");return t?(Sn=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{An||Cn();const e=[];for(const i in An){An[i]&&e.push(i)}return[...e,...t]},remove:async t=>(An||Cn(),t.filter((t=>!(t in An))))};Ht.add(In);class Rn extends Jt{constructor(t,e={width:1,height:1,autoLoad:!0}){let i,r;"string"==typeof t?(i=t,r=new Uint8Array):(i=null,r=t),super(r,e),this.origin=i,this.buffer=r?new zt(r):null,this.origin&&!1!==e.autoLoad&&this.load(),r?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}async load(){const t=await fetch(this.origin),e=await t.blob(),i=await e.arrayBuffer();return this.data=new Uint32Array(i),this.buffer=new zt(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),this}}class Pn extends Rn{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Pn._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Pn._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,i){const r=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let s=0,n=this.levels;s<n;s++){const{levelID:t,levelWidth:e,levelHeight:i,levelBuffer:n}=this._levelBuffers[s];r.compressedTexImage2D(r.TEXTURE_2D,t,this.format,e,i,0,n)}return!0}onBlobLoaded(){this._levelBuffers=Pn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,i,r,s,n,a){const o=new Array(i);let h=t.byteOffset,l=n,c=a,u=l+r-1&~(r-1),d=c+s-1&~(s-1),p=u*d*wn[e];for(let f=0;f<i;f++)o[f]={levelID:f,levelWidth:i>1?l:u,levelHeight:i>1?c:d,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,l=l>>1||1,c=c>>1||1,u=l+r-1&~(r-1),d=c+s-1&~(s-1),p=u*d*wn[e];return o}}const kn=124,Mn=3,Nn=4,On=7,Dn=19,Ln=2,Bn=0,Fn=1,Un=2,jn=3;const Gn={827611204:Tn.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:Tn.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:Tn.COMPRESSED_RGBA_S3TC_DXT5_EXT},Vn={70:Tn.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Tn.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Tn.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Tn.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Tn.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Tn.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Tn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Tn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Tn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Hn(t){const e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");const i=new Uint32Array(t,0,kn/Uint32Array.BYTES_PER_ELEMENT),r=i[Mn],s=i[Nn],n=i[On],a=new Uint32Array(t,Dn*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),o=a[1];if(4&o){const i=a[Ln];if(808540228!==i){const e=Gn[i],a=new Uint8Array(t,128);return[new Pn(a,{format:e,width:s,height:r,levels:n})]}const o=128,h=new Uint32Array(e.buffer,o,20/Uint32Array.BYTES_PER_ELEMENT),l=h[Bn],c=h[Fn],u=h[Un],d=h[jn],p=Vn[l];if(void 0===p)throw new Error(`DDSParser cannot parse texture data with DXGI format ${l}`);if(4===u)throw new Error("DDSParser does not support cubemap textures");if(6===c)throw new Error("DDSParser does not supported 3D texture data");const f=new Array,m=148;if(1===d)f.push(new Uint8Array(t,m));else{const e=wn[p];let i=0,a=s,o=r;for(let t=0;t<n;t++){i+=Math.max(1,a+3&-4)*Math.max(1,o+3&-4)*e,a>>>=1,o>>>=1}let h=m;for(let r=0;r<d;r++)f.push(new Uint8Array(t,h,i)),h+=i}return f.map((t=>new Pn(t,{format:p,width:s,height:r,levels:n})))}if(64&o)throw new Error("DDSParser does not support uncompressed texture data.");if(512&o)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&o)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&o)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}const zn=[171,75,84,88,32,49,49,187,13,10,26,10],Xn=12,Wn=16,$n=24,Yn=28,qn=36,Zn=40,Kn=44,Qn=48,Jn=52,ta=56,ea=60,ia={[u.UNSIGNED_BYTE]:1,[u.UNSIGNED_SHORT]:2,[u.INT]:4,[u.UNSIGNED_INT]:4,[u.FLOAT]:4,[u.HALF_FLOAT]:8},ra={[l.RGBA]:4,[l.RGB]:3,[l.RG]:2,[l.RED]:1,[l.LUMINANCE]:1,[l.LUMINANCE_ALPHA]:2,[l.ALPHA]:1},sa={[u.UNSIGNED_SHORT_4_4_4_4]:2,[u.UNSIGNED_SHORT_5_5_5_1]:2,[u.UNSIGNED_SHORT_5_6_5]:2};function na(t,e,i=!1){const r=new DataView(e);if(!function(t,e){for(let i=0;i<zn.length;i++)if(e.getUint8(i)!==zn[i])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}(t,r))return null;const s=67305985===r.getUint32(Xn,!0),n=r.getUint32(Wn,s),a=r.getUint32($n,s),o=r.getUint32(Yn,s),h=r.getUint32(qn,s),l=r.getUint32(Zn,s)||1,c=r.getUint32(Kn,s)||1,d=r.getUint32(Qn,s)||1,p=r.getUint32(Jn,s),f=r.getUint32(ta,s),m=r.getUint32(ea,s);if(0===l||1!==c)throw new Error("Only 2D textures are supported");if(1!==p)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==d)throw new Error("WebGL does not support array textures");const g=h+3&-4,y=l+3&-4,v=new Array(d);let _,x=h*l;if(0===n&&(x=g*y),_=0!==n?ia[n]?ia[n]*ra[a]:sa[n]:wn[o],void 0===_)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const b=i?function(t,e,i){const r=new Map;let s=0;for(;s<e;){const n=t.getUint32(64+s,i),a=64+s+4,o=3-(n+3)%4;if(0===n||n>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let h=0;for(;h<n&&0!==t.getUint8(a+h);h++);if(-1===h){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const l=(new TextDecoder).decode(new Uint8Array(t.buffer,a,h)),c=new DataView(t.buffer,a+h+1,n-h-1);r.set(l,c),s+=4+n+o}return r}(r,m,s):null;let E=x*_,T=h,w=l,S=g,A=y,C=64+m;for(let u=0;u<f;u++){const t=r.getUint32(C,s);let i=C+4;for(let r=0;r<d;r++){let t=v[r];t||(t=v[r]=new Array(f)),t[u]={levelID:u,levelWidth:f>1||0!==n?T:S,levelHeight:f>1||0!==n?w:A,levelBuffer:new Uint8Array(e,i,E)},i+=E}C+=t+4,C=C%4!=0?C+4-C%4:C,T=T>>1||1,w=w>>1||1,S=T+4-1&-4,A=w+4-1&-4,E=S*A*_}return 0!==n?{uncompressed:v.map((t=>{let e=t[0].levelBuffer,i=!1;return n===u.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):n===u.UNSIGNED_INT?(i=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):n===u.INT&&(i=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new Jt(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:n,format:i?aa(a):a}})),kvData:b}:{compressed:v.map((t=>new Pn(null,{format:o,width:h,height:l,levels:f,levelBuffers:t}))),kvData:b}}function aa(t){switch(t){case l.RGBA:return l.RGBA_INTEGER;case l.RGB:return l.RGB_INTEGER;case l.RG:return l.RG_INTEGER;case l.RED:return l.RED_INTEGER;default:return t}}const oa={extension:{type:jt.LoadParser,priority:zs.High},test:t=>Us(t,".dds"),async load(t,e,i){const r=await S.ADAPTER.fetch(t),s=Hn(await r.arrayBuffer()).map((r=>an(new ie(r,{mipmap:m.OFF,alphaMode:g.NO_PREMULTIPLIED_ALPHA,resolution:Ut(t),...e.data}),i,t)));return 1===s.length?s[0]:s},unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}};Ht.add(oa);const ha={extension:{type:jt.LoadParser,priority:zs.High},test:t=>Us(t,".ktx"),async load(t,e,i){const r=await S.ADAPTER.fetch(t),s=await r.arrayBuffer(),{compressed:n,uncompressed:a,kvData:o}=na(t,s),h=n??a,l={mipmap:m.OFF,alphaMode:g.NO_PREMULTIPLIED_ALPHA,resolution:Ut(t),...e.data},c=h.map((e=>{h===a&&Object.assign(l,{type:e.type,format:e.format});const r=new ie(e,l);return r.ktxKeyValueData=o,an(r,i,t)}));return 1===c.length?c[0]:c},unload(t){Array.isArray(t)?t.forEach((t=>t.destroy(!0))):t.destroy(!0)}};Ht.add(ha);const la={extension:jt.ResolveParser,test:t=>{const e=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(e)},parse:t=>{if("ktx"===t.split("?")[0].split(".").pop()){const e=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(e.some((e=>t.endsWith(e))))return{resolution:parseFloat(S.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e.find((e=>t.endsWith(e))),src:t}}return{resolution:parseFloat(S.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t}}};Ht.add(la);const ca=new _e,ua=class{constructor(t){this.renderer=t}async image(t,e,i){const r=new Image;return r.src=await this.base64(t,e,i),r}async base64(t,e,i){const r=this.canvas(t);if(void 0!==r.toDataURL)return r.toDataURL(e,i);if(void 0!==r.convertToBlob){const t=await r.convertToBlob({type:e,quality:i});return await new Promise((e=>{const i=new FileReader;i.onload=()=>e(i.result),i.readAsDataURL(t)}))}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(t,e){const i=this.renderer;let r,s,n=!1,a=!1;t&&(t instanceof Ei?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(r=s.baseTexture.resolution,e=e??s.frame,n=!1,i.renderTexture.bind(s)):(r=i.resolution,e||((e=ca).width=i.width,e.height=i.height),n=!0,i.renderTexture.bind(null));const o=Math.round(e.width*r),h=Math.round(e.height*r);let l=new kt(o,h,1);const c=new Uint8Array(4*o*h),u=i.gl;u.readPixels(Math.round(e.x*r),Math.round(e.y*r),o,h,u.RGBA,u.UNSIGNED_BYTE,c);const d=l.context.getImageData(0,0,o,h);if(ua.arrayPostDivide(c,d.data),l.context.putImageData(d,0,0),n){const t=new kt(l.width,l.height,1);t.context.scale(1,-1),t.context.drawImage(l.canvas,0,-h),l.destroy(),l=t}return a&&s.destroy(!0),l.canvas}pixels(t,e){const i=this.renderer;let r,s,n=!1;t&&(t instanceof Ei?s=t:(s=this.renderer.generateTexture(t),n=!0)),s?(r=s.baseTexture.resolution,e=e??s.frame,i.renderTexture.bind(s)):(r=i.resolution,e||((e=ca).width=i.width,e.height=i.height),i.renderTexture.bind(null));const a=Math.round(e.width*r),o=Math.round(e.height*r),h=new Uint8Array(4*a*o),l=i.gl;return l.readPixels(Math.round(e.x*r),Math.round(e.y*r),a,o,l.RGBA,l.UNSIGNED_BYTE,h),n&&s.destroy(!0),ua.arrayPostDivide(h,h),h}destroy(){this.renderer=null}static arrayPostDivide(t,e){for(let i=0;i<t.length;i+=4){const r=e[i+3]=t[i+3];0!==r?(e[i]=Math.round(Math.min(255*t[i]/r,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/r,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/r,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}}};let da=ua;da.extension={name:"extract",type:jt.RendererSystem},Ht.add(da);const pa={build(t){const e=t.points;let i,r,s,n,a,o;if(t.type===ge.CIRC){const e=t.shape;i=e.x,r=e.y,a=o=e.radius,s=n=0}else if(t.type===ge.ELIP){const e=t.shape;i=e.x,r=e.y,a=e.width,o=e.height,s=n=0}else{const e=t.shape,h=e.width/2,l=e.height/2;i=e.x+h,r=e.y+l,a=o=Math.max(0,Math.min(e.radius,Math.min(h,l))),s=h-a,n=l-o}if(!(a>=0&&o>=0&&s>=0&&n>=0))return void(e.length=0);const h=Math.ceil(2.3*Math.sqrt(a+o)),l=8*h+(s?4:0)+(n?4:0);if(e.length=l,0===l)return;if(0===h)return e.length=8,e[0]=e[6]=i+s,e[1]=e[3]=r+n,e[2]=e[4]=i-s,void(e[5]=e[7]=r-n);let c=0,u=4*h+(s?2:0)+2,d=u,p=l;{const t=s+a,o=n,h=i+t,l=i-t,f=r+o;if(e[c++]=h,e[c++]=f,e[--u]=f,e[--u]=l,n){const t=r-o;e[d++]=l,e[d++]=t,e[--p]=t,e[--p]=h}}for(let f=1;f<h;f++){const t=Math.PI/2*(f/h),l=s+Math.cos(t)*a,m=n+Math.sin(t)*o,g=i+l,y=i-l,v=r+m,_=r-m;e[c++]=g,e[c++]=v,e[--u]=v,e[--u]=y,e[d++]=y,e[d++]=_,e[--p]=_,e[--p]=g}{const t=n+o,a=i+s,h=i-s,l=r+t,u=r-t;e[c++]=a,e[c++]=l,e[--p]=u,e[--p]=a,s&&(e[c++]=h,e[c++]=l,e[--p]=u,e[--p]=h)}},triangulate(t,e){const i=t.points,r=e.points,s=e.indices;if(0===i.length)return;let n=r.length/2;const a=n;let o,h;if(t.type!==ge.RREC){const e=t.shape;o=e.x,h=e.y}else{const e=t.shape;o=e.x+e.width/2,h=e.y+e.height/2}const l=t.matrix;r.push(t.matrix?l.a*o+l.c*h+l.tx:o,t.matrix?l.b*o+l.d*h+l.ty:h),n++,r.push(i[0],i[1]);for(let c=2;c<i.length;c+=2)r.push(i[c],i[c+1]),s.push(n++,a,n);s.push(a+1,a,n)}};function fa(t,e=!1){const i=t.length;if(i<6)return;let r=0;for(let s=0,n=t[i-2],a=t[i-1];s<i;s+=2){const e=t[s],i=t[s+1];r+=(e-n)*(i+a),n=e,a=i}if(!e&&r>0||e&&r<=0){const e=i/2;for(let r=e+e%2;r<i;r+=2){const e=i-r-2,s=i-r-1,n=r,a=r+1;[t[e],t[n]]=[t[n],t[e]],[t[s],t[a]]=[t[a],t[s]]}}}const ma={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let i=t.points;const r=t.holes,s=e.points,n=e.indices;if(i.length>=6){fa(i,!1);const t=[];for(let s=0;s<r.length;s++){const e=r[s];fa(e.points,!0),t.push(i.length/2),i=i.concat(e.points)}const e=z(i,t,2);if(!e)return;const a=s.length/2;for(let i=0;i<e.length;i+=3)n.push(e[i]+a),n.push(e[i+1]+a),n.push(e[i+2]+a);for(let r=0;r<i.length;r++)s.push(i[r])}}},ga={build(t){const e=t.shape,i=e.x,r=e.y,s=e.width,n=e.height,a=t.points;a.length=0,s>=0&&n>=0&&a.push(i,r,i+s,r,i+s,r+n,i,r+n)},triangulate(t,e){const i=t.points,r=e.points;if(0===i.length)return;const s=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},ya={build(t){pa.build(t)},triangulate(t,e){pa.triangulate(t,e)}};var va=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(va||{}),_a=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(_a||{});const xa={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},ba=xa;class Ea{static curveTo(t,e,i,r,s,n){const a=n[n.length-2],o=n[n.length-1]-e,h=a-t,l=r-e,c=i-t,u=Math.abs(o*c-h*l);if(u<1e-8||0===s)return n[n.length-2]===t&&n[n.length-1]===e||n.push(t,e),null;const d=o*o+h*h,p=l*l+c*c,f=o*l+h*c,m=s*Math.sqrt(d)/u,g=s*Math.sqrt(p)/u,y=m*f/d,v=g*f/p,_=m*c+g*h,x=m*l+g*o,b=h*(g+y),E=o*(g+y),T=c*(m+v),w=l*(m+v);return{cx:_+t,cy:x+e,radius:s,startAngle:Math.atan2(E-x,b-_),endAngle:Math.atan2(w-x,T-_),anticlockwise:h*l>c*o}}static arc(t,e,i,r,s,n,a,o,h){const l=a-n,c=xa._segmentsCount(Math.abs(l)*s,40*Math.ceil(Math.abs(l)/pe)),u=l/(2*c),d=2*u,p=Math.cos(u),f=Math.sin(u),m=c-1,g=m%1/m;for(let y=0;y<=m;++y){const t=u+n+d*(y+g*y),e=Math.cos(t),a=-Math.sin(t);h.push((p*e+f*a)*s+i,(p*-a+f*e)*s+r)}}}class Ta{static curveLength(t,e,i,r,s,n,a,o){let h=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,g=0,y=0,v=0,_=t,x=e;for(let b=1;b<=10;++b)l=b/10,c=l*l,u=c*l,d=1-l,p=d*d,f=p*d,m=f*t+3*p*l*i+3*d*c*s+u*a,g=f*e+3*p*l*r+3*d*c*n+u*o,y=_-m,v=x-g,_=m,x=g,h+=Math.sqrt(y*y+v*v);return h}static curveTo(t,e,i,r,s,n,a){const o=a[a.length-2],h=a[a.length-1];a.length-=2;const l=xa._segmentsCount(Ta.curveLength(o,h,t,e,i,r,s,n));let c=0,u=0,d=0,p=0,f=0;a.push(o,h);for(let m=1,g=0;m<=l;++m)g=m/l,c=1-g,u=c*c,d=u*c,p=g*g,f=p*g,a.push(d*o+3*u*g*t+3*c*p*i+f*s,d*h+3*u*g*e+3*c*p*r+f*n)}}function wa(t,e,i,r,s,n,a,o){let h,l;a?(h=r,l=-i):(h=-r,l=i);const c=t-i*s+h,u=e-r*s+l,d=t+i*n+h,p=e+r*n+l;return o.push(c,u),o.push(d,p),2}function Sa(t,e,i,r,s,n,a,o){const h=i-t,l=r-e;let c=Math.atan2(h,l),u=Math.atan2(s-t,n-e);o&&c<u?c+=2*Math.PI:!o&&c>u&&(u+=2*Math.PI);let d=c;const p=u-c,f=Math.abs(p),m=Math.sqrt(h*h+l*l),g=1+(15*f*Math.sqrt(m)/Math.PI>>0),y=p/g;if(d+=y,o){a.push(t,e),a.push(i,r);for(let i=1,r=d;i<g;i++,r+=y)a.push(t,e),a.push(t+Math.sin(r)*m,e+Math.cos(r)*m);a.push(t,e),a.push(s,n)}else{a.push(i,r),a.push(t,e);for(let i=1,r=d;i<g;i++,r+=y)a.push(t+Math.sin(r)*m,e+Math.cos(r)*m),a.push(t,e);a.push(s,n),a.push(t,e)}return 2*g}function Aa(t,e){t.lineStyle.native?function(t,e){let i=0;const r=t.shape,s=t.points||r.points,n=r.type!==ge.POLY||r.closeStroke;if(0===s.length)return;const a=e.points,o=e.indices,h=s.length/2,l=a.length/2;let c=l;for(a.push(s[0],s[1]),i=1;i<h;i++)a.push(s[2*i],s[2*i+1]),o.push(c,c+1),c++;n&&o.push(c,l)}(t,e):function(t,e){const i=t.shape;let r=t.points||i.points.slice();const s=e.closePointEps;if(0===r.length)return;const n=t.lineStyle,a=new ye(r[0],r[1]),o=new ye(r[r.length-2],r[r.length-1]),h=i.type!==ge.POLY||i.closeStroke,l=Math.abs(a.x-o.x)<s&&Math.abs(a.y-o.y)<s;if(h){r=r.slice(),l&&(r.pop(),r.pop(),o.set(r[r.length-2],r[r.length-1]));const t=.5*(a.x+o.x),e=.5*(o.y+a.y);r.unshift(t,e),r.push(t,e)}const c=e.points,u=r.length/2;let d=r.length;const p=c.length/2,f=n.width/2,m=f*f,g=n.miterLimit*n.miterLimit;let y=r[0],v=r[1],_=r[2],x=r[3],b=0,E=0,T=-(v-x),w=y-_,S=0,A=0,C=Math.sqrt(T*T+w*w);T/=C,w/=C,T*=f,w*=f;const I=n.alignment,R=2*(1-I),P=2*I;h||(n.cap===_a.ROUND?d+=Sa(y-T*(R-P)*.5,v-w*(R-P)*.5,y-T*R,v-w*R,y+T*P,v+w*P,c,!0)+2:n.cap===_a.SQUARE&&(d+=wa(y,v,T,w,R,P,!0,c))),c.push(y-T*R,v-w*R),c.push(y+T*P,v+w*P);for(let N=1;N<u-1;++N){y=r[2*(N-1)],v=r[2*(N-1)+1],_=r[2*N],x=r[2*N+1],b=r[2*(N+1)],E=r[2*(N+1)+1],T=-(v-x),w=y-_,C=Math.sqrt(T*T+w*w),T/=C,w/=C,T*=f,w*=f,S=-(x-E),A=_-b,C=Math.sqrt(S*S+A*A),S/=C,A/=C,S*=f,A*=f;const t=_-y,e=v-x,i=_-b,s=E-x,a=t*i+e*s,o=e*i-s*t,h=o<0;if(Math.abs(o)<.001*Math.abs(a)){c.push(_-T*R,x-w*R),c.push(_+T*P,x+w*P),a>=0&&(n.join===va.ROUND?d+=Sa(_,x,_-T*R,x-w*R,_-S*R,x-A*R,c,!1)+4:d+=2,c.push(_-S*P,x-A*P),c.push(_+S*R,x+A*R));continue}const l=(-T+y)*(-w+x)-(-T+_)*(-w+v),u=(-S+b)*(-A+x)-(-S+_)*(-A+E),p=(t*u-i*l)/o,I=(s*l-e*u)/o,k=(p-_)*(p-_)+(I-x)*(I-x),M=_+(p-_)*R,O=x+(I-x)*R,D=_-(p-_)*P,L=x-(I-x)*P,B=h?R:P;k<=Math.min(t*t+e*e,i*i+s*s)+B*B*m?n.join===va.BEVEL||k/m>g?(h?(c.push(M,O),c.push(_+T*P,x+w*P),c.push(M,O),c.push(_+S*P,x+A*P)):(c.push(_-T*R,x-w*R),c.push(D,L),c.push(_-S*R,x-A*R),c.push(D,L)),d+=2):n.join===va.ROUND?h?(c.push(M,O),c.push(_+T*P,x+w*P),d+=Sa(_,x,_+T*P,x+w*P,_+S*P,x+A*P,c,!0)+4,c.push(M,O),c.push(_+S*P,x+A*P)):(c.push(_-T*R,x-w*R),c.push(D,L),d+=Sa(_,x,_-T*R,x-w*R,_-S*R,x-A*R,c,!1)+4,c.push(_-S*R,x-A*R),c.push(D,L)):(c.push(M,O),c.push(D,L)):(c.push(_-T*R,x-w*R),c.push(_+T*P,x+w*P),n.join===va.ROUND?d+=h?Sa(_,x,_+T*P,x+w*P,_+S*P,x+A*P,c,!0)+2:Sa(_,x,_-T*R,x-w*R,_-S*R,x-A*R,c,!1)+2:n.join===va.MITER&&k/m<=g&&(h?(c.push(D,L),c.push(D,L)):(c.push(M,O),c.push(M,O)),d+=2),c.push(_-S*R,x-A*R),c.push(_+S*P,x+A*P),d+=2)}y=r[2*(u-2)],v=r[2*(u-2)+1],_=r[2*(u-1)],x=r[2*(u-1)+1],T=-(v-x),w=y-_,C=Math.sqrt(T*T+w*w),T/=C,w/=C,T*=f,w*=f,c.push(_-T*R,x-w*R),c.push(_+T*P,x+w*P),h||(n.cap===_a.ROUND?d+=Sa(_-T*(R-P)*.5,x-w*(R-P)*.5,_-T*R,x-w*R,_+T*P,x+w*P,c,!1)+2:n.cap===_a.SQUARE&&(d+=wa(_,x,T,w,R,P,!1,c)));const k=e.indices,M=xa.epsilon*xa.epsilon;for(let N=p;N<d+p-2;++N)y=c[2*N],v=c[2*N+1],_=c[2*(N+1)],x=c[2*(N+1)+1],b=c[2*(N+2)],E=c[2*(N+2)+1],Math.abs(y*(x-E)+_*(E-v)+b*(v-x))<M||k.push(N,N+1,N+2)}(t,e)}class Ca{static curveLength(t,e,i,r,s,n){const a=t-2*i+s,o=e-2*r+n,h=2*i-2*t,l=2*r-2*e,c=4*(a*a+o*o),u=4*(a*h+o*l),d=h*h+l*l,p=2*Math.sqrt(c+u+d),f=Math.sqrt(c),m=2*c*f,g=2*Math.sqrt(d),y=u/f;return(m*p+f*u*(p-g)+(4*d*c-u*u)*Math.log((2*f+y+p)/(y+g)))/(4*m)}static curveTo(t,e,i,r,s){const n=s[s.length-2],a=s[s.length-1],o=xa._segmentsCount(Ca.curveLength(n,a,t,e,i,r));let h=0,l=0;for(let c=1;c<=o;++c){const u=c/o;h=n+(t-n)*u,l=a+(e-a)*u,s.push(h+(t+(i-t)*u-h)*u,l+(e+(r-e)*u-l)*u)}}}const Ia={[ge.POLY]:ma,[ge.CIRC]:pa,[ge.ELIP]:pa,[ge.RECT]:ga,[ge.RREC]:ya},Ra=[],Pa=[];class ka{constructor(t,e=null,i=null,r=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=r,this.type=t.type}clone(){return new ka(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class Ma{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const Na=new ye,Oa=class extends de{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ts,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Pa.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),Ra.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,i=null,r=null){const s=new ka(t,e,i,r);return this.graphicsData.push(s),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const i=new ka(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let i=0;i<e.length;++i){const r=e[i];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(t,Na):Na.copyFrom(t),r.shape.contains(Na.x,Na.y)))){let t=!1;if(r.holes)for(let e=0;e<r.holes.length;e++){if(r.holes[e].shape.contains(Na.x,Na.y)){t=!0;break}}if(!t)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let i=null,r=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],r=i.style);for(let o=this.shapeIndex;o<e.length;o++){this.shapeIndex++;const s=e[o],n=s.fillStyle,a=s.lineStyle;Ia[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(n.visible||a.visible)&&this.processHoles(s.holes);for(let e=0;e<2;e++){const o=0===e?n:a;if(!o.visible)continue;const h=o.texture.baseTexture,l=this.indices.length,c=this.points.length/2;h.wrapMode=f.REPEAT,0===e?this.processFill(s):this.processLine(s);const u=this.points.length/2-c;0!==u&&(i&&!this._compareStyles(r,o)&&(i.end(l,c),i=null),i||(i=Ra.pop()||new Ma,i.begin(o,l,c),this.batches.push(i),r=o),this.addUvs(this.points,t,o.texture,c,u,o.matrix))}}const s=this.indices.length,n=this.points.length/2;if(i&&i.end(s,n),0===this.batches.length)return void(this.batchable=!0);const a=n>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const e=this.graphicsData[t],i=e.fillStyle,r=e.lineStyle;if(i&&!i.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,i=t.length;e<i;e++){const i=t[e];for(let t=0;t<i.size;t++){const e=i.start+t;this.indicesUint16[e]=this.indicesUint16[e]-i.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*Oa.BATCHABLE_SIZE}buildDrawCalls(){let t=++ie._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),Pa.push(this.drawCalls[h]);this.drawCalls.length=0;const e=this.colors,i=this.textureIds;let r=Pa.pop();r||(r=new re,r.texArray=new ri),r.texArray.count=0,r.start=0,r.size=0,r.type=h.TRIANGLES;let s=0,n=null,a=0,o=!1,l=h.TRIANGLES,c=0;this.drawCalls.push(r);for(let u=0;u<this.batches.length;u++){const d=this.batches[u],p=8,m=d.style,g=m.texture.baseTexture;o!==!!m.native&&(o=!!m.native,l=o?h.LINES:h.TRIANGLES,n=null,s=p,t++),n!==g&&(n=g,g._batchEnabled!==t&&(s===p&&(t++,s=0,r.size>0&&(r=Pa.pop(),r||(r=new re,r.texArray=new ri),this.drawCalls.push(r)),r.start=c,r.size=0,r.texArray.count=0,r.type=l),g.touched=1,g._batchEnabled=t,g._batchLocation=s,g.wrapMode=f.REPEAT,r.texArray.elements[r.texArray.count++]=g,s++)),r.size+=d.size,c+=d.size,a=g._batchLocation,this.addColors(e,m.color,m.alpha,d.attribSize,d.attribStart),this.addTextureIds(i,a,d.attribSize,d.attribStart)}ie._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,i=this.colors,r=this.textureIds,s=new ArrayBuffer(3*t.length*4),n=new Float32Array(s),a=new Uint32Array(s);let o=0;for(let h=0;h<t.length/2;h++)n[o++]=t[2*h],n[o++]=t[2*h+1],n[o++]=e[2*h],n[o++]=e[2*h+1],a[o++]=i[h],n[o++]=r[h];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(t){if(t.holes.length)ma.triangulate(t,this);else{Ia[t.type].triangulate(t,this)}}processLine(t){Aa(t,this);for(let e=0;e<t.holes.length;e++)Aa(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const i=t[e];Ia[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let i=0;i<t.length/2;i++){const r=t[2*i],s=t[2*i+1];t[2*i]=e.a*r+e.c*s+e.tx,t[2*i+1]=e.b*r+e.d*s+e.ty}}addColors(t,e,i,r,s=0){const n=ct((e>>16)+(65280&e)+((255&e)<<16),i);t.length=Math.max(t.length,s+r);for(let a=0;a<r;a++)t[s+a]=n}addTextureIds(t,e,i,r=0){t.length=Math.max(t.length,r+i);for(let s=0;s<i;s++)t[r+s]=e}addUvs(t,e,i,r,s,n=null){let a=0;const o=e.length,h=i.frame;for(;a<s;){let i=t[2*(r+a)],s=t[2*(r+a)+1];if(n){const t=n.a*i+n.c*s+n.tx;s=n.b*i+n.d*s+n.ty,i=t}a++,e.push(i/h.width,s/h.height)}const l=i.baseTexture;(h.width<l.width||h.height<l.height)&&this.adjustUvs(e,i,o,s)}adjustUvs(t,e,i,r){const s=e.baseTexture,n=1e-6,a=i+2*r,o=e.frame,h=o.width/s.width,l=o.height/s.height;let c=o.x/o.width,u=o.y/o.height,d=Math.floor(t[i]+n),p=Math.floor(t[i+1]+n);for(let f=i+2;f<a;f+=2)d=Math.min(d,Math.floor(t[f]+n)),p=Math.min(p,Math.floor(t[f+1]+n));c-=d,u-=p;for(let f=i;f<a;f+=2)t[f]=(t[f]+c)*h,t[f+1]=(t[f+1]+u)*l}};let Da=Oa;Da.BATCHABLE_SIZE=100;class La{constructor(){this.color=16777215,this.alpha=1,this.texture=bi.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new La;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=bi.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Ba extends La{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=_a.BUTT,this.join=va.MITER,this.miterLimit=10}clone(){const t=new Ba;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Fa=new Float32Array(3),Ua={},ja=class extends as{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new La,this._lineStyle=new Ba,this._matrix=null,this._holeMode=!1,this.state=Yt.for2d(),this._geometry=t||new Da,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=o.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ja(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,i=1,r=.5,s=!1){return"number"==typeof t&&(t={width:t,color:e,alpha:i,alignment:r,native:s}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:bi.WHITE,color:t?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:_a.BUTT,join:va.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();const e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Ee,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Ee,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,r=i[i.length-2],s=i[i.length-1];return r===t&&s===e||i.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,i,r){this._initCurve();const s=this.currentPath.points;return 0===s.length&&this.moveTo(0,0),Ca.curveTo(t,e,i,r,s),this}bezierCurveTo(t,e,i,r,s,n){return this._initCurve(),Ta.curveTo(t,e,i,r,s,n,this.currentPath.points),this}arcTo(t,e,i,r,s){this._initCurve(t,e);const n=this.currentPath.points,a=Ea.curveTo(t,e,i,r,s,n);if(a){const{cx:t,cy:e,radius:i,startAngle:r,endAngle:s,anticlockwise:n}=a;this.arc(t,e,i,r,s,n)}return this}arc(t,e,i,r,s,n=!1){if(r===s)return this;!n&&s<=r?s+=pe:n&&r<=s&&(r+=pe);if(0===s-r)return this;const a=t+Math.cos(r)*i,o=e+Math.sin(r)*i,h=this._geometry.closePointEps;let l=this.currentPath?this.currentPath.points:null;if(l){const t=Math.abs(l[l.length-2]-a),e=Math.abs(l[l.length-1]-o);t<h&&e<h||l.push(a,o)}else this.moveTo(a,o),l=this.currentPath.points;return Ea.arc(a,o,t,e,i,r,s,n,l),this}beginFill(t=0,e=1){return this.beginTextureFill({texture:bi.WHITE,color:t,alpha:e})}beginTextureFill(t){t=Object.assign({texture:bi.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();const e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,i,r){return this.drawShape(new _e(t,e,i,r))}drawRoundedRect(t,e,i,r,s){return this.drawShape(new Te(t,e,i,r,s))}drawCircle(t,e,i){return this.drawShape(new xe(t,e,i))}drawEllipse(t,e,i,r){return this.drawShape(new be(t,e,i,r))}drawPolygon(...t){let e,i=!0;const r=t[0];r.points?(i=r.closeStroke,e=r.points):e=Array.isArray(t[0])?t[0]:t;const s=new Ee(e);return s.closeStroke=i,this.drawShape(s),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==ge.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(let r=0;r<i;r++){const i=t.batches[r],s=i.style.color,n=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),o={vertexData:n,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),uvs:a,_batchRGB:rt(s),_tintRGB:s,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=o}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,i=this.batches.length;e<i;e++){const i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}}_renderDirect(t){const e=this._resolveDirectShader(t),i=this._geometry,r=this.tint,s=this.worldAlpha,n=e.uniforms,a=i.drawCalls;n.translationMatrix=this.transform.worldTransform,n.tint[0]=(r>>16&255)/255*s,n.tint[1]=(r>>8&255)/255*s,n.tint[2]=(255&r)/255*s,n.tint[3]=s,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(let o=0,h=a.length;o<h;o++)this._renderDrawCallDirect(t,i.drawCalls[o])}_renderDrawCallDirect(t,e){const{texArray:i,type:r,size:s,start:n}=e,a=i.count;for(let o=0;o<a;o++)t.texture.bind(i.elements[o],o);t.geometry.draw(r,s,n)}_resolveDirectShader(t){let e=this.shader;const i=this.pluginName;if(!e){if(!Ua[i]){const{maxTextures:e}=t.plugins[i],r=new Int32Array(e);for(let t=0;t<e;t++)r[t]=t;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new we,default:ti.from({uSamplers:r},!0)},n=t.plugins[i]._shader.program;Ua[i]=new ei(n,s)}e=Ua[i]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:i,maxX:r,maxY:s}=t.bounds;this._bounds.addFrame(this.transform,e,i,r,s)}containsPoint(t){return this.worldTransform.applyInverse(t,ja._TEMP_POINT),this._geometry.containsPoint(ja._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=rt(this.tint,Fa);for(let e=0;e<this.batches.length;e++){const i=this.batches[e],r=i._batchRGB,s=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);i._tintRGB=(s>>16)+(65280&s)+((255&s)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,i=e.a,r=e.b,s=e.c,n=e.d,a=e.tx,o=e.ty,h=this._geometry.points,l=this.vertexData;let c=0;for(let u=0;u<h.length;u+=2){const t=h[u],e=h[u+1];l[c++]=i*t+s*e+a,l[c++]=n*e+r*t+o}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let Ga=ja;Ga.curves=xa,Ga._TEMP_POINT=new ye;const Va={buildPoly:ma,buildCircle:pa,buildRectangle:ga,buildRoundedRectangle:ya,buildLine:Aa,ArcUtils:Ea,BezierUtils:Ta,QuadraticUtils:Ca,BatchPart:Ma,FILL_COMMANDS:Ia,BATCH_POOL:Ra,DRAW_CALL_POOL:Pa};class Ha{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const za=new ye,Xa=new Ee,Wa=class extends as{constructor(t,e,i,r=h.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=i||Yt.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=S.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===h.TRIANGLES&&e.length<2*Wa.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const r=this.transform.worldTransform,s=r.a,n=r.b,a=r.c,o=r.d,h=r.tx,l=r.ty,c=this.vertexData;for(let u=0;u<c.length/2;u++){const t=e[2*u],i=e[2*u+1];c[2*u]=s*t+a*i+h,c[2*u+1]=n*t+o*i+l}if(this._roundPixels){const t=S.RESOLUTION;for(let e=0;e<c.length;++e)c[e]=Math.round(c[e]*t)/t}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Ha(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,za);const e=this.geometry.getBuffer("aVertexPosition").data,i=Xa.points,r=this.geometry.getIndex().data,s=r.length,n=4===this.drawMode?3:1;for(let a=0;a+2<s;a+=n){const t=2*r[a],s=2*r[a+1],n=2*r[a+2];if(i[0]=e[t],i[1]=e[t+1],i[2]=e[s],i[3]=e[s+1],i[4]=e[n],i[5]=e[n+1],Xa.contains(za.x,za.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let $a=Wa;$a.BATCHABLE_SIZE=100;class Ya extends ue{constructor(t,e,i){super();const r=new ne(t),s=new ne(e,!0),n=new ne(i,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,u.FLOAT).addAttribute("aTextureCoord",s,2,!1,u.FLOAT).addIndex(n),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class qa extends ei{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:we.IDENTITY,uColor:new Float32Array([1,1,1,1])};(e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e)).uniforms&&Object.assign(i,e.uniforms),super(e.program||Qe.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i),this._colorDirty=!1,this.uvMatrix=new Li(t),this.batchable=void 0===e.program,this.pluginName=e.pluginName,this.tint=e.tint,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture;ut(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Za extends Ya{constructor(t=100,e=100,i=10,r=10){super(),this.segWidth=i,this.segHeight=r,this.width=t,this.height=e,this.build()}build(){const t=this.segWidth*this.segHeight,e=[],i=[],r=[],s=this.segWidth-1,n=this.segHeight-1,a=this.width/s,o=this.height/n;for(let l=0;l<t;l++){const t=l%this.segWidth,r=l/this.segWidth|0;e.push(t*a,r*o),i.push(t/s,r/n)}const h=s*n;for(let l=0;l<h;l++){const t=l%s,e=l/s|0,i=e*this.segWidth+t,n=e*this.segWidth+t+1,a=(e+1)*this.segWidth+t,o=(e+1)*this.segWidth+t+1;r.push(i,n,a,n,o,a)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class Ka extends Ya{constructor(t=200,e,i=0){super(new Float32Array(4*e.length),new Float32Array(4*e.length),new Uint16Array(6*(e.length-1))),this.points=e,this._width=t,this.textureScale=i,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),r=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));const s=i.data,n=r.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,o=t[0];const h=this._width*this.textureScale,l=t.length;for(let u=0;u<l;u++){const e=4*u;if(this.textureScale>0){const e=o.x-t[u].x,i=o.y-t[u].y,r=Math.sqrt(e*e+i*i);o=t[u],a+=r/h}else a=u/(l-1);s[e]=a,s[e+1]=0,s[e+2]=a,s[e+3]=1}let c=0;for(let u=0;u<l-1;u++){const t=2*u;n[c++]=t,n[c++]=t+1,n[c++]=t+2,n[c++]=t+2,n[c++]=t+1,n[c++]=t+3}i.update(),r.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e,i=t[0],r=0,s=0;const n=this.buffers[0].data,a=t.length;for(let o=0;o<a;o++){const h=t[o],l=4*o;e=o<t.length-1?t[o+1]:h,s=-(e.x-i.x),r=e.y-i.y;let c=10*(1-o/(a-1));c>1&&(c=1);const u=Math.sqrt(r*r+s*s),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=u,s/=u,r*=d,s*=d,n[l]=h.x+r,n[l+1]=h.y+s,n[l+2]=h.x-r,n[l+3]=h.y-s,i=h}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class Qa extends $a{constructor(t,e,i){super(new Za(t.width,t.height,e,i),new qa(bi.WHITE)),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:e,height:i}=this.shader.texture;!this.autoResize||t.width===e&&t.height===i||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}class Ja extends Qa{constructor(t,e=10,i=10,r=10,s=10){super(bi.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=e,this._rightWidth=r,this._topHeight=i,this._bottomHeight=s,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,r=this._height>i?1:this._height/i;return Math.min(e,r)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const i=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class to extends $a{constructor(t=bi.EMPTY,e,i,r,s){const n=new Ya(e,i,r);n.getBuffer("aVertexPosition").static=!1;super(n,new qa(t),null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class eo extends $a{constructor(t,e,i=0){const r=new Ka(t.height,e,i),s=new qa(t);i>0&&(t.baseTexture.wrapMode=f.REPEAT),super(r,s),this.autoUpdate=!0}_render(t){const e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),super._render(t)}}class io extends as{constructor(t=1500,e,i=16384,r=!1){super();i>16384&&(i=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=o.NORMAL,this.autoResize=r,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e),this._tint=0,this.tintRgb=new Float32Array(4),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tint}set tint(t){this._tint=t,rt(t,this.tintRgb)}render(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(()=>this.onChildrenChange(0)))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const e=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class ro{constructor(t,e,i){this.geometry=new ue,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<t.length;++r){let i=t[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||u.FLOAT,offset:i.offset},e[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new ne(pt(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let n=0;n<this.dynamicProperties.length;++n){const t=this.dynamicProperties[n];t.offset=e,e+=t.size,this.dynamicStride+=t.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new ne(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let n=0;n<this.staticProperties.length;++n){const t=this.staticProperties[n];t.offset=r,r+=t.size,this.staticStride+=t.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ne(this.staticData,!0,!1);for(let n=0;n<this.dynamicProperties.length;++n){const e=this.dynamicProperties[n];t.addAttribute(e.attributeName,this.dynamicBuffer,0,e.type===u.UNSIGNED_BYTE,e.type,4*this.dynamicStride,4*e.offset)}for(let n=0;n<this.staticProperties.length;++n){const e=this.staticProperties[n];t.addAttribute(e.attributeName,this.staticBuffer,0,e.type===u.UNSIGNED_BYTE,e.type,4*this.staticStride,4*e.offset)}}uploadDynamic(t,e,i){for(let r=0;r<this.dynamicProperties.length;r++){const s=this.dynamicProperties[r];s.uploadFunction(t,e,i,s.type===u.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let r=0;r<this.staticProperties.length;r++){const s=this.staticProperties[r];s.uploadFunction(t,e,i,s.type===u.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class so extends si{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new we,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:u.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=ei.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=Yt.for2d()}render(t){const e=t.children,i=t._maxSize,r=t._batchSize,s=this.renderer;let n=e.length;if(0===n)return;n>i&&!t.autoResize&&(n=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const o=e[0]._texture.baseTexture,h=o.alphaMode>0;this.state.blendMode=ht(t.blendMode,h),s.state.set(this.state);const l=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=lt(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=o,this.renderer.shader.bind(this.shader);let u=!1;for(let d=0,p=0;d<n;d+=r,p+=1){let i=n-d;i>r&&(i=r),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const o=a[p];o.uploadDynamic(e,d,i);const h=t._bufferUpdateIDs[p]||0;u=u||o._updateID<h,u&&(o._updateID=t._updateID,o.uploadStatic(e,d,i)),s.geometry.bind(o.geometry),l.drawElements(l.TRIANGLES,6*i,l.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,r=t._batchSize,s=t._properties;for(let n=0;n<i;n+=r)e.push(new ro(this.properties,s,r));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new ro(this.properties,i,e)}uploadVertices(t,e,i,r,s,n){let a=0,o=0,h=0,l=0;for(let c=0;c<i;++c){const i=t[e+c],u=i._texture,d=i.scale.x,p=i.scale.y,f=u.trim,m=u.orig;f?(o=f.x-i.anchor.x*m.width,a=o+f.width,l=f.y-i.anchor.y*m.height,h=l+f.height):(a=m.width*(1-i.anchor.x),o=m.width*-i.anchor.x,h=m.height*(1-i.anchor.y),l=m.height*-i.anchor.y),r[n]=o*d,r[n+1]=l*p,r[n+s]=a*d,r[n+s+1]=l*p,r[n+2*s]=a*d,r[n+2*s+1]=h*p,r[n+3*s]=o*d,r[n+3*s+1]=h*p,n+=4*s}}uploadPosition(t,e,i,r,s,n){for(let a=0;a<i;a++){const i=t[e+a].position;r[n]=i.x,r[n+1]=i.y,r[n+s]=i.x,r[n+s+1]=i.y,r[n+2*s]=i.x,r[n+2*s+1]=i.y,r[n+3*s]=i.x,r[n+3*s+1]=i.y,n+=4*s}}uploadRotation(t,e,i,r,s,n){for(let a=0;a<i;a++){const i=t[e+a].rotation;r[n]=i,r[n+s]=i,r[n+2*s]=i,r[n+3*s]=i,n+=4*s}}uploadUvs(t,e,i,r,s,n){for(let a=0;a<i;++a){const i=t[e+a]._texture._uvs;i?(r[n]=i.x0,r[n+1]=i.y0,r[n+s]=i.x1,r[n+s+1]=i.y1,r[n+2*s]=i.x2,r[n+2*s+1]=i.y2,r[n+3*s]=i.x3,r[n+3*s+1]=i.y3,n+=4*s):(r[n]=0,r[n+1]=0,r[n+s]=0,r[n+s+1]=0,r[n+2*s]=0,r[n+2*s+1]=0,r[n+3*s]=0,r[n+3*s+1]=0,n+=4*s)}}uploadTint(t,e,i,r,s,n){for(let a=0;a<i;++a){const i=t[e+a],o=i._texture.baseTexture.alphaMode>0,h=i.alpha,l=h<1&&o?ct(i._tintRGB,h):i._tintRGB+(255*h<<24);r[n]=l,r[n+s]=l,r[n+2*s]=l,r[n+3*s]=l,n+=4*s}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}so.extension={name:"particle",type:jt.RendererPlugin},Ht.add(so);var no=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(no||{});const ao={willReadFrequently:!0},oo=class{static get experimentalLetterSpacingSupported(){let t=oo._experimentalLetterSpacingSupported;if(void 0!==t){const e=S.ADAPTER.getCanvasRenderingContext2D().prototype;t=oo._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,r,s,n,a,o,h){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=s,this.lineWidths=n,this.lineHeight=a,this.maxLineWidth=o,this.fontProperties=h}static measureText(t,e,i,r=oo._canvas){i=null==i?e.wordWrap:i;const s=e.toFontString(),n=oo.measureFont(s);0===n.fontSize&&(n.fontSize=e.fontSize,n.ascent=e.fontSize);const a=r.getContext("2d",ao);a.font=s;const o=(i?oo.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),h=new Array(o.length);let l=0;for(let p=0;p<o.length;p++){const t=oo._measureText(o[p],e.letterSpacing,a);h[p]=t,l=Math.max(l,t)}let c=l+e.strokeThickness;e.dropShadow&&(c+=e.dropShadowDistance);const u=e.lineHeight||n.fontSize+e.strokeThickness;let d=Math.max(u,n.fontSize+2*e.strokeThickness)+(o.length-1)*(u+e.leading);return e.dropShadow&&(d+=e.dropShadowDistance),new oo(t,e,c,d,o,h,u+e.leading,l,n)}static _measureText(t,e,i){let r=!1;oo.experimentalLetterSpacingSupported&&(oo.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,r=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(t).width;return s>0&&(r?s-=e:s+=(oo.graphemeSegmenter(t).length-1)*e),s}static wordWrap(t,e,i=oo._canvas){const r=i.getContext("2d",ao);let s=0,n="",a="";const o=Object.create(null),{letterSpacing:h,whiteSpace:l}=e,c=oo.collapseSpaces(l),u=oo.collapseNewlines(l);let d=!c;const p=e.wordWrapWidth+h,f=oo.tokenize(t);for(let m=0;m<f.length;m++){let t=f[m];if(oo.isNewline(t)){if(!u){a+=oo.addLine(n),d=!c,n="",s=0;continue}t=" "}if(c){const e=oo.isBreakingSpace(t),i=oo.isBreakingSpace(n[n.length-1]);if(e&&i)continue}const i=oo.getFromCache(t,h,o,r);if(i>p)if(""!==n&&(a+=oo.addLine(n),n="",s=0),oo.canBreakWords(t,e.breakWords)){const i=oo.wordWrapSplit(t);for(let l=0;l<i.length;l++){let c=i[l],u=c,f=1;for(;i[l+f];){const r=i[l+f];if(oo.canBreakChars(u,r,t,l,e.breakWords))break;c+=r,u=r,f++}l+=f-1;const m=oo.getFromCache(c,h,o,r);m+s>p&&(a+=oo.addLine(n),d=!1,n="",s=0),n+=c,s+=m}}else{n.length>0&&(a+=oo.addLine(n),n="",s=0);const e=m===f.length-1;a+=oo.addLine(t,!e),d=!1,n="",s=0}else i+s>p&&(d=!1,a+=oo.addLine(n),n="",s=0),(n.length>0||!oo.isBreakingSpace(t)||d)&&(n+=t,s+=i)}return a+=oo.addLine(n,!1),a}static addLine(t,e=!0){return t=oo.trimRight(t),t=e?`${t}\n`:t}static getFromCache(t,e,i,r){let s=i[t];return"number"!=typeof s&&(s=oo._measureText(t,e,r)+e,i[t]=s),s}static collapseSpaces(t){return"normal"===t||"pre-line"===t}static collapseNewlines(t){return"normal"===t}static trimRight(t){if("string"!=typeof t)return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!oo.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static isNewline(t){return"string"==typeof t&&oo._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return"string"==typeof t&&oo._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let i="";if("string"!=typeof t)return e;for(let r=0;r<t.length;r++){const s=t[r],n=t[r+1];oo.isBreakingSpace(s,n)||oo.isNewline(s)?(""!==i&&(e.push(i),i=""),e.push(s)):i+=s}return""!==i&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,r,s){return!0}static wordWrapSplit(t){return oo.graphemeSegmenter(t)}static measureFont(t){if(oo._fonts[t])return oo._fonts[t];const e={ascent:0,descent:0,fontSize:0},i=oo._canvas,r=oo._context;r.font=t;const s=oo.METRICS_STRING+oo.BASELINE_SYMBOL,n=Math.ceil(r.measureText(s).width);let a=Math.ceil(r.measureText(oo.BASELINE_SYMBOL).width);const o=Math.ceil(oo.HEIGHT_MULTIPLIER*a);if(a=a*oo.BASELINE_MULTIPLIER|0,0===n||0===o)return oo._fonts[t]=e,e;i.width=n,i.height=o,r.fillStyle="#f00",r.fillRect(0,0,n,o),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(s,0,a);const h=r.getImageData(0,0,n,o).data,l=h.length,c=4*n;let u=0,d=0,p=!1;for(u=0;u<a;++u){for(let t=0;t<c;t+=4)if(255!==h[d+t]){p=!0;break}if(p)break;d+=c}for(e.ascent=a-u,d=l-c,p=!1,u=o;u>a;--u){for(let t=0;t<c;t+=4)if(255!==h[d+t]){p=!0;break}if(p)break;d-=c}return e.descent=u-a,e.fontSize=e.ascent+e.descent,oo._fonts[t]=e,e}static clearMetrics(t=""){t?delete oo._fonts[t]:oo._fonts={}}static get _canvas(){if(!oo.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",ao)?.measureText)return oo.__canvas=t,t;e=S.ADAPTER.createCanvas()}catch(t){e=S.ADAPTER.createCanvas()}e.width=e.height=10,oo.__canvas=e}return oo.__canvas}static get _context(){return oo.__context||(oo.__context=oo._canvas.getContext("2d",ao)),oo.__context}};let ho=oo;ho.METRICS_STRING="|\xc9q\xc5",ho.BASELINE_SYMBOL="M",ho.BASELINE_MULTIPLIER=1.4,ho.HEIGHT_MULTIPLIER=2,ho.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map((t=>t.segment))}return t=>[...t]})(),ho.experimentalLetterSpacing=!1,ho._fonts={},ho._newlines=[10,13],ho._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const lo=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],co=class{constructor(t){this.styleID=0,this.reset(),mo(this,t,t)}clone(){const t={};return mo(t,this,co.defaultStyle),new co(t)}reset(){mo(this,co.defaultStyle,co.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=fo(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=fo(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=fo(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let t=e[i].trim();/([\"\'])[^\'\"]+\1/.test(t)||lo.includes(t)||(t=`"${t}"`),e[i]=t}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let uo=co;function po(t){return"number"==typeof t?st(t):("string"==typeof t&&t.startsWith("0x")&&(t=t.replace("0x","#")),t)}function fo(t){if(Array.isArray(t)){for(let e=0;e<t.length;++e)t[e]=po(t[e]);return t}return po(t)}function mo(t,e,i){for(const r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}uo.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:no.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};const go={texture:!0,children:!1,baseTexture:!0},yo=class extends ls{constructor(t,e,i){let r=!1;i||(i=S.ADAPTER.createCanvas(),r=!0),i.width=3,i.height=3;const s=bi.from(i);s.orig=new _e,s.trim=new _e,super(s),this._ownCanvas=r,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=yo.defaultResolution??S.RESOLUTION,this._autoResolution=yo.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return ho.experimentalLetterSpacing}static set experimentalLetterSpacing(t){K("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),ho.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const i=this.context,r=ho.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=r.width,n=r.height,a=r.lines,o=r.lineHeight,h=r.lineWidths,l=r.maxLineWidth,c=r.fontProperties;let u,d;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,n)+2*e.padding)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;const p=e.dropShadow?2:1;for(let f=0;f<p;++f){const t=e.dropShadow&&0===f,s=t?Math.ceil(Math.max(1,n)+2*e.padding):0,p=s*this._resolution;if(t){i.fillStyle="black",i.strokeStyle="black";const t=e.dropShadowColor,r=rt("number"==typeof t?t:nt(t)),s=e.dropShadowBlur*this._resolution,n=e.dropShadowDistance*this._resolution;i.shadowColor=`rgba(${255*r[0]},${255*r[1]},${255*r[2]},${e.dropShadowAlpha})`,i.shadowBlur=s,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*n,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*n+p}else i.fillStyle=this._generateFillStyle(e,a,r),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let m=(o-c.fontSize)/2;o-c.fontSize<0&&(m=0);for(let i=0;i<a.length;i++)u=e.strokeThickness/2,d=e.strokeThickness/2+i*o+c.ascent+m,"right"===e.align?u+=l-h[i]:"center"===e.align&&(u+=(l-h[i])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[i],u+e.padding,d+e.padding-s,!0),e.fill&&this.drawLetterSpacing(a[i],u+e.padding,d+e.padding-s)}this.updateTexture()}drawLetterSpacing(t,e,i,r=!1){const s=this._style.letterSpacing;let n=!1;if(ho.experimentalLetterSpacingSupported&&(ho.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,n=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===s||n)return void(r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));let a=e;const o=ho.graphemeSegmenter(t);let h=this.context.measureText(t).width,l=0;for(let c=0;c<o.length;++c){const t=o[c];r?this.context.strokeText(t,a,i):this.context.fillText(t,a,i);let e="";for(let i=c+1;i<o.length;++i)e+=o[i];l=this.context.measureText(e).width,a+=h-l+s,h=l}}updateTexture(){const t=this.canvas;if(this._style.trim){const e=Dt(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}const e=this._texture,i=this._style,r=i.trim?0:i.padding,s=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-r,e.trim.y=-r,e.orig.width=e._frame.width-2*r,e.orig.height=e._frame.height-2*r,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),-1===this._textureID&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,i){const r=t.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];let s;const n=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,o=this.canvas.width/this._resolution-n-2*a,h=this.canvas.height/this._resolution-n-2*a,l=r.slice(),c=t.fillGradientStops.slice();if(!c.length){const t=l.length+1;for(let e=1;e<t;++e)c.push(e/t)}if(l.unshift(r[0]),c.unshift(0),l.push(r[r.length-1]),c.push(1),t.fillGradientType===no.LINEAR_VERTICAL){s=this.context.createLinearGradient(o/2,a,o/2,h+a);const r=i.fontProperties.fontSize+t.strokeThickness;for(let t=0;t<e.length;t++){const n=i.lineHeight*(t-1)+r,a=i.lineHeight*t;let o=a;t>0&&n>a&&(o=(a+n)/2);const u=a+r,d=i.lineHeight*(t+1);let p=u;t+1<e.length&&d<u&&(p=(u+d)/2);const f=(p-o)/h;for(let t=0;t<l.length;t++){let e=0;e="number"==typeof c[t]?c[t]:t/l.length;let i=Math.min(1,Math.max(0,o/h+e*f));i=Number(i.toFixed(5)),s.addColorStop(i,l[t])}}}else{s=this.context.createLinearGradient(a,h/2,o+a,h/2);const t=l.length+1;let e=1;for(let i=0;i<l.length;i++){let r;r="number"==typeof c[i]?c[i]:e/t,s.addColorStop(r,l[i]),e++}}return s}destroy(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},go,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=bt(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=bt(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},this._style=t instanceof uo?t:new uo(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let vo=yo;vo.defaultAutoResolution=!0;class _o{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function xo(t,e){let i=!1;if(t?._textures?.length)for(let r=0;r<t._textures.length;r++)if(t._textures[r]instanceof bi){const s=t._textures[r].baseTexture;e.includes(s)||(e.push(s),i=!0)}return i}function bo(t,e){if(t.baseTexture instanceof ie){const i=t.baseTexture;return e.includes(i)||e.push(i),!0}return!1}function Eo(t,e){if(t._texture&&t._texture instanceof bi){const i=t._texture.baseTexture;return e.includes(i)||e.push(i),!0}return!1}function To(t,e){return e instanceof vo&&(e.updateText(!0),!0)}function wo(t,e){if(e instanceof uo){const t=e.toFontString();return ho.measureFont(t),!0}return!1}function So(t,e){if(t instanceof vo){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const i=t._texture.baseTexture;return e.includes(i)||e.push(i),!0}return!1}function Ao(t,e){return t instanceof uo&&(e.includes(t)||e.push(t),!0)}const Co=class{constructor(t){this.limiter=new _o(Co.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(So),this.registerFindHook(Ao),this.registerFindHook(xo),this.registerFindHook(bo),this.registerFindHook(Eo),this.registerUploadHook(To),this.registerUploadHook(wo)}upload(t){return new Promise((e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Pr.system.addOnce(this.tick,this,Cr.UTILITY))):e()}))}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed)for(let i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)Pr.system.addOnce(this.tick,this,Cr.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,i=t.length;e<i;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof as)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Pr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Io=Co;function Ro(t,e){return e instanceof ie&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Po(t,e){if(!(e instanceof Ga))return!1;const{geometry:i}=e;e.finishPoly(),i.updateBatches();const{batches:r}=i;for(let s=0;s<r.length;s++){const{texture:e}=r[s].style;e&&Ro(t,e.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function ko(t,e){return t instanceof Ga&&(e.push(t),!0)}Io.uploadsPerFrame=4,Object.defineProperties(S,{UPLOADS_PER_FRAME:{get:()=>Io.uploadsPerFrame,set(t){K("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Io.uploadsPerFrame=t}}});class Mo extends Io{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(ko),this.registerUploadHook(Ro),this.registerUploadHook(Po)}}Mo.extension={name:"prepare",type:jt.RendererSystem},Ht.add(Mo);class No{constructor(t){this.maxMilliseconds=t,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}class Oo extends ls{constructor(t,e=!0){super(t[0]instanceof bi?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Pr.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Pr.shared.add(this.update,this,Cr.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let i=0;i<t.length;++i)e.push(bi.from(t[i]));return new Oo(e)}static fromImages(t){const e=[];for(let i=0;i<t.length;++i)e.push(bi.from(t[i]));return new Oo(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof bi)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Pr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Pr.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Do=new ye;class Lo extends ls{constructor(t,e=100,i=100){super(t),this.tileTransform=new De,this._width=e,this._height=i,this.uvMatrix=this.texture.uvMatrix||new Li(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)}getLocalBounds(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new _e),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Do);const e=this._width,i=this._height,r=-e*this.anchor._x;if(Do.x>=r&&Do.x<r+e){const t=-i*this.anchor._y;if(Do.y>=t&&Do.y<t+i)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,e){const i=t instanceof bi?t:bi.from(t,e);return new Lo(i,e.width,e.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var Bo="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const Fo=new we;class Uo extends si{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Si,this.state=Yt.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=ei.from(Bo,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?ei.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):ei.from(Bo,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)}render(t){const e=this.renderer,i=this.quad;let r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,n=t.uvRespectAnchor?t.anchor.y:0;r=i.uvs,r[0]=r[6]=-s,r[1]=r[3]=-n,r[2]=r[4]=1-s,r[5]=r[7]=1-n,i.invalidate();const a=t._texture,o=a.baseTexture,h=o.alphaMode>0,l=t.tileTransform.localTransform,c=t.uvMatrix;let u=o.isPowerOfTwo&&a.frame.width===o.width&&a.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==f.CLAMP:o.wrapMode===f.CLAMP&&(o.wrapMode=f.REPEAT));const d=u?this.simpleShader:this.shader,p=a.width,m=a.height,g=t._width,y=t._height;Fo.set(l.a*p/g,l.b*p/y,l.c*m/g,l.d*m/y,l.tx/g,l.ty/y),Fo.invert(),u?Fo.prepend(c.mapCoord):(d.uniforms.uMapCoord=c.mapCoord.toArray(!0),d.uniforms.uClampFrame=c.uClampFrame,d.uniforms.uClampOffset=c.uClampOffset),d.uniforms.uTransform=Fo.toArray(!0),d.uniforms.uColor=ut(t.tint,t.worldAlpha,d.uniforms.uColor,h),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,e.shader.bind(d),e.geometry.bind(i),this.state.blendMode=ht(t.blendMode,h),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Uo.extension={name:"tilingSprite",type:jt.RendererPlugin},Ht.add(Uo);const jo=class{constructor(t,e,i=null){this.linkedSheets=[],this._texture=t instanceof bi?t:null,this.baseTexture=t instanceof ie?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const r=this.baseTexture.resource;this.resolution=this._updateResolution(i||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let i=Ut(t,null);return null===i&&(i=parseFloat(e??"1")),1!==i&&this.baseTexture.setResolution(i),i}parse(){return new Promise((t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=jo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(t){let e=t;const i=jo.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const t=this._frameKeys[e],i=this._frames[t],r=i.frame;if(r){let e=null,s=null;const n=!1!==i.trimmed&&i.sourceSize?i.sourceSize:i.frame,a=new _e(0,0,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution);e=i.rotated?new _e(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):new _e(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),!1!==i.trimmed&&i.spriteSourceSize&&(s=new _e(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[t]=new bi(this.baseTexture,e,a,s,i.rotated?2:0,i.anchor),bi.addToCache(this.textures[t],t)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const r=t[e][i];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*jo.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*jo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Go=jo;Go.BATCH_SIZE=1e3;const Vo=["jpg","png","jpeg","avif","webp"];function Ho(t,e,i){const r={};if(t.forEach((t=>{r[t]=e})),Object.keys(e.textures).forEach((t=>{r[t]=e.textures[t]})),!i){const i=q.dirname(t[0]);e.linkedSheets.forEach(((t,s)=>{const n=Ho([`${i}/${e.data.meta.related_multi_packs[s]}`],t,!0);Object.assign(r,n)}))}return r}const zo={extension:jt.Asset,cache:{test:t=>t instanceof Go,getCacheableAssets:(t,e)=>Ho(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),i=e.pop(),r=e.pop();return"json"===i&&Vo.includes(r)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(S.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{extension:{type:jt.LoadParser,priority:zs.Normal},testParse:async(t,e)=>".json"===q.extname(e.src).toLowerCase()&&!!t.frames,async parse(t,e,i){let r=q.dirname(e.src);r&&r.lastIndexOf("/")!==r.length-1&&(r+="/");const s=r+t.meta.image,n=(await i.load([s]))[s],a=new Go(n.baseTexture,t,e.src);await a.parse();const o=t?.meta?.related_multi_packs;if(Array.isArray(o)){const t=[];for(const n of o){if("string"!=typeof n)continue;const s=r+n;e.data?.ignoreMultiPack||t.push(i.load({src:s,data:{ignoreMultiPack:!0}}))}const s=await Promise.all(t);a.linkedSheets=s,s.forEach((t=>{t.linkedSheets=[a].concat(a.linkedSheets.filter((e=>e!==t)))}))}return a},unload(t){t.destroy(!0)}}};Ht.add(zo);class Xo{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Wo{static test(t){return"string"==typeof t&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in e){const t=e[s].match(/^[a-z]+/gm)[0],r=e[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),n={};for(const e in r){const t=r[e].split("="),i=t[0],s=t[1].replace(/"/gm,""),a=parseFloat(s),o=isNaN(a)?s:a;n[i]=o}i[t].push(n)}const r=new Xo;return i.info.forEach((t=>r.info.push({face:t.face,size:parseInt(t.size,10)}))),i.common.forEach((t=>r.common.push({lineHeight:parseInt(t.lineHeight,10)}))),i.page.forEach((t=>r.page.push({id:parseInt(t.id,10),file:t.file}))),i.char.forEach((t=>r.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)}))),i.kerning.forEach((t=>r.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)}))),i.distanceField.forEach((t=>r.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType}))),r}}class $o{static test(t){const e=t;return"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")}static parse(t){const e=new Xo,i=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),n=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),o=t.getElementsByTagName("distanceField");for(let h=0;h<i.length;h++)e.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(let h=0;h<r.length;h++)e.common.push({lineHeight:parseInt(r[h].getAttribute("lineHeight"),10)});for(let h=0;h<s.length;h++)e.page.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});for(let h=0;h<n.length;h++){const t=n[h];e.char.push({id:parseInt(t.getAttribute("id"),10),page:parseInt(t.getAttribute("page"),10)||0,x:parseInt(t.getAttribute("x"),10),y:parseInt(t.getAttribute("y"),10),width:parseInt(t.getAttribute("width"),10),height:parseInt(t.getAttribute("height"),10),xoffset:parseInt(t.getAttribute("xoffset"),10),yoffset:parseInt(t.getAttribute("yoffset"),10),xadvance:parseInt(t.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)e.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<o.length;h++)e.distanceField.push({fieldType:o[h].getAttribute("fieldType"),distanceRange:parseInt(o[h].getAttribute("distanceRange"),10)});return e}}class Yo{static test(t){return!("string"!=typeof t||!t.includes("<font>"))&&$o.test(S.ADAPTER.parseXML(t))}static parse(t){return $o.parse(S.ADAPTER.parseXML(t))}}const qo=[Wo,$o,Yo];function Zo(t){for(let e=0;e<qo.length;e++)if(qo[e].test(t))return qo[e];return null}function Ko(t,e,i,r,s,n,a){const o=i.text,h=i.fontProperties;e.translate(r,s),e.scale(n,n);const l=a.strokeThickness/2,c=-a.strokeThickness/2;if(e.font=a.toFontString(),e.lineWidth=a.strokeThickness,e.textBaseline=a.textBaseline,e.lineJoin=a.lineJoin,e.miterLimit=a.miterLimit,e.fillStyle=function(t,e,i,r,s,n){const a=i.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];let o;const h=i.dropShadow?i.dropShadowDistance:0,l=i.padding||0,c=t.width/r-h-2*l,u=t.height/r-h-2*l,d=a.slice(),p=i.fillGradientStops.slice();if(!p.length){const t=d.length+1;for(let e=1;e<t;++e)p.push(e/t)}if(d.unshift(a[0]),p.unshift(0),d.push(a[a.length-1]),p.push(1),i.fillGradientType===no.LINEAR_VERTICAL){o=e.createLinearGradient(c/2,l,c/2,u+l);let t=0;const r=(n.fontProperties.fontSize+i.strokeThickness)/u;for(let e=0;e<s.length;e++){const i=n.lineHeight*e;for(let e=0;e<d.length;e++){let s=0;s="number"==typeof p[e]?p[e]:e/d.length;const n=i/u+s*r;let a=Math.max(t,n);a=Math.min(a,1),o.addColorStop(a,d[e]),t=a}}}else{o=e.createLinearGradient(l,u/2,c+l,u/2);const t=d.length+1;let i=1;for(let e=0;e<d.length;e++){let r;r="number"==typeof p[e]?p[e]:i/t,o.addColorStop(r,d[e]),i++}}return o}(t,e,a,n,[o],i),e.strokeStyle=a.stroke,a.dropShadow){const t=a.dropShadowColor,i=rt("number"==typeof t?t:nt(t)),r=a.dropShadowBlur*n,s=a.dropShadowDistance*n;e.shadowColor=`rgba(${255*i[0]},${255*i[1]},${255*i[2]},${a.dropShadowAlpha})`,e.shadowBlur=r,e.shadowOffsetX=Math.cos(a.dropShadowAngle)*s,e.shadowOffsetY=Math.sin(a.dropShadowAngle)*s}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;a.stroke&&a.strokeThickness&&e.strokeText(o,l,c+i.lineHeight-h.descent),a.fill&&e.fillText(o,l,c+i.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Qo(t){return Array.from?Array.from(t):t.split("")}function Jo(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}const th=class{constructor(t,e,i){const[r]=t.info,[s]=t.common,[n]=t.page,[a]=t.distanceField,o=Ut(n.file),h={};this._ownsTextures=i,this.font=r.face,this.size=r.size,this.lineHeight=s.lineHeight/o,this.chars={},this.pageTextures=h;for(let l=0;l<t.page.length;l++){const{id:i,file:r}=t.page[l];h[i]=e instanceof Array?e[l]:e[r],a?.fieldType&&"none"!==a.fieldType&&(h[i].baseTexture.alphaMode=g.NO_PREMULTIPLIED_ALPHA,h[i].baseTexture.mipmap=m.OFF)}for(let l=0;l<t.char.length;l++){const{id:e,page:i}=t.char[l];let{x:r,y:s,width:n,height:a,xoffset:c,yoffset:u,xadvance:d}=t.char[l];r/=o,s/=o,n/=o,a/=o,c/=o,u/=o,d/=o;const p=new _e(r+h[i].frame.x/o,s+h[i].frame.y/o,n,a);this.chars[e]={xOffset:c,yOffset:u,xAdvance:d,kerning:{},texture:new bi(h[i].baseTexture,p),page:i}}for(let l=0;l<t.kerning.length;l++){let{first:e,second:i,amount:r}=t.kerning[l];e/=o,i/=o,r/=o,this.chars[i]&&(this.chars[i].kerning[e]=r)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,i){let r;if(t instanceof Xo)r=t;else{const e=Zo(t);if(!e)throw new Error("Unrecognized data format for font.");r=e.parse(t)}e instanceof bi&&(e=[e]);const s=new th(r,e,i);return th.available[s.font]=s,s}static uninstall(t){const e=th.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete th.available[t]}static from(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:s,resolution:n,textureWidth:a,textureHeight:o,...h}=Object.assign({},th.defaultOptions,i),l=function(t){"string"==typeof t&&(t=[t]);const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];if(Array.isArray(r)){if(2!==r.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const t=r[0].charCodeAt(0),i=r[1].charCodeAt(0);if(i<t)throw new Error("[BitmapFont]: Invalid character range.");for(let r=t,s=i;r<=s;r++)e.push(String.fromCharCode(r))}else e.push(...Qo(r))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(r),c=e instanceof uo?e:new uo(e),u=a,d=new Xo;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};let p,f,m,g=0,y=0,v=0;const _=[],x=[];for(let E=0;E<l.length;E++){p||(p=S.ADAPTER.createCanvas(),p.width=a,p.height=o,f=p.getContext("2d"),m=new ie(p,{resolution:n,...h}),_.push(m),x.push(new bi(m)),d.page.push({id:x.length-1,file:""}));const t=l[E],e=ho.measureText(t,c,!1,p),i=e.width,r=Math.ceil(e.height),b=Math.ceil(("italic"===c.fontStyle?2:1)*i);if(y>=o-r*n){if(0===y)throw new Error(`[BitmapFont] textureHeight ${o}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${t}')`);--E,p=null,f=null,m=null,y=0,g=0,v=0;continue}if(v=Math.max(r+e.fontProperties.descent,v),b*n+g>=u){if(0===g)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${t}')`);--E,y+=v*n,y=Math.ceil(y),g=0,v=0;continue}Ko(p,f,e,g,y,n,c);const T=Jo(e.text);d.char.push({id:T,page:x.length-1,x:g/n,y:y/n,width:b,height:r,xoffset:0,yoffset:0,xadvance:Math.ceil(i-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),g+=(b+2*s)*n,g=Math.ceil(g)}for(let E=0,T=l.length;E<T;E++){const t=l[E];for(let e=0;e<T;e++){const i=l[e],r=f.measureText(t).width,s=f.measureText(i).width,n=f.measureText(t+i).width-(r+s);n&&d.kerning.push({first:Jo(t),second:Jo(i),amount:n})}}const b=new th(d,x,!0);return void 0!==th.available[t]&&th.uninstall(t),th.available[t]=b,b}};let eh=th;eh.ALPHA=[["a","z"],["A","Z"]," "],eh.NUMERIC=[["0","9"]],eh.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],eh.ASCII=[[" ","~"]],eh.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:th.ALPHANUMERIC},eh.available={};const ih=[],rh=[],sh=[],nh=class extends as{constructor(t,e={}){super(),this._tint=16777215;const{align:i,tint:r,maxWidth:s,letterSpacing:n,fontName:a,fontSize:o}=Object.assign({},nh.styleDefaults,e);if(!eh.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tint=r,this._font=void 0,this._fontName=a,this._fontSize=o,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=n,this._anchor=new Ne((()=>{this.dirty=!0}),this,0,0),this._roundPixels=S.ROUND_PIXELS,this.dirty=!0,this._resolution=S.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=eh.available[this._fontName],e=this.fontSize,i=e/t.size,r=new ye,s=[],n=[],a=[],h=Qo(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*t.size/e,c="none"===t.distanceFieldType?ih:rh;let u=null,d=0,p=0,f=0,m=-1,g=0,y=0,v=0,_=0;for(let o=0;o<h.length;o++){const e=h[o],i=Jo(e);if(/(?:\s)/.test(e)&&(m=o,g=d,_++),"\r"===e||"\n"===e){n.push(d),a.push(-1),p=Math.max(p,d),++f,++y,r.x=0,r.y+=t.lineHeight,u=null,_=0;continue}const c=t.chars[i];if(!c)continue;u&&c.kerning[u]&&(r.x+=c.kerning[u]);const x=sh.pop()||{texture:bi.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ye};x.texture=c.texture,x.line=f,x.charCode=i,x.position.x=r.x+c.xOffset+this._letterSpacing/2,x.position.y=r.y+c.yOffset,x.prevSpaces=_,s.push(x),d=x.position.x+Math.max(c.xAdvance-c.xOffset,c.texture.orig.width),r.x+=c.xAdvance+this._letterSpacing,v=Math.max(v,c.yOffset+c.texture.height),u=i,-1!==m&&l>0&&r.x>l&&(++y,xt(s,1+m-y,1+o-m),o=m,m=-1,n.push(g),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,g),f++,r.x=0,r.y+=t.lineHeight,u=null,_=0)}const x=h[h.length-1];"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(d=g),n.push(d),p=Math.max(p,d),a.push(-1));const b=[];for(let o=0;o<=f;o++){let t=0;"right"===this._align?t=p-n[o]:"center"===this._align?t=(p-n[o])/2:"justify"===this._align&&(t=a[o]<0?0:(p-n[o])/a[o]),b.push(t)}const E=s.length,T={},w=[],S=this._activePagesMeshData;c.push(...S);for(let A=0;A<E;A++){const e=s[A].texture,i=e.baseTexture.uid;if(!T[i]){let r=c.pop();if(!r){const e=new Ya;let i,s;"none"===t.distanceFieldType?(i=new qa(bi.EMPTY),s=o.NORMAL):(i=new qa(bi.EMPTY,{program:Qe.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),s=o.NORMAL_NPM);const n=new $a(e,i);n.blendMode=s,r={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:n,vertices:null,uvs:null,indices:null}}r.index=0,r.indexCount=0,r.vertexCount=0,r.uvsCount=0,r.total=0;const{_textureCache:s}=this;s[i]=s[i]||new bi(e.baseTexture),r.mesh.texture=s[i],r.mesh.tint=this._tint,w.push(r),T[i]=r}T[i].total++}for(let o=0;o<S.length;o++)w.includes(S[o])||this.removeChild(S[o].mesh);for(let o=0;o<w.length;o++)w[o].mesh.parent!==this&&this.addChild(w[o].mesh);this._activePagesMeshData=w;for(const o in T){const t=T[o],e=t.total;if(!(t.indices?.length>6*e)||t.vertices.length<2*$a.BATCHABLE_SIZE)t.vertices=new Float32Array(8*e),t.uvs=new Float32Array(8*e),t.indices=new Uint16Array(6*e);else{const e=t.total,i=t.vertices;for(let t=4*e*2;t<i.length;t++)i[t]=0}t.mesh.size=6*e}for(let o=0;o<E;o++){const t=s[o];let e=t.position.x+b[t.line]*("justify"===this._align?t.prevSpaces:1);this._roundPixels&&(e=Math.round(e));const r=e*i,n=t.position.y*i,a=t.texture,h=T[a.baseTexture.uid],l=a.frame,c=a._uvs,u=h.index++;h.indices[6*u+0]=0+4*u,h.indices[6*u+1]=1+4*u,h.indices[6*u+2]=2+4*u,h.indices[6*u+3]=0+4*u,h.indices[6*u+4]=2+4*u,h.indices[6*u+5]=3+4*u,h.vertices[8*u+0]=r,h.vertices[8*u+1]=n,h.vertices[8*u+2]=r+l.width*i,h.vertices[8*u+3]=n,h.vertices[8*u+4]=r+l.width*i,h.vertices[8*u+5]=n+l.height*i,h.vertices[8*u+6]=r,h.vertices[8*u+7]=n+l.height*i,h.uvs[8*u+0]=c.x0,h.uvs[8*u+1]=c.y0,h.uvs[8*u+2]=c.x1,h.uvs[8*u+3]=c.y1,h.uvs[8*u+4]=c.x2,h.uvs[8*u+5]=c.y2,h.uvs[8*u+6]=c.x3,h.uvs[8*u+7]=c.y3}this._textWidth=p*i,this._textHeight=(r.y+t.lineHeight)*i;for(const o in T){const t=T[o];if(0!==this.anchor.x||0!==this.anchor.y){let e=0;const i=this._textWidth*this.anchor.x,r=this._textHeight*this.anchor.y;for(let s=0;s<t.total;s++)t.vertices[e++]-=i,t.vertices[e++]-=r,t.vertices[e++]-=i,t.vertices[e++]-=r,t.vertices[e++]-=i,t.vertices[e++]-=r,t.vertices[e++]-=i,t.vertices[e++]-=r}this._maxLineHeight=v*i;const e=t.mesh.geometry.getBuffer("aVertexPosition"),r=t.mesh.geometry.getBuffer("aTextureCoord"),s=t.mesh.geometry.getIndex();e.data=t.vertices,r.data=t.uvs,s.data=t.indices,e.update(),r.update(),s.update()}for(let o=0;o<s.length;o++)sh.push(s[o]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:i,size:r}=eh.available[this._fontName];if("none"!==i){const{a:i,b:s,c:n,d:a}=this.worldTransform,o=Math.sqrt(i*i+s*s),h=Math.sqrt(n*n+a*a),l=(Math.abs(o)+Math.abs(h))/2,c=this.fontSize/r,u=t._view.resolution;for(const t of this._activePagesMeshData)t.mesh.shader.uniforms.uFWidth=l*e*c*u}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=eh.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(t){if(this._tint!==t){this._tint=t;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!eh.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??eh.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i="none"===eh.available[this._fontName].distanceFieldType?ih:rh;i.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],i.filter((t=>e[t.mesh.texture.baseTexture.uid])).forEach((t=>{t.mesh.texture=bi.EMPTY}));for(const r in e){e[r].destroy(),delete e[r]}this._font=null,this._textureCache=null,super.destroy(t)}};let ah=nh;ah.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const oh=[".xml",".fnt"],hh={extension:{type:jt.LoadParser,priority:zs.Normal},test:t=>oh.includes(q.extname(t).toLowerCase()),testParse:async t=>Wo.test(t)||Yo.test(t),async parse(t,e,i){const r=Wo.test(t)?Wo.parse(t):Yo.parse(t),{src:s}=e,{page:n}=r,a=[];for(let l=0;l<n.length;++l){const t=n[l].file,e=q.join(q.dirname(s),t);a.push(e)}const o=await i.load(a),h=a.map((t=>o[t]));return eh.install(r,h,!0)},load:async(t,e)=>(await S.ADAPTER.fetch(t)).text(),unload(t){t.destroy()}};Ht.add(hh)}}]);